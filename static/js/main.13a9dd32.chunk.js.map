{"version":3,"sources":["images/classicVsValley.png","components/faq.js","images/Palette128_Unobtainable_Trans.png","components/header.js","locale/de/flag.svg","locale/ua/flag.svg","locale/en/flag.svg","locale/eo/flag.svg","locale/es/flag.svg","locale/et/flag.svg","locale/et/flag_pop.svg","locale/fr/flag.svg","locale/it/flag.svg","locale/lt/flag.svg","locale/pt/flag.svg","locale/ru/flag.svg","locale/zh-Hans/flag.svg","locale/zh-Hant/flag.svg","locale/pl/flag.svg","locale/locale.js","components/languages.js","cookieManager.js","components/tooltip.js","components/mapart/blockSelectionAddCustom/blockSelectionAddCustom.js","images/null.png","images/textures.png","components/mapart/blockImage.js","components/mapart/blockSelection.js","components/mapart/workers/nbt.jsworker","components/mapart/greenButtons.js","components/mapart/workers/mapCanvas.jsworker","components/mapart/mapPreview.js","images/gridOverlay.png","components/mapart/autoCompleteInputBlockToAdd/autoCompleteInputBlockToAdd.js","components/mapart/bufferedNumberInput/bufferedNumberInput.js","components/mapart/mapSettings.js","components/mapart/materials.js","components/mapart/nbtReader.js","components/mapart/viewOnlineCommon/waila.js","components/mapart/viewOnline2D/viewOnline2D.js","components/mapart/viewOnline3D/pointerLockControls.js","components/mapart/viewOnline3D/viewOnline3D.js","components/mapart/mapartController.js","images/upload.png","components/root.js","index.js"],"names":["FAQ","props","_jsxs","className","children","_jsx","Link","to","concat","undefined","includes","match","params","countryCode","href","target","rel","style","textAlign","alt","src","IMG_ClassicVsValley","Header","_Component","_inherits","_super","_createSuper","_this","_classCallCheck","_len","arguments","length","args","Array","_key","call","apply","state","contactInfoClassname","onContactInfoClick","event","getLocaleString","preventDefault","window","confirm","alert","setState","_createClass","key","value","this","onClick","Component","Locale","en","strings","Strings_en","flag","Flag_en","ua","Strings_ua","Flag_ua","et","Strings_et","Flag_et","flag_special","Flag_et_pop","lt","Strings_lt","Flag_lt","ru","Strings_ru","Flag_ru","de","Strings_de","Flag_de","pl","Flag_pl","fr","Strings_fr","Flag_fr","it","Strings_it","Flag_it","pt","Strings_pt","Flag_pt","es","Strings_es","Flag_es","Strings_zh_Hans","Flag_zh_Hans","Strings_zh_Hant","Flag_zh_Hant","eo","Strings_eo","Flag_eo","Languages","Object","keys","map","language","React","Fragment","CookieManager","forEach","name","getCookie","setCookie","cname","cvalue","d","Date","setTime","getTime","expires","toUTCString","document","cookie","ca","split","i","c","charAt","substring","indexOf","defaultValue","cookieValue","Tooltip","hovering","handleMouseOver","handleMouseOut","tooltipStyle","textStyleOverrides","_objectSpread","display","onMouseOver","onMouseOut","tooltipText","BlockSelectionAddCustom","block_name","block_nbtTags","block_colourSetId","block_needsSupport","block_flammable","block_versions","E_KeyOrValue","examplesGroups","title","blocks","blockName","nbtTags","facing","half","versions","variant","type","onSettingChange_block_name","e","onSettingChange_block_nbtTags","tagIndex","keyOrValue","block_nbtTags_new","_toConsumableArray","every","t","pop","push","onSettingChange_block_colourSetId","onSettingChange_block_needsSupport","currentState","onSettingChange_block_flammable","onSettingChange_block_versions","versionToToggle","block_versions_new","coloursJSON","_i","_Object$keys","SupportedVersions","supportedVersion_key","prevProps","lastSelectedCustomBlock","loadBlockIntoForm","colourSetId","blockId","blockToLoad","blockToLoad_nbtTags","versionToLoad_nbtData","values","validVersions","find","version","_i2","_Object$entries","entries","NBTArgs","_Object$entries$_i","_slicedToArray","nbtTag_key","nbtTag_value","blockToLoad_versions","_i3","_Object$entries2","_Object$entries2$_i","MCVersion","NBTName","supportBlockMandatory","flammable","_this2","_this$props","onAddCustomBlock","onDeleteCustomBlock","_this$state","examples","open","examplesGroup","block","outline","padding","marginBlockStart","marginBlockEnd","disabled","_ref","_ref2","tagKey","tagValue","_ref3","_ref4","supportedVersion_value","checked","setting_customBlock_name","onChange","setting_customBlock_nbtTags","_ref5","_ref6","setting_customBlock_colourSetId","backgroundColor","tonesRGB","normal","join","color","_ref7","_ref8","colourSet","colourName","setting_customBlock_needsSupport","setting_customBlock_flammable","setting_customBlock_versions","_ref9","_ref10","block_version","block_version_checked","customBlock_submit","colSpan","width","customBlock_delete","BlockImage","props_others","_objectWithoutProperties","_excluded","isNone","isUnknown","IMG_Null","displayName","backgroundImage","IMG_Textures","backgroundPositionX","backgroundPositionY","presetIndex","BlockSelection","getColourSetBox","background","optionValue_staircasing","MapModes","SCHEMATIC_NBT","staircaseModes","OFF","uniqueId","MAPDAT","cssRGB","CLASSIC","VALLEY","ON","dark","light","ON_UNOBTAINABLE","unobtainable","FULL_DARK","FULL_LIGHT","FULL_UNOBTAINABLE","Error","RGBArray","onChangeColourSetBlock","optionValue_version","selectedBlocks","presets","selectedPresetName","canDeletePreset","onPresetChange","onDeletePreset","onSavePreset","onSharePreset","onGetPDNPaletteClicked","handleAddCustomBlock","handleDeleteCustomBlock","presetsManagement","id","preset","localeKey","blockSelection","filter","some","cursor","position","paddingLeft","zIndex","whiteSpace","margin","GreenButtons","buttonWidth_viewOnline","buttonWidth_NBT_Joined","buttonWidth_NBT_Split","buttonWidth_Mapdat_Split","mapPreviewWorker_onFinishCallback","nbtWorker","Worker","NBTWorker","getNBT_base","workerHeader","optionValue_mapSize_x","optionValue_mapSize_y","optionValue_whereSupportBlocks","optionValue_supportBlock","optionValue_mapdatFilenameUseId","optionValue_mapdatFilenameIdStart","uploadedImage_baseFilename","currentMaterialsData","mapPreviewWorker_inProgress","downloadBlobFile","onGetViewOnlineNBT","currentSelectedBlocks","elt","terminate","resetButtonWidths","numberOfSplitsCalculated","zipFile","JSZip","t0","performance","now","onmessage","data","head","body","t1","console","log","toString","NBT_Array","_e$data$body","whichMap_x","whichMap_y","NBT_Array_gzipped","gzip","file","generateAsync","then","content","downloadBlob","Blob","_e$data$body2","Mapdat_Bytes","Mapdat_Bytes_gzipped","_e$data$body3","postMessage","WhereSupportBlocksModes","pixelsData","maps","onViewOnlineClicked","onGetNBTClicked","onGetNBTSplitClicked","onGetMapdatSplitClicked","onGetMapdatSplitZipClicked","_this$props2","optionValue_modeNBTOrMapdat","optionValue_cropImage","optionValue_cropImage_zoom","optionValue_cropImage_percent_x","optionValue_cropImage_percent_y","optionValue_transparency","optionValue_transparencyTolerance","optionValue_betterColour","optionValue_dithering","optionValue_preprocessingEnabled","preProcessingValue_brightness","preProcessingValue_contrast","preProcessingValue_saturation","preProcessingValue_backgroundColourSelect","preProcessingValue_backgroundColour","uploadedImage","componentDidUpdate_shouldNBTWorkerTerminate","buttons_mapModeConditional","_this$props3","Math","floor","button_donate","textDecoration","MapPreview","mapPreviewSizeScale","workerProgress","mapCanvasWorker","MapCanvasWorker","increasePreviewScale","decreasePreviewScale","canvasRef_source","createRef","canvasRef_display","fileInputRef","newProps","prevState","newState","propChanges","shouldCanvasUpdate_source","updateCanvas_source","shouldCanvasUpdate_display","updateCanvas_display","colourHex","rgbGroups_input","exec","colourRGB_input","parseInt","smallestDistance","colourRGB_return","coloursRGB_colourSet","_step","_iterator","_createForOfIteratorHelper","s","n","done","colourRGB_colourSet","colourDistance","pow","err","f","padStart","ctx_source","current","getContext","imageSmoothingEnabled","imageSmoothingQuality","clearRect","canvas","height","backgroundColour","BackgroundColourModes","test","SMOOTH","selectedBlockId","closestSmoothColourTo","rect","fillStyle","fill","CropModes","drawImage","CENTER","MANUAL","samplingWidth","samplingHeight","samplingOffset_x","samplingOffset_y","img_width","img_height","_this$props4","onGetMapMaterials","onMapPreviewWorker_begin","canvasImageData","getImageData","putImageData","pixels","DitherMethods","_this3","_this$props5","optionValue_showGridOverlay","onFileDialogEvent","ref","backgroundSize","click","visibility","AutoCompleteInputBlockToAdd","suggestionSelected","getRelevantSuggestions","suggestions_prefix","suggestions_includes","blockNBTData","slice","startsWith","handleTextChange","newValue","replace","toLowerCase","setValue","onSuggestionClicked","suggestion","onFocus","relevantSuggestions","BufferedNumberInput","buffer","onInputChange","validators","onValidInput","newValue_buffer","newValue_int","validator","min","max","step","MapSettings","onOptionChange_version","onOptionChange_mapSize_x","onOptionChange_mapSize_y","onOptionChange_modeNBTOrMapdat","onOptionChange_cropImage","onOptionChange_cropImage_zoom","onOptionChange_cropImage_percent_x","onOptionChange_cropImage_percent_y","onOptionChange_showGridOverlay","onOptionChange_staircasing","onOptionChange_WhereSupportBlocks","setOption_SupportBlock","onOptionChange_transparency","onOptionChange_transparencyTolerance","onOptionChange_mapdatFilenameUseId","onOptionChange_mapdatFilenameIdStart","onOptionChange_BetterColour","onOptionChange_dithering","onOptionChange_PreProcessingEnabled","onOptionChange_PreProcessingBrightness","onOptionChange_PreProcessingContrast","onOptionChange_PreProcessingSaturation","onOptionChange_PreProcessingBackgroundColourSelect","onOptionChange_PreProcessingBackgroundColour","optionValue_extras_moreStaircasingOptions","onOptionChange_extras_moreStaircasingOptions","setting_mode","mapMode","setting_version","supportedVersion","setting_mapSize","isNaN","setting_crop","cropMode","setting_crop_zoom","setting_crop_percent_x","setting_crop_percent_y","settings_mapModeConditional","settingGroup_cropping","setting_grid","setting_staircasing","staircaseMode","extra","whereSupportBlocksMode","setting_transparency","setting_transparencyTolerance","settingGroup_transparency","setting_mapdatFilenameUseId","setting_mapdatFilenameIdStart","settingGroup_mapdatFilename","setting_betterColour","setting_dithering","ditherMethodKey","setting_preprocessing","setting_preprocessing_brightness","setting_preprocessing_contrast","setting_preprocessing_saturation","setting_preprocessing_background","backgroundColourMode","setting_preprocessing_backgroundColour","settingGroup_preprocessing","setting_extras_moreStaircasingOptions","settingGroup_extras","Materials","onlyMaxPerSplit","onOnlyMaxPerSplitChange","formatMaterialCount","count","numberOfStacks","remainder","numberOfShulkers","toFixed","materialsCount","_step2","row","_iterator2","materials","materialCount","sort","first","second","supportBlockCount","_i4","_Object$entries3","_Object$entries3$_i","nonZeroMaterialsItems","getMaterialsCount_nonZeroMaterialsItems","getMaterialsCount_supportBlock","supportBlockIds","colourSetIdAndBlockIdFromNBTName","TagTypes","NBTReader","ArrayBuffer","DataView","Uint8Array","dataView","arrayView","offset","bytes","codepoints","byte","String","fromCharCode","dataType","size","readByType","read","arrayLength","returnArray","string_bytes_length","string_bytes","decodeUTF8","list_objectType","list_length","returnObject","tagType","array_length","Waila","selectedBlock","x","y","z","verticalAlign","ViewOnline2D","viewOnline_NBT_decompressed","zoomFactor","canvasOffset_x","canvasOffset_y","paletteIdToColourSetIdAndBlockId","mouse","down","movedSinceDown","handleScroll_document","handleScroll_canvas","zoomMultiplier","offsetX","offsetY","delta","wheelDelta","detail","bind","_assertThisInitialized","handleMouseDown","clientX","clientY","addEventListener","handleMouseMove","passive","handleMouseUp","canvasRef_viewOnline","canvas_width","clientWidth","canvas_height","clientHeight","block_x","block_z","block_coords","pos","block_paletteId","_this$paletteIdToColo","selectedBlock_colourSetId","selectedBlock_blockId","removeEventListener","mouseMoved_x","mouseMoved_y","abs","viewOnline_NBT","nbtReader","loadBuffer","getData","NBT_palette","palette","_loop","paletteItem_index","paletteItem","paletteItemFound","Name","Properties","argKey","argValue","img_textures","Image","onload","canvasRef_viewOnline_ctx","textBaseline","font","fillRect","currentY","processedNoobline","_this2$paletteIdToCol","int_colourSetId","int_blockId","int_colourSetId_toDraw","int_blockId_toDraw","strokeStyle","strokeText","fillText","whichChunk_x","whichChunk_y","getNBTDecompressed","drawNBT","onChooseViewOnline3D","_this$state2","component_controls","flexDirection","component_waila","component_size","_viewOnline_NBT_decom","size_x","size_y","size_z","marginRight","right","component_topBar","left","top","_euler","Euler","_vector","Vector3","_vector_up","_changeEvent","_lockEvent","_unlockEvent","_PI_2","PI","PointerLockControls","_EventDispatcher","camera","domElement","warn","isLocked","minPolarAngle","maxPolarAngle","scope","onMouseMove","movementX","mozMovementX","webkitMovementX","movementY","mozMovementY","webkitMovementY","setFromQuaternion","quaternion","setFromEuler","dispatchEvent","onPointerlockChange","ownerDocument","pointerLockElement","onPointerlockError","error","connect","disconnect","dispose","getObject","getDirection","direction","v","copy","applyQuaternion","moveForward","distance","setFromMatrixColumn","matrix","crossVectors","up","addScaledVector","moveRight","moveUp","lock","requestPointerLock","unlock","exitPointerLock","EventDispatcher","BlockWorld","options","faces","uvRow","dir","vertices","uv","chunkSize","chunks","chunks_mesh","renderRequested","animationFrameRequestID","moveX","moveY","startAnimationLoop","renderer","render","scene","requestAnimationFrame","stopAnimationLoop","cancelAnimationFrame","handleKeyDown","controls","fov","updateProjectionMatrix","handleKeyUp","handlePointerDown","canvasRef","recordMovement","selectBlockIfNoMovement","selectBlock","handleTouchStart","handleWindowResize","setSize","aspect","tileSize","tileTextureWidth","tileTextureHeight","camera_x","camera_y","camera_z","onSelectBlockCallback","THREE","add","set","texture","load","magFilter","minFilter","material","side","alphaTest","transparent","blockX","euclideanModulo","chunkX","chunkY","chunkZ","getChunkKey","chunkKey","chunk","getChunkForBlock","blockOffset","computeBlockOffset","addChunkForBlock","start","end","setFromMatrixPosition","matrixWorld","unproject","intersection","intersectRay","dx","dy","dz","lenSq","len","sqrt","ix","iy","iz","stepX","stepY","stepZ","txDelta","tyDelta","tzDelta","xDist","yDist","zDist","txMax","Infinity","tyMax","tzMax","steppedIndex","getBlock","verticesComponents","normalsComponents","uvs","indices","startX","startY","startZ","blockY","blockZ","_block","_step$value","neighbor","numberOfVertices","_step2$value","mesh","geometry","_this$generateGeometr","generateGeometryDataForChunk","setAttribute","Float32Array","setIndex","computeBoundingSphere","updatedChunkKeys","_arr","ox","oy","oz","updateChunkGeometry","ViewOnline3D","handleEscapeKeyDown","handleViewOnline3DEscape","schematic_size_x","schematic_size_y","schematic_size_z","world","_this3$world","setBlock","_this4","_viewOnline_NBT_decom2","addEventListeners","removeEventListeners","_viewOnline_NBT_decom3","bottom","MapartController","ALL_OPTIMIZED","FloydSteinberg","viewOnline_3D","eventListener_dragover","stopPropagation","eventListener_drop","files","dataTransfer","imgUrl","URL","createObjectURL","loadUploadedImageFromURL","eventListener_paste","clipboardData","handleChangeColourSetBlock","handleChangeColourSetBlocks","setsAndBlocks","blockIdAndBlock","mode","mcVersion","supportedVersionFound","cropValue","staircasingValue","ditheringValue","text","handleGetPDNPaletteClicked","_this$state3","paletteText","selectedBlocksToURL","numberOfColoursExported","toneKeysToExport","toneKeys","colours","toneKeyToExport","Number","toUpperCase","handlePresetChange","presetName","selectedPreset","DefaultPresets","defaultPreset","handleDeletePreset","_this$state4","presets_new","JSON","stringify","handleSavePreset","_this$state5","presetToSave_name","prompt","otherPresets","newPreset","_this$state6","presetQueryString","handleSharePreset","_this$state7","URLToPreset","encodedPreset","onCorruptedPreset","_this$state8","location","fetch","req","json","derp","images","representations","full","presetRegex","_loop2","encodedColourSetId","encodedBlockId","decodedColourSetId","decodedPresetIndex","Q","R","S","T","U","V","W","X","Y","Z","decodedBlock","decodedBlockId","handleSetMapMaterials","block_name_trimmed","trim","blockToAdd","addedFirstVersion","_i5","_Object$entries4","_Object$entries4$_i","_step3","_iterator3","_step3$value","nbtTag_key_trimmed","nbtTag_value_trimmed","customBlocks_new","parse","customBlock","getMergedColoursJSON","_defineProperty","_i6","_Object$entries5","_Object$entries5$_i","init","_step4","cookiesPresets_loaded","touchCookie","cookiesPresets_updated","_iterator4","_loop3","cookiesPreset_loaded","cookiesPreset_updated","cookie_customBlocks","_i7","_Object$keys2","cookieMCVersion","URLParams","searchParams","has","decodedPresetBlocks","get","customBlocks","_step5","coloursJSON_custom","_iterator5","_step5$value","imageURL","baseFilename","img","filename","downloadURL","downloadElt","createElement","download","appendChild","revokeObjectURL","removeChild","_this$state9","Root","displayingCorruptedPresetWarning","displayingEdgeWarning","stringName","languageCodeOverride","stringSegments","stringLast","folder","onEdgeWarningButtonClick","onCorruptedPresetWarningButtonClick","showCorruptedPresetWarning","ReactDOM","StrictMode","Router","basename","Switch","Route","path","component","getElementById"],"mappings":"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","file":"static/js/main.13a9dd32.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/classicVsValley.fb0924c8.png\";","import { Link } from \"react-router-dom\";\r\n\r\nimport \"./faq.css\";\r\nimport IMG_Palette from \"../images/Palette128_Unobtainable_Trans.png\";\r\nimport IMG_ClassicVsValley from \"../images/classicVsValley.png\";\r\n\r\nfunction FAQ(props) {\r\n  return (\r\n    <div className=\"FAQ\">\r\n      <Link to={`/${![undefined, \"en\"].includes(props.match.params.countryCode) ? props.match.params.countryCode : \"\"}`}>\r\n        <h3>Close</h3>\r\n      </Link>\r\n\r\n      <h1>FAQ</h1>\r\n\r\n      <h2>How do I get started?</h2>\r\n      <a href=\"https://youtu.be/bJ-wX68WNHM\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n        Video tutorial\r\n      </a>\r\n\r\n      <h2>General</h2>\r\n      <b>Why does the output change with the same image and settings?</b>\r\n      <p>\r\n        The JPEG decoding and scaling algorithms vary between browsers and get changed all the time. If you wish to be 100% sure your image stays the same,\r\n        right click on the <em>Map preview</em> and choose <em>Save image as...</em>. Next time you can upload the image you saved.\r\n      </p>\r\n\r\n      <h2>Schematic (.nbt)</h2>\r\n      <b>What do I do with the NBT file?</b>\r\n      <p>Use it like a .schematic file.</p>\r\n\r\n      <b>How can I use the NBT file?</b>\r\n      <p>\r\n        You can use it with programs like{\" \"}\r\n        <a href=\"https://cubical.xyz/\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n          cubical.xyz\r\n        </a>\r\n        ,{\" \"}\r\n        <a href=\"https://www.mcedit-unified.net/\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n          MCEdit\r\n        </a>{\" \"}\r\n        and mods like{\" \"}\r\n        <a href=\"https://minecraft.curseforge.com/projects/schematica\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n          Schematica\r\n        </a>{\" \"}\r\n        /{\" \"}\r\n        <a href=\"https://minecraft.curseforge.com/projects/litematica\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n          Litematica\r\n        </a>\r\n        . You can also import them into your game directly with a structure block - although it might require a redstone power source (\r\n        <a href=\"https://github.com/rebane2001/mapartcraft/issues/100\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n          #100\r\n        </a>\r\n        ). It might be a better idea to use a datafile instead - it's easier and gives more colors.\r\n      </p>\r\n\r\n      <b>...but I need a .schematic file!</b>\r\n      <p>\r\n        Import it into{\" \"}\r\n        <a href=\"https://cubical.xyz/\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n          cubical.xyz\r\n        </a>{\" \"}\r\n        or{\" \"}\r\n        <a href=\"https://www.mcedit-unified.net/\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n          MCEdit\r\n        </a>{\" \"}\r\n        and export as .schematic. <em>Note that if you're using MCEdit or Cubical, you must export the map as 1.12.2.</em> You do not need a .schematic file for\r\n        use with Baritone; use Schematica and the \"#schematica\" command.\r\n      </p>\r\n\r\n      <b>But MCEdit doesn't work!</b>\r\n      <p>\r\n        Make sure you're using{\" \"}\r\n        <a href=\"https://www.mcedit-unified.net/\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n          MCEdit Unified\r\n        </a>{\" \"}\r\n        and importing the NBT as a schematic, NOT loading it as a world. Alternatively, use Cubical.\r\n      </p>\r\n\r\n      <b>Why is there a row of extra blocks?</b>\r\n      <p>\r\n        The shade a block shows up as on the map is decided by the block North of it; if the Northern block is higher then a darker tone shows, else if the\r\n        Northern block is lower then a lighter tone shows, else a normal tone shows. Thus an extra row of blocks (colloquially known as a noobline) exists at\r\n        the top of a map to shade the top row properly.\r\n      </p>\r\n\r\n      <b>How do I align the map?</b>\r\n      <p>\r\n        When you have found a suitable place to build your map (eg above an ocean) make sure to open the map first and find the bottom left corner for aligning\r\n        your schematic. Maps in Minecraft align to a fixed 128x128 grid. North is always the up-direction on maps and you shouldn't need to rotate the schematic.\r\n      </p>\r\n\r\n      <h2>Datafile (.dat)</h2>\r\n      <b>What is a map.dat file?</b>\r\n      <p>\r\n        '.dat' is the native format Minecraft stores map data in, meaning you can use it to import maps into your worlds without needing to build a physical\r\n        structure. It also enables you to use a fourth extra shade of color not accessible in survival.\r\n      </p>\r\n\r\n      <b>What do I do with the map.dat file?</b>\r\n      <p>\r\n        You can use the map.dat file in singleplayer or a server you own. Create a new map in-game, go to your world's save file, then the data folder and from\r\n        there you can replace map_xxx.dat files. MapartCraft downloads a .zip file containing all of the 1x1 map.dat files.\r\n      </p>\r\n\r\n      <h2>Settings</h2>\r\n      <b>Map size?</b>\r\n      <p>\r\n        This will define how many maps you will create for your picture. When creating bigger maps, it's recommended to split it into multiple schematics (lest\r\n        large staircased maps stretch above the world height limit). This can be done with the \"DOWNLOAD AS 1X1 SPLIT\" button which downloads all the 1x1 NBTs in a .zip file.\r\n      </p>\r\n\r\n      <b>My image is stretched!</b>\r\n      <p>Change your map size, enable the crop option, or edit your image with an image editor.</p>\r\n\r\n      <b>'Staircasing'?</b>\r\n      <p>\r\n        This will make your map 3D. Doing so will give you 3 times the colors, often producing a much richer mapart, but it will also make the map a lot harder\r\n        to build, as it is not flat. 3D 'Classic' and 'Valley' modes produce the exact same resulting map image, however they are built differently; 'Valley' mode allows the map to be built without any downwards staircases, which may be easier in survival. Observe the difference:\r\n      </p>\r\n      <div style={{ textAlign: \"center\" }}>\r\n        <img alt=\"classicVsValley.png\" src={IMG_ClassicVsValley} style={{\"maxWidth\": \"75%\"}}></img>\r\n      </div>\r\n      <p>\r\n        More staircasing modes can be enabled from the <em>Extras</em> settings tab.\r\n      </p>\r\n\r\n      <b>Better color?</b>\r\n      <p>\r\n        This setting will give you more natural colors. Disabling this will make the website faster and give you slightly worse colors. It is recommended to\r\n        keep this enabled.\r\n      </p>\r\n\r\n      <b>Dithering?</b>\r\n      <p>\r\n        This will add grain to your image to make it look a lot smoother. Floyd-Steinberg dithering is the most accurate, but the Ordered/Bayer dithering will\r\n        usually have less artifacts and gives the image an unique style. It is usually recommended to disable dithering for flat-colored artwork.\r\n      </p>\r\n\r\n      <b>Add blocks under/Block to add?</b>\r\n      <p>\r\n        Here you can pick the block that will be put under either important blocks (eg carpets, sand, pressure plates) or all blocks. This block will also be\r\n        used for the noobline, which cannot be disabled.\r\n      </p>\r\n\r\n      <b>Presets?</b>\r\n      <p>\r\n        You can use presets to save and load block configurations. Pick your blocks and click \"Save\" to save them as a preset, pick a preset to load it and\r\n        click \"Delete\" to delete the loaded preset. It is also possible to share a link for your preset with others.\r\n      </p>\r\n\r\n      <h2>Custom Blocks</h2>\r\n      <p>Custom blocks can be added from the bottom of the blocks selection pane. Different versions of a block can be added for the same block name, eg for 1.12.2 and 1.13.2+. Some examples are provided in the 'examples' section. NBT tags / block states can be found on the <a href=\"https://minecraft.fandom.com/wiki/Block_states\" target=\"_blank\" rel=\"noopener noreferrer\">Minecraft Wiki</a>. To edit an existing custom block, select it, edit the tags / versions etc, and then click the 'add' button to overwrite. Note that presets URLs do not support custom blocks.</p>\r\n\r\n      <div style={{ textAlign: \"center\" }}>\r\n        <img alt=\"Palette\" src={IMG_Palette} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default FAQ;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAFWElEQVR42u2dS28bVRxHx5mJ37Fjx3ZsN3YebhunNEuEkHgsilCFWPJYIJD4Aiz4EvkCSF2yJEhsWNOyBUWAKOpL6kOkavNo0jaYxEnctGFVL88ggbrpOdvf+PpOc3yr+5977ySWlpaOA2Dr4lcUB9v3P8b8xgLGwbnut5iv/N3D/M3r72G+fP8y5gsL3MHr/PXBiTtjfP+pmM8Hl+Iu4PgG5xd7fAMjgbzUKIACiAKIAogCiALIy0a0uLiIF9z7I4N5rnca8wcx89hul9v/83Ef8zMPW5iP9e7wPPoEd/Bemvtf2yxhvsq3F5SDmAtqMXWA1Zg/cL/vCCAKIAogCiAKIAogCiDDaWK328ULkhWeCCc25jC/WecOnDzJ7Ve2IsxP325int/IY16vcwfzCe5/JVvFPJ3jz48HMYWGCsf1mI9HUeQIIAogCiAKIAogCiAKIMNpYqfTwQuOyryw/SDXxrzA0+RgZobbL6d4HjtXnsQ8l+OJeLXKHcw94f6XMw3MUzF1gEIQs3GgzHE1ZR1A/C9AFEAUQBRAFEAUQP41iS8+/RDPB1j77UdsYBDyvoCHuXHM58dWML+yz+vm21u8P3/l4SbmC51ZzNcPnvI0vf8M841BzG9scJfzEs/jO7vc/s/bO44AogCiAKIAogCiAKIA8pzo1PQUG3IriflhNMGFhiI/b58tcftre1wHmDoscB1h9zHm9Ql+4N7f4wUBtZDrAHsHMb+xcIPzwijGjeMQ89RO6AggCiAKIAogCiAKIAogwzrA7BSva++P8Tx9f5TPydsv8UF3rSq3P57iDfDNHd7/n0lx+9VSEfPtiOsAE8+OMN8aiWL+BNy/IObfvzbgef5oOOIIIAogCiAKIAogCiAKIMM6QKvB++u38vw8uj/K8+idIq8XaE5w+8WQ6wC1mP3/6SS3P1Hk9QT5YIB5acB1gFwQUwd4yv0L8lwHqPS5/WTkegBRAFEAUQBRAFEAUQAZkjj3WQvPB3i79To2sP6I5/ntCxcw//WDJcyj6DLmy5vLmH80+Tnmh6s/Yb49wve3tvY+5mfaX2P+xrufcJng8BvMv9s7j/n+75OOAKIAogCiAKIAogCiADKcZtems3jB2fkW5tkN3lfQjenA5tQi5qOjj7iBY45b7RmeJ+9e5QZCfnFfr8f9b1R538Li2VcwP9rn9QoXe3xOY7TedgQQBRAFEAUQBRAFEAWQ4TSxMsXn8M2f4nn+09T0f6oDXGvyFcnkLW5gj+Nmk+sYexs8T++P8PkH2Sz3f7LM7Xe785g/2eXPFx/z+w6Or5xyBBAFEAUQBRAFEAUQBZBhHaDc4P33czO8rrz3jN830InpQK3GV6RS/P3BNseT9Sbmfxf5fIFHIb/3MJPh/ldKvN6i05njOkCP+zdW4Of9T8odRwBRAFEAUQBRAFEAUQB5TiL4so0r69/5gc/L37+yjvlCndcTPEjzPP3uNq8HuPnqa5hPZPgcveIv1zC/fZ7X3Z+5yvsW3ury/V8+4t/gpeXvE44AogCiAKIAogCiAKIA8j8RBfP8vHpyhc/L3435gtk07zuIcrzuvrfD5+lHtTrm2XxMHSC9yu3HrIcocxkkOD3NdY71wYgjgCiAKIAogCiAKIAogLy4OsAc1wEqBXYk5q13QTvN+w4GWX7v4HrE3xBWqlwHKPDnC0m+/3CK2x8fP8R87gTXEa4OQkcAUQBRAFEAUQBRAFEAeXF1gDbP08t5PpA/EbNqvZlKYf5Xhs/DH4v4eX5U5vf6pceTmOdTvF4hbHD7hUIP83aD6wjlA+sAogCiAKIAogCiAKIA8sL4B0z245ksDQ2eAAAAAElFTkSuQmCC\"","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport \"./header.css\";\r\n\r\nclass Header extends Component {\r\n  state = { contactInfoClassname: \"contactInfoBlurred\" };\r\n\r\n  // Reveal contact info\r\n  onContactInfoClick = (event) => {\r\n    const { getLocaleString } = this.props;\r\n    event.preventDefault();\r\n    if (window.confirm(getLocaleString(\"FAQ/HAVE-YOU-READ\"))) {\r\n      alert(getLocaleString(\"FAQ/HELP-IN-ENGLISH\"));\r\n      this.setState({ contactInfoClassname: \"contactInfo\" });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { contactInfoClassname } = this.state;\r\n    const { getLocaleString } = this.props;\r\n    return (\r\n      <div className=\"header\">\r\n        <h3>\r\n          <Link to={`/${![undefined, \"en\"].includes(this.props.countryCode) ? this.props.countryCode + \"/\" : \"\"}faq`}>\r\n            <span className=\"FAQTextButton\">{getLocaleString(\"FAQ/FAQ\")}</span>\r\n          </Link>\r\n          <span> | </span>\r\n          <a href=\"https://youtu.be/j-4RXPkJKU8\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n            {getLocaleString(\"FAQ/VIDEO-TUTORIAL\")}\r\n          </a>\r\n          <span> | </span>\r\n          <a href=\"https://github.com/rebane2001/mapartcraft\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n            GitHub\r\n          </a>\r\n          <span> | </span>\r\n          <a href=\"https://discord.gg/r7Tuerq\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n            2b2t Mapart Discord\r\n          </a>\r\n          <span> | </span>\r\n          <a href=\"https://area51.selfadjointoperator.com/mapartcraft/\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n            Beta\r\n          </a>\r\n        </h3>\r\n        <p>\r\n          {getLocaleString(\"DESCRIPTION/1\")}\r\n          <a href=\"https://www.reddit.com/r/2b2t/\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n            2b2t\r\n          </a>\r\n          {getLocaleString(\"DESCRIPTION/2\")}\r\n          <br></br>\r\n          {getLocaleString(\"DESCRIPTION/3\")}\r\n          <a href=\"https://redd.it/2yck3f\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n            {getLocaleString(\"DESCRIPTION/4\")}\r\n          </a>\r\n          {getLocaleString(\"DESCRIPTION/5\")}\r\n          <br></br>\r\n          {getLocaleString(\"DESCRIPTION/6\")}\r\n          <span className={contactInfoClassname} onClick={this.onContactInfoClick}>\r\n            (rebane2001#3716)\r\n          </span>\r\n          {getLocaleString(\"DESCRIPTION/7\")}\r\n          <span className={contactInfoClassname} onClick={this.onContactInfoClick}>\r\n            (\r\n            <a href=\"https://www.reddit.com/message/compose/?to=rebane2001\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n              /u/rebane2001\r\n            </a>\r\n            )\r\n          </span>\r\n          {getLocaleString(\"DESCRIPTION/8\")}\r\n          <a href=\"https://github.com/rebane2001/mapartcraft/issues\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n            GitHub\r\n          </a>\r\n          {\".\"}\r\n          <br></br>\r\n          <em>\r\n            {getLocaleString(\"DESCRIPTION/9\")}\r\n            <a href=\"/mapartcraft/classic\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n              {getLocaleString(\"DESCRIPTION/10\")}\r\n            </a>\r\n            {\".\"}\r\n          </em>\r\n          <br></br>\r\n          <b>\r\n            {getLocaleString(\"FAQ/PLEASE-READ-1\")}\r\n            <Link to={`/${![undefined, \"en\"].includes(this.props.countryCode) ? this.props.countryCode + \"/\" : \"\"}faq`}>\r\n              <span className=\"FAQTextButton\">{getLocaleString(\"FAQ/FAQ\")}</span>\r\n            </Link>\r\n            {getLocaleString(\"FAQ/PLEASE-READ-2\")}\r\n          </b>\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Header;\r\n","export default __webpack_public_path__ + \"static/media/flag.f5d7d6f6.svg\";","export default __webpack_public_path__ + \"static/media/flag.8d48322a.svg\";","export default __webpack_public_path__ + \"static/media/flag.bca4c3c0.svg\";","export default __webpack_public_path__ + \"static/media/flag.10f89117.svg\";","export default __webpack_public_path__ + \"static/media/flag.9f898403.svg\";","export default __webpack_public_path__ + \"static/media/flag.8b3048c6.svg\";","export default __webpack_public_path__ + \"static/media/flag_pop.4947b0a4.svg\";","export default __webpack_public_path__ + \"static/media/flag.80919dec.svg\";","export default __webpack_public_path__ + \"static/media/flag.f5d8ab3c.svg\";","export default __webpack_public_path__ + \"static/media/flag.bb851604.svg\";","export default __webpack_public_path__ + \"static/media/flag.8a31a3ac.svg\";","export default __webpack_public_path__ + \"static/media/flag.85b7f971.svg\";","export default __webpack_public_path__ + \"static/media/flag.6f6e5709.svg\";","export default __webpack_public_path__ + \"static/media/flag.096c0012.svg\";","export default __webpack_public_path__ + \"static/media/flag.dcb60345.svg\";","import Flag_de from \"./de/flag.svg\";\r\nimport Strings_de from \"./de/strings.json\";\r\n\r\nimport Flag_ua from \"./ua/flag.svg\";\r\nimport Strings_ua from \"./ua/strings.json\";\r\n\r\nimport Flag_en from \"./en/flag.svg\";\r\nimport Strings_en from \"./en/strings.json\";\r\n\r\nimport Flag_eo from \"./eo/flag.svg\";\r\nimport Strings_eo from \"./eo/strings.json\";\r\n\r\nimport Flag_es from \"./es/flag.svg\";\r\nimport Strings_es from \"./es/strings.json\";\r\n\r\nimport Flag_et from \"./et/flag.svg\";\r\nimport Flag_et_pop from \"./et/flag_pop.svg\";\r\nimport Strings_et from \"./et/strings.json\";\r\n\r\nimport Flag_fr from \"./fr/flag.svg\";\r\nimport Strings_fr from \"./fr/strings.json\";\r\n\r\nimport Flag_it from \"./it/flag.svg\";\r\nimport Strings_it from \"./it/strings.json\";\r\n\r\nimport Flag_lt from \"./lt/flag.svg\";\r\nimport Strings_lt from \"./lt/strings.json\";\r\n\r\nimport Flag_pt from \"./pt/flag.svg\";\r\nimport Strings_pt from \"./pt/strings.json\";\r\n\r\nimport Flag_ru from \"./ru/flag.svg\";\r\nimport Strings_ru from \"./ru/strings.json\";\r\n\r\nimport Flag_zh_Hans from \"./zh-Hans/flag.svg\";\r\nimport Strings_zh_Hans from \"./zh-Hans/strings.json\";\r\n\r\nimport Flag_zh_Hant from \"./zh-Hant/flag.svg\";\r\nimport Strings_zh_Hant from \"./zh-Hant/strings.json\";\r\n\r\nimport Flag_pl from \"./pl/flag.svg\";\r\nimport Strings_pl from \"./pl/strings.json\";\r\n\r\nconst Locale = {\r\n  en: { strings: Strings_en, flag: Flag_en },\r\n  ua: { strings: Strings_ua, flag: Flag_ua },\r\n  et: { strings: Strings_et, flag: Flag_et, flag_special: Flag_et_pop },\r\n  lt: { strings: Strings_lt, flag: Flag_lt },\r\n  ru: { strings: Strings_ru, flag: Flag_ru },\r\n  de: { strings: Strings_de, flag: Flag_de },\r\n  pl: { strings: Strings_pl, flag: Flag_pl },\r\n  fr: { strings: Strings_fr, flag: Flag_fr },\r\n  it: { strings: Strings_it, flag: Flag_it },\r\n  pt: { strings: Strings_pt, flag: Flag_pt },\r\n  es: { strings: Strings_es, flag: Flag_es },\r\n  \"zh-Hans\": { strings: Strings_zh_Hans, flag: Flag_zh_Hans },\r\n  \"zh-Hant\": { strings: Strings_zh_Hant, flag: Flag_zh_Hant },\r\n  eo: { strings: Strings_eo, flag: Flag_eo },\r\n};\r\n\r\nexport default Locale;\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport Locale from \"../locale/locale\";\r\n\r\nimport \"./languages.css\";\r\n\r\nclass Languages extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"languages\">\r\n        {Object.keys(Locale).map((language) => (\r\n          <div className=\"language\" key={language}>\r\n            {language === \"et\" ? (\r\n              <React.Fragment>\r\n                <Link to={`/${language}`}>\r\n                  <img src={Locale[language].flag} alt={language} className={`flag flag_${language}`} />\r\n                  <img key=\"et_pop\" src={Locale[language].flag_special} alt=\"et_pop\" className={\"flag flag_et_pop\"} />\r\n                </Link>\r\n              </React.Fragment>\r\n            ) : (\r\n              <Link to={`/${language === \"en\" ? \"\" : language}`}>\r\n                <img src={Locale[language].flag} alt={language} className={`flag flag_${language}`} />\r\n              </Link>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Languages;\r\n","class CookieManager {\r\n  static init() {\r\n    // Handle cookie migration\r\n    const cookieNames = [\"presets\", \"mcversion\", \"customBlocks\"];\r\n    cookieNames.forEach(name => {\r\n      if (this.getCookie(`mapartcraft_${name}`) === null && this.getCookie(name) !== null) {\r\n        this.setCookie(`mapartcraft_${name}`, this.getCookie(name));\r\n      }\r\n    });\r\n  }\r\n\r\n  //Thx\r\n  //https://www.w3schools.com/js/js_cookies.asp\r\n  static setCookie(cname, cvalue) {\r\n    let d = new Date();\r\n    d.setTime(d.getTime() + 9000 * 24 * 60 * 60 * 1000);\r\n    let expires = \"expires=\" + d.toUTCString();\r\n    document.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\";\r\n  }\r\n\r\n  static getCookie(cname) {\r\n    let name = cname + \"=\";\r\n    let ca = document.cookie.split(\";\");\r\n    for (let i = 0; i < ca.length; i++) {\r\n      let c = ca[i];\r\n      while (c.charAt(0) === \" \") {\r\n        c = c.substring(1);\r\n      }\r\n      if (c.indexOf(name) === 0) {\r\n        return c.substring(name.length, c.length);\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  static touchCookie(cname, defaultValue) {\r\n    const cookieValue = this.getCookie(cname);\r\n    if (cookieValue !== null) {\r\n      return cookieValue;\r\n    } else {\r\n      this.setCookie(cname, defaultValue);\r\n      return defaultValue;\r\n    }\r\n  }\r\n}\r\n\r\nexport default CookieManager;\r\n","import React, { Component } from \"react\";\r\n\r\nimport \"./tooltip.css\";\r\n\r\nclass Tooltip extends Component {\r\n  state = {\r\n    hovering: false,\r\n  };\r\n\r\n  handleMouseOver = () => {\r\n    this.setState({ hovering: true });\r\n  };\r\n\r\n  handleMouseOut = () => {\r\n    this.setState({ hovering: false });\r\n  };\r\n\r\n  render() {\r\n    const tooltipStyle = this.props.textStyleOverrides !== undefined\r\n      ? {\r\n          display: this.state.hovering ? \"unset\" : \"none\",\r\n          ...this.props.textStyleOverrides,\r\n        }\r\n      : { display: this.state.hovering ? \"unset\" : \"none\" };\r\n    return (\r\n      <div className=\"tooltipContainer\">\r\n        <div onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\r\n          {this.props.children}\r\n        </div>\r\n        <p className=\"tooltipText\" style={tooltipStyle}>\r\n          {this.props.tooltipText}\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Tooltip;\r\n","import React, { Component } from \"react\";\r\n\r\nimport SupportedVersions from \"../json/supportedVersions.json\";\r\n\r\nimport \"./blockSelectionAddCustom.css\";\r\n\r\nclass BlockSelectionAddCustom extends Component {\r\n  state = {\r\n    block_name: \"\",\r\n    block_nbtTags: [[\"\", \"\"]],\r\n    block_colourSetId: null,\r\n    block_needsSupport: false,\r\n    block_flammable: false,\r\n    block_versions: {},\r\n  };\r\n\r\n  E_KeyOrValue = {\r\n    key: 0,\r\n    value: 1,\r\n  };\r\n\r\n  examplesGroups = [\r\n    {\r\n      title: \"Stairs\",\r\n      blocks: [\r\n        {\r\n          blockName: \"birch_stairs\",\r\n          nbtTags: {\r\n            facing: \"north|east|south|west\",\r\n            half: \"top|bottom\",\r\n          },\r\n          versions: [\"1_12_2\", \"1_13_2\", \"1_14_4\", \"1_15_2\", \"1_16_5\", \"1_17_1\"],\r\n        },\r\n      ],\r\n    },\r\n    {\r\n      title: \"Slabs\",\r\n      blocks: [\r\n        {\r\n          blockName: \"stone_slab\",\r\n          nbtTags: {\r\n            variant: \"cobblestone\",\r\n            half: \"top|bottom\",\r\n          },\r\n          versions: [\"1_12_2\"],\r\n        },\r\n        {\r\n          blockName: \"cobblestone_slab\",\r\n          nbtTags: {\r\n            type: \"top|bottom\",\r\n          },\r\n          versions: [\"1_13_2\", \"1_14_4\", \"1_15_2\", \"1_16_5\", \"1_17_1\"],\r\n        },\r\n      ],\r\n    },\r\n    {\r\n      title: \"'Alpha slabs'\",\r\n      blocks: [\r\n        {\r\n          blockName: \"stone_slab\",\r\n          nbtTags: {\r\n            variant: \"wood_old\",\r\n            half: \"top|bottom\",\r\n          },\r\n          versions: [\"1_12_2\"],\r\n        },\r\n        {\r\n          blockName: \"petrified_oak_slab\",\r\n          nbtTags: {\r\n            type: \"top|bottom\",\r\n          },\r\n          versions: [\"1_13_2\", \"1_14_4\", \"1_15_2\", \"1_16_5\", \"1_17_1\"],\r\n        },\r\n      ],\r\n    },\r\n  ];\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    const { coloursJSON } = props;\r\n    this.state.block_colourSetId = Object.keys(coloursJSON)[0];\r\n    for (const supportedVersion_key of Object.keys(SupportedVersions)) {\r\n      this.state.block_versions[supportedVersion_key] = false;\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { lastSelectedCustomBlock } = this.props;\r\n    if (prevProps.lastSelectedCustomBlock !== lastSelectedCustomBlock) {\r\n      this.loadBlockIntoForm(lastSelectedCustomBlock.colourSetId, lastSelectedCustomBlock.blockId);\r\n    }\r\n  }\r\n\r\n  loadBlockIntoForm(colourSetId, blockId) {\r\n    const { coloursJSON } = this.props;\r\n    const blockToLoad = coloursJSON[colourSetId].blocks[blockId];\r\n    let blockToLoad_nbtTags = [];\r\n    const versionToLoad_nbtData = Object.values(blockToLoad.validVersions).find((version) => typeof version !== \"string\");\r\n    for (const [nbtTag_key, nbtTag_value] of Object.entries(versionToLoad_nbtData.NBTArgs)) {\r\n      blockToLoad_nbtTags.push([nbtTag_key, nbtTag_value]);\r\n    }\r\n    blockToLoad_nbtTags.push([\"\", \"\"]);\r\n    const blockToLoad_versions = {};\r\n    for (const [supportedVersion_key, supportedVersion_value] of Object.entries(SupportedVersions)) {\r\n      if (supportedVersion_value.MCVersion in blockToLoad.validVersions) {\r\n        blockToLoad_versions[supportedVersion_key] = true;\r\n      } else {\r\n        blockToLoad_versions[supportedVersion_key] = false;\r\n      }\r\n    }\r\n    this.setState({\r\n      block_name: versionToLoad_nbtData.NBTName,\r\n      block_nbtTags: blockToLoad_nbtTags,\r\n      block_colourSetId: colourSetId,\r\n      block_needsSupport: blockToLoad.supportBlockMandatory,\r\n      block_flammable: blockToLoad.flammable,\r\n      block_versions: blockToLoad_versions,\r\n    });\r\n  }\r\n\r\n  onSettingChange_block_name = (e) => {\r\n    this.setState({ block_name: e.target.value });\r\n  };\r\n\r\n  onSettingChange_block_nbtTags = (e, tagIndex, keyOrValue) => {\r\n    const { block_nbtTags } = this.state;\r\n    let block_nbtTags_new = [...block_nbtTags];\r\n    block_nbtTags_new[tagIndex][keyOrValue] = e.target.value;\r\n    if (\r\n      tagIndex === block_nbtTags_new.length - 2 &&\r\n      block_nbtTags_new[block_nbtTags_new.length - 2].every((t) => t === \"\") &&\r\n      block_nbtTags_new[block_nbtTags_new.length - 1].every((t) => t === \"\")\r\n    ) {\r\n      // remove last tags inputs if they are empty and we have just made the penultimate tag inputs empty\r\n      block_nbtTags_new.pop();\r\n    } else if (tagIndex === block_nbtTags_new.length - 1) {\r\n      // always keep a blank set of inputs at the end for further tags\r\n      block_nbtTags_new.push([\"\", \"\"]);\r\n    }\r\n    this.setState({ block_nbtTags: block_nbtTags_new });\r\n  };\r\n\r\n  onSettingChange_block_colourSetId = (e) => {\r\n    this.setState({ block_colourSetId: e.target.value });\r\n  };\r\n\r\n  onSettingChange_block_needsSupport = () => {\r\n    this.setState((currentState) => {\r\n      return {\r\n        block_needsSupport: !currentState.block_needsSupport,\r\n      };\r\n    });\r\n  };\r\n\r\n  onSettingChange_block_flammable = () => {\r\n    this.setState((currentState) => {\r\n      return {\r\n        block_flammable: !currentState.block_flammable,\r\n      };\r\n    });\r\n  };\r\n\r\n  onSettingChange_block_versions = (versionToToggle) => {\r\n    let block_versions_new = { ...this.state.block_versions };\r\n    block_versions_new[versionToToggle] = !block_versions_new[versionToToggle];\r\n    this.setState({ block_versions: block_versions_new });\r\n  };\r\n\r\n  render() {\r\n    const { getLocaleString, coloursJSON, onAddCustomBlock, onDeleteCustomBlock } = this.props;\r\n    const { block_name, block_nbtTags, block_colourSetId, block_needsSupport, block_flammable, block_versions } = this.state;\r\n    const examples = (\r\n      <details open={false}>\r\n        <summary>{getLocaleString(\"BLOCK-SELECTION/ADD-CUSTOM/EXAMPLES\")}</summary>\r\n        {this.examplesGroups.map((examplesGroup) => (\r\n          <div key={examplesGroup.title}>\r\n            <b>{examplesGroup.title}</b>\r\n            {examplesGroup.blocks.map((block) => (\r\n              <div\r\n                key={block.blockName}\r\n                style={{\r\n                  outline: \"0.1em solid white\",\r\n                  padding: \"0.2em\",\r\n                  marginBlockStart: \"0.2em\",\r\n                  marginBlockEnd: \"0.2em\",\r\n                }}\r\n              >\r\n                <table>\r\n                  <tbody>\r\n                    <tr>\r\n                      <th>\r\n                        <b>\r\n                          {getLocaleString(\"BLOCK-SELECTION/ADD-CUSTOM/BLOCK-NAME\")}\r\n                          {\":\"}\r\n                        </b>{\" \"}\r\n                      </th>\r\n                      <td style={{ textAlign: \"right\" }}>\r\n                        {\"minecraft:\"}\r\n                        <input type=\"text\" value={block.blockName} disabled={true} />\r\n                      </td>\r\n                    </tr>\r\n                    <tr>\r\n                      <th>\r\n                        <b>\r\n                          {getLocaleString(\"BLOCK-SELECTION/ADD-CUSTOM/NBT-TAGS\")}\r\n                          {\":\"}\r\n                        </b>{\" \"}\r\n                      </th>\r\n                      <td style={{ textAlign: \"right\" }}>\r\n                        {Object.entries(block.nbtTags).map(([tagKey, tagValue]) => (\r\n                          <div key={tagKey}>\r\n                            <input type=\"text\" value={tagKey} disabled={true} />\r\n                            {\":\"}\r\n                            <input type=\"text\" value={tagValue} disabled={true} />\r\n                            <br />\r\n                          </div>\r\n                        ))}\r\n                      </td>\r\n                    </tr>\r\n                    <tr>\r\n                      <th>\r\n                        <b>\r\n                          {getLocaleString(\"BLOCK-SELECTION/ADD-CUSTOM/VERSIONS\")}\r\n                          {\":\"}\r\n                        </b>{\" \"}\r\n                      </th>\r\n                      <td>\r\n                        {Object.entries(SupportedVersions).map(([supportedVersion_key, supportedVersion_value]) => (\r\n                          <React.Fragment key={supportedVersion_key}>\r\n                            <input type=\"checkbox\" checked={block.versions.includes(supportedVersion_key)} disabled={true} />\r\n                            {supportedVersion_value.MCVersion}{\" \"}\r\n                          </React.Fragment>\r\n                        ))}\r\n                      </td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            ))}\r\n            <br />\r\n          </div>\r\n        ))}\r\n      </details>\r\n    );\r\n    const setting_customBlock_name = (\r\n      <tr>\r\n        <th>\r\n          <b>\r\n            {getLocaleString(\"BLOCK-SELECTION/ADD-CUSTOM/BLOCK-NAME\")}\r\n            {\":\"}\r\n          </b>{\" \"}\r\n        </th>\r\n        <td style={{ textAlign: \"right\" }}>\r\n          {\"minecraft:\"}\r\n          <input type=\"text\" value={block_name} onChange={this.onSettingChange_block_name} />\r\n        </td>\r\n      </tr>\r\n    );\r\n    const setting_customBlock_nbtTags = (\r\n      <tr>\r\n        <th>\r\n          <b>\r\n            {getLocaleString(\"BLOCK-SELECTION/ADD-CUSTOM/NBT-TAGS\")}\r\n            {\":\"}\r\n          </b>{\" \"}\r\n        </th>\r\n        <td style={{ textAlign: \"right\" }}>\r\n          {block_nbtTags.map(([tagKey, tagValue], tagIndex) => (\r\n            <div key={tagIndex}>\r\n              <input type=\"text\" value={tagKey} onChange={(e) => this.onSettingChange_block_nbtTags(e, tagIndex, this.E_KeyOrValue.key)} />\r\n              {\":\"}\r\n              <input type=\"text\" value={tagValue} onChange={(e) => this.onSettingChange_block_nbtTags(e, tagIndex, this.E_KeyOrValue.value)} />\r\n              <br />\r\n            </div>\r\n          ))}\r\n        </td>\r\n      </tr>\r\n    );\r\n    const setting_customBlock_colourSetId = (\r\n      <tr>\r\n        <th>\r\n          <b>\r\n            {getLocaleString(\"BLOCK-SELECTION/ADD-CUSTOM/COLOUR-SET\")}\r\n            {\":\"}\r\n          </b>{\" \"}\r\n        </th>\r\n        <td>\r\n          <select\r\n            value={block_colourSetId}\r\n            onChange={this.onSettingChange_block_colourSetId}\r\n            style={{\r\n              backgroundColor: `rgb(${coloursJSON[block_colourSetId].tonesRGB.normal.join(\", \")})`,\r\n              color:\r\n                coloursJSON[block_colourSetId].tonesRGB.normal[0] * 0.299 +\r\n                  coloursJSON[block_colourSetId].tonesRGB.normal[1] * 0.587 +\r\n                  coloursJSON[block_colourSetId].tonesRGB.normal[2] * 0.114 >\r\n                186\r\n                  ? \"black\"\r\n                  : \"white\",\r\n            }}\r\n          >\r\n            {Object.entries(coloursJSON).map(([colourSetId, colourSet]) => (\r\n              <option\r\n                key={colourSetId}\r\n                value={colourSetId}\r\n                style={{\r\n                  backgroundColor: `rgb(${colourSet.tonesRGB.normal.join(\", \")})`,\r\n                  color:\r\n                    colourSet.tonesRGB.normal[0] * 0.299 + colourSet.tonesRGB.normal[1] * 0.587 + colourSet.tonesRGB.normal[2] * 0.114 > 186\r\n                      ? \"black\"\r\n                      : \"white\",\r\n                }}\r\n              >\r\n                {colourSet.colourName}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </td>\r\n      </tr>\r\n    );\r\n    const setting_customBlock_needsSupport = (\r\n      <tr>\r\n        <th>\r\n          <b>\r\n            {getLocaleString(\"BLOCK-SELECTION/ADD-CUSTOM/NEEDS-SUPPORT\")}\r\n            {\":\"}\r\n          </b>{\" \"}\r\n        </th>\r\n        <td>\r\n          <input type=\"checkbox\" checked={block_needsSupport} onChange={this.onSettingChange_block_needsSupport} />\r\n        </td>\r\n      </tr>\r\n    );\r\n    const setting_customBlock_flammable = (\r\n      <tr>\r\n        <th>\r\n          <b>\r\n            {getLocaleString(\"BLOCK-SELECTION/ADD-CUSTOM/FLAMMABLE\")}\r\n            {\":\"}\r\n          </b>{\" \"}\r\n        </th>\r\n        <td>\r\n          <input type=\"checkbox\" checked={block_flammable} onChange={this.onSettingChange_block_flammable} />\r\n        </td>\r\n      </tr>\r\n    );\r\n    const setting_customBlock_versions = (\r\n      <tr>\r\n        <th>\r\n          <b>\r\n            {getLocaleString(\"BLOCK-SELECTION/ADD-CUSTOM/VERSIONS\")}\r\n            {\":\"}\r\n          </b>{\" \"}\r\n        </th>\r\n        <td>\r\n          {Object.entries(block_versions).map(([block_version, block_version_checked]) => (\r\n            <React.Fragment key={block_version}>\r\n              <input type=\"checkbox\" checked={block_version_checked} onChange={() => this.onSettingChange_block_versions(block_version)} />\r\n              {SupportedVersions[block_version].MCVersion}{\" \"}\r\n            </React.Fragment>\r\n          ))}\r\n        </td>\r\n      </tr>\r\n    );\r\n    const customBlock_submit = (\r\n      <tr>\r\n        <th colSpan=\"2\">\r\n          <button\r\n            style={{ width: \"100%\" }}\r\n            onClick={() => onAddCustomBlock(block_colourSetId, block_name, block_nbtTags, block_versions, block_needsSupport, block_flammable)}\r\n          >\r\n            {getLocaleString(\"BLOCK-SELECTION/ADD-CUSTOM/ADD\")}\r\n          </button>\r\n        </th>\r\n      </tr>\r\n    );\r\n    const customBlock_delete = (\r\n      <tr>\r\n        <th colSpan=\"2\">\r\n          <button style={{ width: \"100%\" }} onClick={() => onDeleteCustomBlock(block_colourSetId, block_name, block_versions)}>\r\n            {getLocaleString(\"BLOCK-SELECTION/ADD-CUSTOM/DELETE\")}\r\n          </button>\r\n        </th>\r\n      </tr>\r\n    );\r\n    return (\r\n      <details className=\"blockSelectionAddCustom\" open={false}>\r\n        <summary>{getLocaleString(\"BLOCK-SELECTION/ADD-CUSTOM/TITLE\")}</summary>\r\n        {examples}\r\n        <table>\r\n          <tbody>\r\n            {setting_customBlock_name}\r\n            {setting_customBlock_nbtTags}\r\n            {setting_customBlock_colourSetId}\r\n            {setting_customBlock_needsSupport}\r\n            {setting_customBlock_flammable}\r\n            {setting_customBlock_versions}\r\n            {customBlock_submit}\r\n            {customBlock_delete}\r\n          </tbody>\r\n        </table>\r\n      </details>\r\n    );\r\n  }\r\n}\r\n\r\nexport default BlockSelectionAddCustom;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAySURBVFhH7c6hAQAwDMOwbP//nJH9UFCZmOq0zWT3fywAAAAAAAAAAAAAAAAAgO2A5AFAtAM9NfYR6AAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/textures.1fb60425.png\";","import React, { Component } from \"react\";\r\n\r\nimport IMG_Null from \"../../images/null.png\";\r\nimport IMG_Textures from \"../../images/textures.png\";\r\n\r\nimport \"./blockImage.css\";\r\n\r\nclass BlockImage extends Component {\r\n  render() {\r\n    const { getLocaleString, coloursJSON, colourSetId, blockId, style, className, ...props_others } = this.props;\r\n    const isNone = blockId === \"-1\"; // if barrier / no block selected for colourSetId\r\n    const isUnknown = colourSetId === \"64\" && blockId === \"2\"; // if unknown / placeholder block\r\n    return (\r\n      <img\r\n        src={IMG_Null}\r\n        alt={\r\n          isNone\r\n            ? getLocaleString(\"NONE\")\r\n            : isUnknown\r\n            ? getLocaleString(\"MATERIALS/PLACEHOLDER-BLOCK-TT\")\r\n            : coloursJSON[colourSetId].blocks[blockId].displayName\r\n        }\r\n        style={\r\n          isNone\r\n            ? {\r\n                backgroundImage: `url(${IMG_Textures})`,\r\n                backgroundPositionX: \"-100%\",\r\n                backgroundPositionY: \"-6400%\",\r\n                ...style,\r\n              }\r\n            : isUnknown\r\n            ? {\r\n                backgroundImage: `url(${IMG_Textures})`,\r\n                backgroundPositionX: \"-200%\",\r\n                backgroundPositionY: \"-6400%\",\r\n                ...style,\r\n              }\r\n            : coloursJSON[colourSetId].blocks[blockId].presetIndex === \"CUSTOM\"\r\n            ? {\r\n                backgroundImage: `url(${IMG_Textures})`,\r\n                backgroundPositionX: \"-500%\",\r\n                backgroundPositionY: \"-6400%\",\r\n                backgroundColor: `rgb(${coloursJSON[colourSetId].tonesRGB.normal.join(\", \")})`,\r\n                ...style,\r\n              }\r\n            : {\r\n                backgroundImage: `url(${IMG_Textures})`,\r\n                backgroundPositionX: `-${blockId}00%`,\r\n                backgroundPositionY: `-${colourSetId}00%`,\r\n                ...style,\r\n              }\r\n        }\r\n        className={`blockImage ${className}`}\r\n        {...props_others}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default BlockImage;\r\n","import React, { Component } from \"react\";\r\n\r\nimport Tooltip from \"../tooltip\";\r\nimport BlockSelectionAddCustom from \"./blockSelectionAddCustom/blockSelectionAddCustom\";\r\nimport BlockImage from \"./blockImage\";\r\n\r\nimport MapModes from \"./json/mapModes.json\";\r\nimport SupportedVersions from \"./json/supportedVersions.json\";\r\n\r\nimport \"./blockSelection.css\";\r\n\r\nclass BlockSelection extends Component {\r\n  state = {\r\n    lastSelectedCustomBlock: null, // {colourSetId, blockId}\r\n  };\r\n\r\n  cssRGB(RGBArray) {\r\n    // RGB array to css compatible string\r\n    return `rgb(${RGBArray.join(\", \")})`;\r\n  }\r\n\r\n  getColourSetBox = (colourSet) => {\r\n    const { optionValue_staircasing } = this.props;\r\n    let background;\r\n    switch (optionValue_staircasing) {\r\n      case MapModes.SCHEMATIC_NBT.staircaseModes.OFF.uniqueId:\r\n      case MapModes.MAPDAT.staircaseModes.OFF.uniqueId: {\r\n        background = this.cssRGB(colourSet.tonesRGB.normal);\r\n        break;\r\n      }\r\n      case MapModes.SCHEMATIC_NBT.staircaseModes.CLASSIC.uniqueId:\r\n      case MapModes.SCHEMATIC_NBT.staircaseModes.VALLEY.uniqueId:\r\n      case MapModes.MAPDAT.staircaseModes.ON.uniqueId: {\r\n        background = `linear-gradient(${this.cssRGB(colourSet.tonesRGB.dark)} 33%, ${this.cssRGB(colourSet.tonesRGB.normal)} 33%, ${this.cssRGB(\r\n          colourSet.tonesRGB.normal\r\n        )} 66%, ${this.cssRGB(colourSet.tonesRGB.light)} 66%)`;\r\n        break;\r\n      }\r\n      case MapModes.MAPDAT.staircaseModes.ON_UNOBTAINABLE.uniqueId: {\r\n        background = `linear-gradient(${this.cssRGB(colourSet.tonesRGB.unobtainable)} 25%, ${this.cssRGB(colourSet.tonesRGB.dark)} 25%, ${this.cssRGB(\r\n          colourSet.tonesRGB.dark\r\n        )} 50%, ${this.cssRGB(colourSet.tonesRGB.normal)} 50%, ${this.cssRGB(colourSet.tonesRGB.normal)} 75%, ${this.cssRGB(colourSet.tonesRGB.light)} 75%)`;\r\n        break;\r\n      }\r\n      case MapModes.SCHEMATIC_NBT.staircaseModes.FULL_DARK.uniqueId:\r\n      case MapModes.MAPDAT.staircaseModes.FULL_DARK.uniqueId: {\r\n        background = this.cssRGB(colourSet.tonesRGB.dark);\r\n        break;\r\n      }\r\n      case MapModes.SCHEMATIC_NBT.staircaseModes.FULL_LIGHT.uniqueId:\r\n      case MapModes.MAPDAT.staircaseModes.FULL_LIGHT.uniqueId: {\r\n        background = this.cssRGB(colourSet.tonesRGB.light);\r\n        break;\r\n      }\r\n      case MapModes.MAPDAT.staircaseModes.FULL_UNOBTAINABLE.uniqueId: {\r\n        background = this.cssRGB(colourSet.tonesRGB.unobtainable);\r\n        break;\r\n      }\r\n      default: {\r\n        throw new Error(\"Unknown staircasing value\");\r\n      }\r\n    }\r\n    return (\r\n      <div\r\n        className=\"colourSetBox\"\r\n        style={{\r\n          background: background,\r\n        }}\r\n      />\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      coloursJSON,\r\n      getLocaleString,\r\n      onChangeColourSetBlock,\r\n      optionValue_version,\r\n      selectedBlocks,\r\n      presets,\r\n      selectedPresetName,\r\n      canDeletePreset,\r\n      onPresetChange,\r\n      onDeletePreset,\r\n      onSavePreset,\r\n      onSharePreset,\r\n      onGetPDNPaletteClicked,\r\n      handleAddCustomBlock,\r\n      handleDeleteCustomBlock,\r\n    } = this.props;\r\n    const { lastSelectedCustomBlock } = this.state;\r\n    const presetsManagement = (\r\n      <React.Fragment>\r\n        <h2 id=\"blockselectiontitle\">{getLocaleString(\"BLOCK-SELECTION/TITLE\")}</h2>\r\n        <b>\r\n          {getLocaleString(\"BLOCK-SELECTION/PRESETS/TITLE\")}\r\n          {\":\"}\r\n        </b>{\" \"}\r\n        <select id=\"presets\" value={selectedPresetName} onChange={onPresetChange}>\r\n          <option value=\"None\">{getLocaleString(\"BLOCK-SELECTION/PRESETS/NONE\")}</option>\r\n          {presets.map((preset) => (\r\n            <option value={preset.name} key={preset.name}>\r\n              {\"localeKey\" in preset ? getLocaleString(preset.localeKey) : preset.name}\r\n            </option>\r\n          ))}\r\n        </select>\r\n        <button type=\"button\" disabled={!canDeletePreset()} onClick={onDeletePreset}>\r\n          {getLocaleString(\"BLOCK-SELECTION/PRESETS/DELETE\")}\r\n        </button>\r\n        <button type=\"button\" onClick={onSavePreset}>\r\n          {getLocaleString(\"BLOCK-SELECTION/PRESETS/SAVE\")}\r\n        </button>\r\n        <Tooltip tooltipText={getLocaleString(\"BLOCK-SELECTION/PRESETS/SHARE-TT\")}>\r\n          <button type=\"button\" onClick={onSharePreset}>\r\n            {getLocaleString(\"BLOCK-SELECTION/PRESETS/SHARE\")}\r\n          </button>\r\n        </Tooltip>\r\n        <Tooltip tooltipText={getLocaleString(\"BLOCK-SELECTION/PRESETS/DOWNLOAD-TT\")}>\r\n          <button type=\"button\" onClick={onGetPDNPaletteClicked}>\r\n            {getLocaleString(\"BLOCK-SELECTION/PRESETS/DOWNLOAD\")}\r\n          </button>\r\n        </Tooltip>\r\n      </React.Fragment>\r\n    );\r\n    const blockSelection = (\r\n      <React.Fragment>\r\n        {Object.entries(coloursJSON)\r\n          .filter(([, colourSet]) => Object.values(colourSet.blocks).some((block) => Object.keys(block.validVersions).includes(optionValue_version.MCVersion)))\r\n          .map(([colourSetId, colourSet]) => (\r\n            <div key={colourSetId} className=\"colourSet\">\r\n              {this.getColourSetBox(colourSet)}\r\n              <label>\r\n                <Tooltip tooltipText={getLocaleString(\"NONE\")}>\r\n                  <BlockImage\r\n                    getLocaleString={getLocaleString}\r\n                    coloursJSON={coloursJSON}\r\n                    colourSetId={colourSetId}\r\n                    blockId={\"-1\"}\r\n                    onClick={() => onChangeColourSetBlock(colourSetId, \"-1\")}\r\n                    style={{\r\n                      cursor: \"pointer\",\r\n                      ...(selectedBlocks[colourSetId] === \"-1\" && {\r\n                        filter: \"drop-shadow(0 0 4px #658968)\",\r\n                        backgroundColor: \"#658968\",\r\n                      }),\r\n                    }}\r\n                  />\r\n                </Tooltip>\r\n              </label>\r\n              <div className={\"colourSetBlocks\"}>\r\n                {Object.entries(colourSet.blocks)\r\n                  .filter(([, block]) => Object.keys(block.validVersions).includes(optionValue_version.MCVersion))\r\n                  .map(([blockId, block]) => (\r\n                    <label key={blockId}>\r\n                      <Tooltip tooltipText={block.displayName}>\r\n                        {selectedBlocks[colourSetId] === blockId &&\r\n                          !(Object.values(SupportedVersions)[Object.keys(SupportedVersions).length - 1].MCVersion in block.validVersions) && (\r\n                            // if doesn't support latest version\r\n                            <div\r\n                              style={{\r\n                                position: \"absolute\",\r\n                                paddingLeft: \"28px\",\r\n                                zIndex: 110,\r\n                              }}\r\n                            >\r\n                              <Tooltip\r\n                                tooltipText={`${getLocaleString(\"BLOCK-SELECTION/UNSUPPORTED-PAST\")} ${\r\n                                  Object.keys(block.validVersions)[Object.keys(block.validVersions).length - 1]\r\n                                }`}\r\n                                textStyleOverrides={{\r\n                                  whiteSpace: \"nowrap\",\r\n                                  backgroundColor: \"red\",\r\n                                }}\r\n                              >\r\n                                <h2 style={{ backgroundColor: \"red\", margin: \"0\" }}>{\"!\"}</h2>\r\n                              </Tooltip>\r\n                            </div>\r\n                          )}\r\n                        <BlockImage\r\n                          coloursJSON={coloursJSON}\r\n                          colourSetId={colourSetId}\r\n                          blockId={blockId}\r\n                          onClick={() => {\r\n                            onChangeColourSetBlock(colourSetId, blockId);\r\n                            if (block.presetIndex === \"CUSTOM\") {\r\n                              this.setState({ lastSelectedCustomBlock: { colourSetId, blockId } });\r\n                            }\r\n                          }}\r\n                          style={{\r\n                            cursor: \"pointer\",\r\n                            ...(selectedBlocks[colourSetId] === blockId && {\r\n                              filter: \"drop-shadow(0 0 4px #658968)\",\r\n                              ...(block.presetIndex !== \"CUSTOM\" && {\r\n                                backgroundColor: \"#658968\",\r\n                              }),\r\n                            }),\r\n                          }}\r\n                        />\r\n                      </Tooltip>\r\n                    </label>\r\n                  ))}\r\n              </div>\r\n            </div>\r\n          ))}\r\n      </React.Fragment>\r\n    );\r\n    return (\r\n      <div className=\"section blockSelectionDiv\">\r\n        {presetsManagement}\r\n        {blockSelection}\r\n        <BlockSelectionAddCustom\r\n          getLocaleString={getLocaleString}\r\n          coloursJSON={coloursJSON}\r\n          onAddCustomBlock={handleAddCustomBlock}\r\n          onDeleteCustomBlock={handleDeleteCustomBlock}\r\n          lastSelectedCustomBlock={lastSelectedCustomBlock}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default BlockSelection;\r\n","export default __webpack_public_path__ + \"static/media/nbt.d393b228.jsworker\";","import React, { Component } from \"react\";\r\nimport { gzip } from \"pako\"; // blocks when zipping\r\nimport JSZip from \"jszip\";\r\n\r\nimport Tooltip from \"../tooltip\";\r\n\r\nimport MapModes from \"./json/mapModes.json\";\r\nimport WhereSupportBlocksModes from \"./json/whereSupportBlocksModes.json\";\r\n\r\nimport NBTWorker from \"./workers/nbt.jsworker\";\r\n\r\nimport \"./greenButtons.css\";\r\n\r\nclass GreenButtons extends Component {\r\n  // For download buttons and donate link etc\r\n  state = {\r\n    buttonWidth_viewOnline: 1,\r\n    buttonWidth_NBT_Joined: 1,\r\n    buttonWidth_NBT_Split: 1,\r\n    buttonWidth_Mapdat_Split: 1,\r\n    mapPreviewWorker_onFinishCallback: null,\r\n  };\r\n\r\n  nbtWorker = new Worker(NBTWorker);\r\n\r\n  resetButtonWidths() {\r\n    this.setState({\r\n      buttonWidth_viewOnline: 1,\r\n      buttonWidth_NBT_Joined: 1,\r\n      buttonWidth_NBT_Split: 1,\r\n      buttonWidth_Mapdat_Split: 1,\r\n    });\r\n  }\r\n\r\n  getNBT_base = (workerHeader) => {\r\n    const {\r\n      getLocaleString,\r\n      coloursJSON,\r\n      optionValue_version,\r\n      optionValue_mapSize_x,\r\n      optionValue_mapSize_y,\r\n      optionValue_staircasing,\r\n      optionValue_whereSupportBlocks,\r\n      optionValue_supportBlock,\r\n      optionValue_mapdatFilenameUseId,\r\n      optionValue_mapdatFilenameIdStart,\r\n      uploadedImage_baseFilename,\r\n      currentMaterialsData,\r\n      mapPreviewWorker_inProgress,\r\n      downloadBlobFile,\r\n      onGetViewOnlineNBT,\r\n    } = this.props;\r\n    if (mapPreviewWorker_inProgress) {\r\n      this.setState({ mapPreviewWorker_onFinishCallback: () => this.getNBT_base(workerHeader) });\r\n      return;\r\n    }\r\n    if (Object.entries(currentMaterialsData.currentSelectedBlocks).every((elt) => elt[1] === \"-1\")) {\r\n      alert(getLocaleString(\"DOWNLOAD/ERROR-NONE-SELECTED\"));\r\n      return;\r\n    }\r\n    this.nbtWorker.terminate();\r\n    this.resetButtonWidths();\r\n    let numberOfSplitsCalculated = 0;\r\n    let zipFile = new JSZip();\r\n    const t0 = performance.now();\r\n    this.nbtWorker = new Worker(NBTWorker);\r\n    this.nbtWorker.onmessage = (e) => {\r\n      switch (e.data.head) {\r\n        case \"PROGRESS_REPORT_CREATE_NBT_JOINED_FOR_VIEW_ONLINE\": {\r\n          this.setState({ buttonWidth_viewOnline: e.data.body });\r\n          break;\r\n        }\r\n        case \"PROGRESS_REPORT_CREATE_NBT_JOINED\": {\r\n          this.setState({ buttonWidth_NBT_Joined: e.data.body });\r\n          break;\r\n        }\r\n        case \"PROGRESS_REPORT_CREATE_NBT_SPLIT\": {\r\n          this.setState({ buttonWidth_NBT_Split: (numberOfSplitsCalculated + e.data.body) / (optionValue_mapSize_x * optionValue_mapSize_y) });\r\n          break;\r\n        }\r\n        case \"PROGRESS_REPORT_CREATE_MAPDAT_SPLIT\": {\r\n          this.setState({ buttonWidth_Mapdat_Split: (numberOfSplitsCalculated + e.data.body) / (optionValue_mapSize_x * optionValue_mapSize_y) });\r\n          break;\r\n        }\r\n        case \"NBT_FOR_VIEW_ONLINE\": {\r\n          const t1 = performance.now();\r\n          console.log(`Created NBT for 'view online' by ${(t1 - t0).toString()}ms`);\r\n          const { NBT_Array } = e.data.body;\r\n          onGetViewOnlineNBT(NBT_Array);\r\n          break;\r\n        }\r\n        case \"NBT_ARRAY\": {\r\n          const t1 = performance.now();\r\n          console.log(`Created NBT by ${(t1 - t0).toString()}ms`);\r\n          numberOfSplitsCalculated++;\r\n          const { NBT_Array, whichMap_x, whichMap_y } = e.data.body;\r\n          const NBT_Array_gzipped = gzip(NBT_Array);\r\n          if (workerHeader === \"CREATE_NBT_SPLIT\") {\r\n            zipFile.file(`${uploadedImage_baseFilename}_${whichMap_x}_${whichMap_y}.nbt`, NBT_Array_gzipped);\r\n            if (numberOfSplitsCalculated === optionValue_mapSize_x * optionValue_mapSize_y) {\r\n              zipFile.generateAsync({ type: \"blob\" }).then((content) => {\r\n                downloadBlobFile(content, `${uploadedImage_baseFilename}.zip`);\r\n              });\r\n            }\r\n          } else {\r\n            const downloadBlob = new Blob([NBT_Array_gzipped], { type: \"application/x-minecraft-level\" });\r\n            downloadBlobFile(downloadBlob, `${uploadedImage_baseFilename}.nbt`);\r\n          }\r\n          break;\r\n        }\r\n        case \"MAPDAT_BYTES\": {\r\n          const t1 = performance.now();\r\n          console.log(`Created Mapdat by ${(t1 - t0).toString()}ms`);\r\n          numberOfSplitsCalculated++;\r\n          const { Mapdat_Bytes, whichMap_x, whichMap_y } = e.data.body;\r\n          const Mapdat_Bytes_gzipped = gzip(Mapdat_Bytes);\r\n          const downloadBlob = new Blob([Mapdat_Bytes_gzipped], { type: \"application/x-minecraft-level\" });\r\n          downloadBlobFile(downloadBlob, optionValue_mapdatFilenameUseId\r\n            ? `map_${(optionValue_mapdatFilenameIdStart + whichMap_y * optionValue_mapSize_x + whichMap_x).toString()}.dat`\r\n            : `${uploadedImage_baseFilename}_${whichMap_x.toString()}_${whichMap_y.toString()}.dat`);\r\n          break;\r\n        }\r\n        case \"MAPDAT_BYTES_ZIP\": {\r\n          const t1 = performance.now();\r\n          console.log(`Created Mapdat by ${(t1 - t0).toString()}ms`);\r\n          numberOfSplitsCalculated++;\r\n          const { Mapdat_Bytes, whichMap_x, whichMap_y } = e.data.body;\r\n          const Mapdat_Bytes_gzipped = gzip(Mapdat_Bytes);\r\n          zipFile.file(\r\n            optionValue_mapdatFilenameUseId\r\n              ? `map_${(optionValue_mapdatFilenameIdStart + whichMap_y * optionValue_mapSize_x + whichMap_x).toString()}.dat`\r\n              : `${uploadedImage_baseFilename}_${whichMap_x.toString()}_${whichMap_y.toString()}.dat`,\r\n            Mapdat_Bytes_gzipped\r\n          );\r\n          if (numberOfSplitsCalculated === optionValue_mapSize_x * optionValue_mapSize_y) {\r\n            zipFile.generateAsync({ type: \"blob\" }).then((content) => {\r\n              downloadBlobFile(content, `${uploadedImage_baseFilename}.zip`);\r\n            });\r\n          }\r\n          break;\r\n        }\r\n        default: {\r\n          throw new Error(\"Unknown worker response header\");\r\n        }\r\n      }\r\n    };\r\n    this.nbtWorker.postMessage({\r\n      head: workerHeader,\r\n      body: {\r\n        coloursJSON: coloursJSON,\r\n        MapModes: MapModes,\r\n        WhereSupportBlocksModes: WhereSupportBlocksModes,\r\n        optionValue_version: optionValue_version,\r\n        optionValue_staircasing: optionValue_staircasing,\r\n        optionValue_whereSupportBlocks: optionValue_whereSupportBlocks,\r\n        optionValue_supportBlock: optionValue_supportBlock,\r\n        pixelsData: currentMaterialsData.pixelsData,\r\n        maps: currentMaterialsData.maps,\r\n        currentSelectedBlocks: currentMaterialsData.currentSelectedBlocks,\r\n      },\r\n    });\r\n  };\r\n\r\n  onViewOnlineClicked = () => {\r\n    this.getNBT_base(\"CREATE_NBT_JOINED_FOR_VIEW_ONLINE\");\r\n  };\r\n\r\n  onGetNBTClicked = () => {\r\n    this.getNBT_base(\"CREATE_NBT_JOINED\");\r\n  };\r\n\r\n  onGetNBTSplitClicked = () => {\r\n    this.getNBT_base(\"CREATE_NBT_SPLIT\");\r\n  };\r\n\r\n  onGetMapdatSplitClicked = () => {\r\n    this.getNBT_base(\"CREATE_MAPDAT_SPLIT\");\r\n  };\r\n\r\n  onGetMapdatSplitZipClicked = () => {\r\n    this.getNBT_base(\"CREATE_MAPDAT_SPLIT_ZIP\");\r\n  };\r\n\r\n  componentDidUpdate_shouldNBTWorkerTerminate(prevProps) {\r\n    const {\r\n      selectedBlocks,\r\n      optionValue_version,\r\n      optionValue_modeNBTOrMapdat,\r\n      optionValue_mapSize_x,\r\n      optionValue_mapSize_y,\r\n      optionValue_cropImage,\r\n      optionValue_cropImage_zoom,\r\n      optionValue_cropImage_percent_x,\r\n      optionValue_cropImage_percent_y,\r\n      optionValue_staircasing,\r\n      optionValue_whereSupportBlocks,\r\n      optionValue_supportBlock,\r\n      optionValue_transparency,\r\n      optionValue_transparencyTolerance,\r\n      optionValue_mapdatFilenameUseId,\r\n      optionValue_mapdatFilenameIdStart,\r\n      optionValue_betterColour,\r\n      optionValue_dithering,\r\n      optionValue_preprocessingEnabled,\r\n      preProcessingValue_brightness,\r\n      preProcessingValue_contrast,\r\n      preProcessingValue_saturation,\r\n      preProcessingValue_backgroundColourSelect,\r\n      preProcessingValue_backgroundColour,\r\n      uploadedImage,\r\n    } = this.props;\r\n    return [\r\n      prevProps.selectedBlocks !== selectedBlocks,\r\n      prevProps.optionValue_version !== optionValue_version,\r\n      prevProps.optionValue_modeNBTOrMapdat !== optionValue_modeNBTOrMapdat,\r\n      prevProps.optionValue_mapSize_x !== optionValue_mapSize_x,\r\n      prevProps.optionValue_mapSize_y !== optionValue_mapSize_y,\r\n      prevProps.optionValue_cropImage !== optionValue_cropImage,\r\n      prevProps.optionValue_cropImage_zoom !== optionValue_cropImage_zoom,\r\n      prevProps.optionValue_cropImage_percent_x !== optionValue_cropImage_percent_x,\r\n      prevProps.optionValue_cropImage_percent_y !== optionValue_cropImage_percent_y,\r\n      prevProps.optionValue_staircasing !== optionValue_staircasing,\r\n      prevProps.optionValue_whereSupportBlocks !== optionValue_whereSupportBlocks,\r\n      prevProps.optionValue_supportBlock !== optionValue_supportBlock,\r\n      prevProps.optionValue_transparency !== optionValue_transparency,\r\n      prevProps.optionValue_transparencyTolerance !== optionValue_transparencyTolerance,\r\n      prevProps.optionValue_mapdatFilenameUseId !== optionValue_mapdatFilenameUseId,\r\n      prevProps.optionValue_mapdatFilenameIdStart !== optionValue_mapdatFilenameIdStart,\r\n      prevProps.optionValue_betterColour !== optionValue_betterColour,\r\n      prevProps.optionValue_dithering !== optionValue_dithering,\r\n      prevProps.optionValue_preprocessingEnabled !== optionValue_preprocessingEnabled,\r\n      prevProps.preProcessingValue_brightness !== preProcessingValue_brightness,\r\n      prevProps.preProcessingValue_contrast !== preProcessingValue_contrast,\r\n      prevProps.preProcessingValue_saturation !== preProcessingValue_saturation,\r\n      prevProps.preProcessingValue_backgroundColourSelect !== preProcessingValue_backgroundColourSelect,\r\n      prevProps.preProcessingValue_backgroundColour !== preProcessingValue_backgroundColour,\r\n      prevProps.uploadedImage !== uploadedImage,\r\n    ].some((elt) => elt);\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { mapPreviewWorker_inProgress } = this.props;\r\n    if (this.componentDidUpdate_shouldNBTWorkerTerminate(prevProps)) {\r\n      // reset callback if setting changed\r\n      this.nbtWorker.terminate();\r\n      this.resetButtonWidths();\r\n      this.setState({ mapPreviewWorker_onFinishCallback: null });\r\n    } else if (!mapPreviewWorker_inProgress && this.state.mapPreviewWorker_onFinishCallback !== null) {\r\n      this.state.mapPreviewWorker_onFinishCallback();\r\n      this.setState({ mapPreviewWorker_onFinishCallback: null });\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.nbtWorker.terminate();\r\n  }\r\n\r\n  render() {\r\n    const { buttonWidth_viewOnline, buttonWidth_NBT_Joined, buttonWidth_NBT_Split, buttonWidth_Mapdat_Split } = this.state;\r\n    const { getLocaleString, optionValue_modeNBTOrMapdat } = this.props;\r\n    let buttons_mapModeConditional;\r\n    // dummy text used in divs with absolutely positioned children to create correct container height\r\n    if (optionValue_modeNBTOrMapdat === MapModes.SCHEMATIC_NBT.uniqueId) {\r\n      buttons_mapModeConditional = (\r\n        <React.Fragment>\r\n          <Tooltip tooltipText={getLocaleString(\"VIEW-ONLINE/TITLE-TT\")}>\r\n            <div className=\"greenButton\" onClick={this.onViewOnlineClicked}>\r\n              <span className=\"greenButton_text_dummy\">{getLocaleString(\"VIEW-ONLINE/TITLE\")}</span>\r\n              <span className=\"greenButton_text\">{getLocaleString(\"VIEW-ONLINE/TITLE\")}</span>\r\n              <div\r\n                className=\"greenButton_progressDiv\"\r\n                style={{\r\n                  width: `${Math.floor(buttonWidth_viewOnline * 100)}%`,\r\n                }}\r\n              />\r\n            </div>\r\n          </Tooltip>\r\n          <br />\r\n          <Tooltip tooltipText={getLocaleString(\"DOWNLOAD/NBT-SPECIFIC/DOWNLOAD-TT\")}>\r\n            <div className=\"greenButton\" onClick={this.onGetNBTClicked}>\r\n              <span className=\"greenButton_large_text_dummy\">{getLocaleString(\"DOWNLOAD/NBT-SPECIFIC/DOWNLOAD\")}</span>\r\n              <span className=\"greenButton_large_text\">{getLocaleString(\"DOWNLOAD/NBT-SPECIFIC/DOWNLOAD\")}</span>\r\n              <div\r\n                className=\"greenButton_progressDiv\"\r\n                style={{\r\n                  width: `${Math.floor(buttonWidth_NBT_Joined * 100)}%`,\r\n                }}\r\n              />\r\n            </div>\r\n          </Tooltip>\r\n          <br />\r\n          <Tooltip tooltipText={getLocaleString(\"DOWNLOAD/NBT-SPECIFIC/DOWNLOAD-SPLIT-TT\")}>\r\n            <div className=\"greenButton\" onClick={this.onGetNBTSplitClicked}>\r\n              <span className=\"greenButton_text_dummy\">{`${getLocaleString(\"DOWNLOAD/NBT-SPECIFIC/DOWNLOAD-SPLIT\")} .ZIP`}</span>\r\n              <span className=\"greenButton_text\">{`${getLocaleString(\"DOWNLOAD/NBT-SPECIFIC/DOWNLOAD-SPLIT\")} .ZIP`}</span>\r\n              <div\r\n                className=\"greenButton_progressDiv\"\r\n                style={{\r\n                  width: `${Math.floor(buttonWidth_NBT_Split * 100)}%`,\r\n                }}\r\n              />\r\n            </div>\r\n          </Tooltip>\r\n          <br />\r\n        </React.Fragment>\r\n      );\r\n    } else {\r\n      buttons_mapModeConditional = (\r\n        <React.Fragment>\r\n          <Tooltip tooltipText={getLocaleString(\"DOWNLOAD/MAPDAT-SPECIFIC/DOWNLOAD-TT\")}>\r\n            <div className=\"greenButton\" onClick={this.onGetMapdatSplitClicked}>\r\n              <span className=\"greenButton_large_text_dummy\">{`${getLocaleString(\"DOWNLOAD/MAPDAT-SPECIFIC/DOWNLOAD\")}`}</span>\r\n              <span className=\"greenButton_large_text\">{`${getLocaleString(\"DOWNLOAD/MAPDAT-SPECIFIC/DOWNLOAD\")}`}</span>\r\n              <div\r\n                className=\"greenButton_progressDiv\"\r\n                style={{\r\n                  width: `${Math.floor(buttonWidth_Mapdat_Split * 100)}%`,\r\n                }}\r\n              />\r\n            </div>\r\n          </Tooltip>\r\n          <br />\r\n          <Tooltip tooltipText={getLocaleString(\"DOWNLOAD/MAPDAT-SPECIFIC/DOWNLOAD-TT\")}>\r\n            <div className=\"greenButton\" onClick={this.onGetMapdatSplitZipClicked}>\r\n              <span className=\"greenButton_large_text_dummy\">{`${getLocaleString(\"DOWNLOAD/MAPDAT-SPECIFIC/DOWNLOAD\")} .ZIP`}</span>\r\n              <span className=\"greenButton_large_text\">{`${getLocaleString(\"DOWNLOAD/MAPDAT-SPECIFIC/DOWNLOAD\")} .ZIP`}</span>\r\n              <div\r\n                className=\"greenButton_progressDiv\"\r\n                style={{\r\n                  width: `${Math.floor(buttonWidth_Mapdat_Split * 100)}%`,\r\n                }}\r\n              />\r\n            </div>\r\n          </Tooltip>\r\n          <br />\r\n        </React.Fragment>\r\n      );\r\n    }\r\n    const button_donate = (\r\n      <React.Fragment>\r\n        <Tooltip tooltipText={getLocaleString(\"DONATE/TITLE-TT\")}>\r\n          <div className=\"greenButton\">\r\n            <a style={{ textDecoration: \"none\" }} href=\"./supporters\">\r\n              <span className=\"greenButton_text_dummy\" style={{ backgroundColor: \"#688e6b\", color: \"#333333\" }}>\r\n                {getLocaleString(\"DONATE/TITLE\")}\r\n              </span>\r\n              <span className=\"greenButton_text\" style={{ backgroundColor: \"#688e6b\", color: \"#333333\" }}>\r\n                {getLocaleString(\"DONATE/TITLE\")}\r\n              </span>\r\n            </a>\r\n          </div>\r\n        </Tooltip>\r\n      </React.Fragment>\r\n    );\r\n    const buttonsDiv = (\r\n      <div>\r\n        {buttons_mapModeConditional}\r\n        {button_donate}\r\n      </div>\r\n    );\r\n    return buttonsDiv;\r\n  }\r\n}\r\n\r\nexport default GreenButtons;\r\n","export default __webpack_public_path__ + \"static/media/mapCanvas.15148a70.jsworker\";","import React, { Component, createRef } from \"react\";\r\n\r\nimport Tooltip from \"../tooltip\";\r\nimport MapCanvasWorker from \"./workers/mapCanvas.jsworker\"; // FINALLY got this to work; .js gets imported as code, anything else as URL\r\n\r\nimport BackgroundColourModes from \"./json/backgroundColourModes.json\";\r\nimport CropModes from \"./json/cropModes.json\";\r\nimport DitherMethods from \"./json/ditherMethods.json\";\r\nimport MapModes from \"./json/mapModes.json\";\r\nimport WhereSupportBlocksModes from \"./json/whereSupportBlocksModes.json\";\r\n\r\nimport IMG_Null from \"../../images/null.png\";\r\nimport IMG_Textures from \"../../images/textures.png\";\r\nimport IMG_GridOverlay from \"../../images/gridOverlay.png\";\r\n\r\nimport \"./mapPreview.css\";\r\n\r\nclass MapPreview extends Component {\r\n  state = {\r\n    mapPreviewSizeScale: 2,\r\n    workerProgress: 0,\r\n  };\r\n\r\n  mapCanvasWorker = new Worker(MapCanvasWorker);\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.canvasRef_source = createRef(); // hidden source canvas that at all times contains the uploaded image\r\n    this.canvasRef_display = createRef(); // display canvas that displays to the user, may be pixels, may be image\r\n    this.fileInputRef = createRef();\r\n  }\r\n\r\n  shouldCanvasUpdate_source(prevProps, newProps, prevState, newState) {\r\n    const propChanges = [\r\n      prevProps.coloursJSON === newProps.coloursJSON,\r\n      prevProps.selectedBlocks === newProps.selectedBlocks,\r\n      prevProps.optionValue_mapSize_x === newProps.optionValue_mapSize_x,\r\n      prevProps.optionValue_mapSize_y === newProps.optionValue_mapSize_y,\r\n      prevProps.optionValue_cropImage === newProps.optionValue_cropImage,\r\n      prevProps.optionValue_cropImage_zoom === newProps.optionValue_cropImage_zoom,\r\n      prevProps.optionValue_cropImage_percent_x === newProps.optionValue_cropImage_percent_x,\r\n      prevProps.optionValue_cropImage_percent_y === newProps.optionValue_cropImage_percent_y,\r\n      prevProps.optionValue_staircasing === newProps.optionValue_staircasing,\r\n      prevProps.optionValue_preprocessingEnabled === newProps.optionValue_preprocessingEnabled,\r\n      prevProps.preProcessingValue_brightness === newProps.preProcessingValue_brightness,\r\n      prevProps.preProcessingValue_contrast === newProps.preProcessingValue_contrast,\r\n      prevProps.preProcessingValue_saturation === newProps.preProcessingValue_saturation,\r\n      prevProps.preProcessingValue_backgroundColourSelect === newProps.preProcessingValue_backgroundColourSelect,\r\n      prevProps.preProcessingValue_backgroundColour === newProps.preProcessingValue_backgroundColour,\r\n      prevProps.uploadedImage === newProps.uploadedImage,\r\n    ];\r\n    return (\r\n      newProps.uploadedImage !== null &&\r\n      prevState.workerProgress === newState.workerProgress &&\r\n      !propChanges.every((elt) => {\r\n        return elt === true;\r\n      })\r\n    );\r\n  }\r\n\r\n  shouldCanvasUpdate_display(prevProps, newProps, prevState, newState) {\r\n    // ugly but useful method to determine whether map canvas contents should be redrawn on component update\r\n    const propChanges = [\r\n      prevProps.coloursJSON === newProps.coloursJSON,\r\n      prevProps.selectedBlocks === newProps.selectedBlocks,\r\n      prevProps.optionValue_modeNBTOrMapdat === newProps.optionValue_modeNBTOrMapdat,\r\n      prevProps.optionValue_mapSize_x === newProps.optionValue_mapSize_x,\r\n      prevProps.optionValue_mapSize_y === newProps.optionValue_mapSize_y,\r\n      prevProps.optionValue_cropImage === newProps.optionValue_cropImage,\r\n      prevProps.optionValue_cropImage_zoom === newProps.optionValue_cropImage_zoom,\r\n      prevProps.optionValue_cropImage_percent_x === newProps.optionValue_cropImage_percent_x,\r\n      prevProps.optionValue_cropImage_percent_y === newProps.optionValue_cropImage_percent_y,\r\n      prevProps.optionValue_staircasing === newProps.optionValue_staircasing,\r\n      prevProps.optionValue_whereSupportBlocks === newProps.optionValue_whereSupportBlocks,\r\n      prevProps.optionValue_transparency === newProps.optionValue_transparency,\r\n      prevProps.optionValue_transparencyTolerance === newProps.optionValue_transparencyTolerance,\r\n      prevProps.optionValue_betterColour === newProps.optionValue_betterColour,\r\n      prevProps.optionValue_dithering === newProps.optionValue_dithering,\r\n      prevProps.optionValue_preprocessingEnabled === newProps.optionValue_preprocessingEnabled,\r\n      prevProps.preProcessingValue_brightness === newProps.preProcessingValue_brightness,\r\n      prevProps.preProcessingValue_contrast === newProps.preProcessingValue_contrast,\r\n      prevProps.preProcessingValue_saturation === newProps.preProcessingValue_saturation,\r\n      prevProps.preProcessingValue_backgroundColourSelect === newProps.preProcessingValue_backgroundColourSelect,\r\n      prevProps.preProcessingValue_backgroundColour === newProps.preProcessingValue_backgroundColour,\r\n      prevProps.uploadedImage === newProps.uploadedImage,\r\n    ];\r\n    return (\r\n      newProps.uploadedImage !== null &&\r\n      prevState.workerProgress === newState.workerProgress &&\r\n      !propChanges.every((elt) => {\r\n        return elt === true;\r\n      })\r\n    );\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (this.shouldCanvasUpdate_source(prevProps, this.props, prevState, this.state)) {\r\n      this.updateCanvas_source(); // draw uploaded image on source canvas\r\n    }\r\n    if (this.shouldCanvasUpdate_display(prevProps, this.props, prevState, this.state)) {\r\n      this.updateCanvas_display(); // draw pixelart of image on display canvas\r\n    }\r\n  }\r\n\r\n  closestSmoothColourTo(colourHex) {\r\n    const { coloursJSON, selectedBlocks, optionValue_staircasing } = this.props;\r\n    const rgbGroups_input = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(colourHex);\r\n    const colourRGB_input = [parseInt(rgbGroups_input[1], 16), parseInt(rgbGroups_input[2], 16), parseInt(rgbGroups_input[3], 16)];\r\n    let smallestDistance = 9999999;\r\n    let colourRGB_return = null;\r\n    for (const [colourSetId, colourSet] of Object.entries(coloursJSON)) {\r\n      if (selectedBlocks[colourSetId] === \"-1\") {\r\n        continue;\r\n      }\r\n      let coloursRGB_colourSet;\r\n      switch (optionValue_staircasing) {\r\n        case MapModes.SCHEMATIC_NBT.staircaseModes.OFF.uniqueId:\r\n        case MapModes.SCHEMATIC_NBT.staircaseModes.CLASSIC.uniqueId:\r\n        case MapModes.SCHEMATIC_NBT.staircaseModes.VALLEY.uniqueId:\r\n        case MapModes.MAPDAT.staircaseModes.OFF.uniqueId: {\r\n          coloursRGB_colourSet = [colourSet.tonesRGB.normal];\r\n          break;\r\n        }\r\n        case MapModes.SCHEMATIC_NBT.staircaseModes.FULL_DARK.uniqueId:\r\n        case MapModes.MAPDAT.staircaseModes.FULL_DARK.uniqueId: {\r\n          coloursRGB_colourSet = [colourSet.tonesRGB.dark];\r\n          break;\r\n        }\r\n        case MapModes.SCHEMATIC_NBT.staircaseModes.FULL_LIGHT.uniqueId:\r\n        case MapModes.MAPDAT.staircaseModes.FULL_LIGHT.uniqueId: {\r\n          coloursRGB_colourSet = [colourSet.tonesRGB.light];\r\n          break;\r\n        }\r\n        case MapModes.MAPDAT.staircaseModes.FULL_UNOBTAINABLE.uniqueId: {\r\n          coloursRGB_colourSet = [colourSet.tonesRGB.unobtainable];\r\n          break;\r\n        }\r\n        case MapModes.MAPDAT.staircaseModes.ON.uniqueId: {\r\n          coloursRGB_colourSet = [colourSet.tonesRGB.dark, colourSet.tonesRGB.normal, colourSet.tonesRGB.light];\r\n          break;\r\n        }\r\n        case MapModes.MAPDAT.staircaseModes.ON_UNOBTAINABLE.uniqueId: {\r\n          coloursRGB_colourSet = [colourSet.tonesRGB.dark, colourSet.tonesRGB.normal, colourSet.tonesRGB.light, colourSet.tonesRGB.unobtainable];\r\n          break;\r\n        }\r\n        default: {\r\n          throw new Error(\"Unknown staircasing mode\");\r\n        }\r\n      }\r\n      for (const colourRGB_colourSet of coloursRGB_colourSet) {\r\n        const colourDistance =\r\n          Math.pow(colourRGB_input[0] - colourRGB_colourSet[0], 2) +\r\n          Math.pow(colourRGB_input[1] - colourRGB_colourSet[1], 2) +\r\n          Math.pow(colourRGB_input[2] - colourRGB_colourSet[2], 2);\r\n        if (colourDistance < smallestDistance) {\r\n          smallestDistance = colourDistance;\r\n          colourRGB_return = colourRGB_colourSet;\r\n        }\r\n      }\r\n    }\r\n    const colourHex_return = `#${colourRGB_return[0].toString(16).padStart(2, \"0\")}${colourRGB_return[1].toString(16).padStart(2, \"0\")}${colourRGB_return[2]\r\n      .toString(16)\r\n      .padStart(2, \"0\")}`;\r\n    return colourHex_return;\r\n  }\r\n\r\n  updateCanvas_source() {\r\n    const {\r\n      selectedBlocks,\r\n      optionValue_preprocessingEnabled,\r\n      preProcessingValue_brightness,\r\n      preProcessingValue_contrast,\r\n      preProcessingValue_saturation,\r\n      preProcessingValue_backgroundColourSelect,\r\n      preProcessingValue_backgroundColour,\r\n      uploadedImage,\r\n    } = this.props;\r\n    const {\r\n      optionValue_mapSize_x,\r\n      optionValue_mapSize_y,\r\n      optionValue_cropImage,\r\n      optionValue_cropImage_zoom,\r\n      optionValue_cropImage_percent_x,\r\n      optionValue_cropImage_percent_y,\r\n    } = this.props;\r\n    const { canvasRef_source } = this;\r\n    const ctx_source = canvasRef_source.current.getContext(\"2d\");\r\n    ctx_source.imageSmoothingEnabled = true;   // These two options keep the map preview consistent on Chrome(ium). Otherwise the first render after changing\r\n    ctx_source.imageSmoothingQuality = \"high\"; // map x or z size is pixelated to a noticeably lower quality. This is not a solution to the cause but a\r\n                                               // workaround the effect (I do not know exactly why this happens: maybe it is to do with\r\n                                               // anti-fingerprinting). Firefox is unaffected by any of this.\r\n    ctx_source.clearRect(0, 0, ctx_source.canvas.width, ctx_source.canvas.height);\r\n\r\n    if (optionValue_preprocessingEnabled) {\r\n      if (preProcessingValue_backgroundColourSelect !== BackgroundColourModes.OFF.uniqueId && /^#?[a-f\\d]{6}$/i.test(preProcessingValue_backgroundColour)) {\r\n        let backgroundColour;\r\n        if (\r\n          preProcessingValue_backgroundColourSelect === BackgroundColourModes.SMOOTH.uniqueId &&\r\n          !Object.values(selectedBlocks).every((selectedBlockId) => selectedBlockId === \"-1\")\r\n        ) {\r\n          backgroundColour = this.closestSmoothColourTo(preProcessingValue_backgroundColour);\r\n        } else {\r\n          backgroundColour = preProcessingValue_backgroundColour;\r\n        }\r\n        ctx_source.filter = \"none\"; // this needs to be present to stop filters affecting background colour\r\n        ctx_source.rect(0, 0, ctx_source.canvas.width, ctx_source.canvas.height);\r\n        ctx_source.fillStyle = backgroundColour;\r\n        ctx_source.fill();\r\n      }\r\n      ctx_source.filter = `brightness(${preProcessingValue_brightness}%) contrast(${preProcessingValue_contrast}%) saturate(${preProcessingValue_saturation}%)`;\r\n    } else {\r\n      ctx_source.filter = \"none\";\r\n    }\r\n\r\n    switch (optionValue_cropImage) {\r\n      case CropModes.OFF.uniqueId: {\r\n        ctx_source.drawImage(uploadedImage, 0, 0, ctx_source.canvas.width, ctx_source.canvas.height);\r\n        break;\r\n      }\r\n      case CropModes.CENTER.uniqueId:\r\n      case CropModes.MANUAL.uniqueId: {\r\n        const img_width = uploadedImage.width;\r\n        const img_height = uploadedImage.height;\r\n        let samplingWidth;\r\n        let samplingHeight;\r\n        let samplingOffset_x;\r\n        let samplingOffset_y;\r\n        if (img_width * optionValue_mapSize_y > img_height * optionValue_mapSize_x) {\r\n          // image w/h greater than canvas w/h\r\n          samplingWidth = Math.floor((10 * img_height * optionValue_mapSize_x) / (optionValue_mapSize_y * optionValue_cropImage_zoom));\r\n          // the 10 is because the input is from 10 to 50 in steps of 1; scale down by 10\r\n          samplingHeight = Math.floor((10 * img_height) / optionValue_cropImage_zoom);\r\n          samplingOffset_x = Math.floor((optionValue_cropImage_percent_x * (img_width - samplingWidth)) / 100);\r\n          samplingOffset_y = Math.floor((optionValue_cropImage_percent_y * (img_height - samplingHeight)) / 100);\r\n        } else {\r\n          // image w/h leq canvas w/h\r\n          samplingWidth = Math.floor((10 * img_width) / optionValue_cropImage_zoom);\r\n          samplingHeight = Math.floor((10 * img_width * optionValue_mapSize_y) / (optionValue_mapSize_x * optionValue_cropImage_zoom));\r\n          samplingOffset_x = Math.floor((optionValue_cropImage_percent_x * (img_width - samplingWidth)) / 100);\r\n          samplingOffset_y = Math.floor((optionValue_cropImage_percent_y * (img_height - samplingHeight)) / 100);\r\n        }\r\n        ctx_source.drawImage(\r\n          uploadedImage,\r\n          samplingOffset_x,\r\n          samplingOffset_y,\r\n          samplingWidth,\r\n          samplingHeight,\r\n          0,\r\n          0,\r\n          ctx_source.canvas.width,\r\n          ctx_source.canvas.height\r\n        );\r\n        break;\r\n      }\r\n      default: {\r\n        throw new Error(\"Unknown optionValue_cropImage\");\r\n      }\r\n    }\r\n  }\r\n\r\n  updateCanvas_display() {\r\n    this.mapCanvasWorker.terminate();\r\n    const { canvasRef_source, canvasRef_display } = this;\r\n    const {\r\n      coloursJSON,\r\n      selectedBlocks,\r\n      optionValue_modeNBTOrMapdat,\r\n      optionValue_mapSize_x,\r\n      optionValue_mapSize_y,\r\n      optionValue_staircasing,\r\n      optionValue_whereSupportBlocks,\r\n      optionValue_transparency,\r\n      optionValue_transparencyTolerance,\r\n      optionValue_betterColour,\r\n      optionValue_dithering,\r\n      onGetMapMaterials,\r\n      onMapPreviewWorker_begin,\r\n    } = this.props;\r\n    const ctx_source = canvasRef_source.current.getContext(\"2d\");\r\n    const canvasImageData = ctx_source.getImageData(0, 0, ctx_source.canvas.width, ctx_source.canvas.height);\r\n    const t0 = performance.now();\r\n    this.mapCanvasWorker = new Worker(MapCanvasWorker);\r\n    this.mapCanvasWorker.onmessage = (e) => {\r\n      if (e.data.head === \"PIXELS_MATERIALS_CURRENTSELECTEDBLOCKS\") {\r\n        const t1 = performance.now();\r\n        console.log(`Calculated map preview data in ${(t1 - t0).toString()}ms`);\r\n        const ctx_display = canvasRef_display.current.getContext(\"2d\");\r\n        ctx_display.putImageData(e.data.body.pixels, 0, 0);\r\n        this.setState({ workerProgress: 1 });\r\n        onGetMapMaterials({\r\n          pixelsData: e.data.body.pixels.data,\r\n          maps: e.data.body.maps,\r\n          currentSelectedBlocks: e.data.body.currentSelectedBlocks,\r\n        });\r\n      } else if (e.data.head === \"PROGRESS_REPORT\") {\r\n        this.setState({ workerProgress: e.data.body });\r\n      }\r\n    };\r\n    onMapPreviewWorker_begin();\r\n    this.mapCanvasWorker.postMessage({\r\n      head: \"PIXELS\",\r\n      body: {\r\n        coloursJSON: coloursJSON,\r\n        MapModes: MapModes,\r\n        WhereSupportBlocksModes: WhereSupportBlocksModes,\r\n        DitherMethods: DitherMethods,\r\n        canvasImageData: canvasImageData,\r\n        selectedBlocks: selectedBlocks,\r\n        optionValue_modeNBTOrMapdat: optionValue_modeNBTOrMapdat,\r\n        optionValue_mapSize_x: optionValue_mapSize_x,\r\n        optionValue_mapSize_y: optionValue_mapSize_y,\r\n        optionValue_staircasing: optionValue_staircasing,\r\n        optionValue_whereSupportBlocks: optionValue_whereSupportBlocks,\r\n        optionValue_transparency: optionValue_transparency,\r\n        optionValue_transparencyTolerance: optionValue_transparencyTolerance,\r\n        optionValue_betterColour: optionValue_betterColour,\r\n        optionValue_dithering: optionValue_dithering,\r\n      },\r\n    });\r\n  }\r\n\r\n  increasePreviewScale = () => {\r\n    this.setState({\r\n      mapPreviewSizeScale: this.state.mapPreviewSizeScale * 1.2,\r\n    });\r\n  };\r\n\r\n  decreasePreviewScale = () => {\r\n    this.setState({\r\n      mapPreviewSizeScale: this.state.mapPreviewSizeScale / 1.2,\r\n    });\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    this.mapCanvasWorker.terminate();\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      getLocaleString,\r\n      optionValue_mapSize_x, // map size in maps\r\n      optionValue_mapSize_y,\r\n      optionValue_cropImage,\r\n      optionValue_showGridOverlay,\r\n      onFileDialogEvent,\r\n      uploadedImage,\r\n    } = this.props;\r\n    const { mapPreviewSizeScale, workerProgress } = this.state;\r\n    return (\r\n      <div className=\"section mapPreviewDiv\">\r\n        <h2>{getLocaleString(\"MAP-PREVIEW/TITLE\")}</h2>\r\n        <input type=\"file\" className=\"imgUpload\" ref={this.fileInputRef} onChange={onFileDialogEvent} />\r\n        <div>\r\n          <span\r\n            className=\"gridOverlay\"\r\n            style={{\r\n              backgroundImage: `url(${IMG_GridOverlay})`,\r\n              display: optionValue_showGridOverlay ? \"block\" : \"none\",\r\n              width: `${(mapPreviewSizeScale * 128 * optionValue_mapSize_x).toString()}px`,\r\n              height: `${(mapPreviewSizeScale * 128 * optionValue_mapSize_y).toString()}px`,\r\n              backgroundSize: `${(mapPreviewSizeScale * 128).toString()}px`,\r\n            }}\r\n          />\r\n          <canvas\r\n            className=\"mapCanvas\"\r\n            width={128 * optionValue_mapSize_x}\r\n            height={128 * optionValue_mapSize_y}\r\n            ref={this.canvasRef_display}\r\n            style={{\r\n              width: `${(mapPreviewSizeScale * 128 * optionValue_mapSize_x).toString()}px`,\r\n              height: `${(mapPreviewSizeScale * 128 * optionValue_mapSize_y).toString()}px`,\r\n            }}\r\n            onClick={() => this.fileInputRef.current.click()}\r\n          />\r\n          <canvas className=\"displayNone\" width={128 * optionValue_mapSize_x} height={128 * optionValue_mapSize_y} ref={this.canvasRef_source}></canvas>\r\n        </div>\r\n        <div className=\"mapResolutionAndZoom\">\r\n          <div>\r\n            <Tooltip tooltipText={getLocaleString(\"MAP-PREVIEW/BEST-RESOLUTION-TT\")}>\r\n              <small>{`${(128 * optionValue_mapSize_x).toString()}x${(128 * optionValue_mapSize_y).toString()}`}</small>\r\n            </Tooltip>{\" \"}\r\n            <Tooltip tooltipText={getLocaleString(\"MAP-PREVIEW/ASPECT-RATIO-MISMATCH-TT\")}>\r\n              <small\r\n                className=\"mapResWarning\"\r\n                style={{\r\n                  display:\r\n                    uploadedImage === null || uploadedImage.height * optionValue_mapSize_x === uploadedImage.width * optionValue_mapSize_y ? \"none\" : \"inline\",\r\n                  color: optionValue_cropImage === CropModes.OFF.uniqueId ? \"red\" : \"orange\",\r\n                }}\r\n              >\r\n                {uploadedImage === null ? null : `${uploadedImage.width.toString()}x${uploadedImage.height.toString()}`}\r\n              </small>\r\n            </Tooltip>\r\n          </div>\r\n          <div>\r\n            <Tooltip tooltipText={getLocaleString(\"MAP-PREVIEW/SCALE-PLUS-TT\")}>\r\n              <img\r\n                alt=\"+\"\r\n                className=\"sizeButton\"\r\n                src={IMG_Null}\r\n                style={{\r\n                  backgroundImage: `url(${IMG_Textures})`,\r\n                  backgroundPositionX: \"-96px\",\r\n                  backgroundPositionY: \"-2048px\",\r\n                }}\r\n                onClick={this.increasePreviewScale}\r\n              />\r\n            </Tooltip>\r\n            <Tooltip tooltipText={getLocaleString(\"MAP-PREVIEW/SCALE-MINUS-TT\")}>\r\n              <img\r\n                alt=\"-\"\r\n                className=\"sizeButton\"\r\n                src={IMG_Null}\r\n                style={{\r\n                  backgroundImage: `url(${IMG_Textures})`,\r\n                  backgroundPositionX: \"-128px\",\r\n                  backgroundPositionY: \"-2048px\",\r\n                }}\r\n                onClick={this.decreasePreviewScale}\r\n              />\r\n            </Tooltip>\r\n          </div>\r\n        </div>\r\n        <div\r\n          className=\"progress\"\r\n          style={\r\n            [0, 1].includes(workerProgress)\r\n              ? {\r\n                  display: \"unset\",\r\n                  visibility: \"hidden\",\r\n                }\r\n              : { display: \"block\" }\r\n          }\r\n        >\r\n          <span className=\"progressText\">{`${Math.floor(workerProgress * 100)}%`}</span>\r\n          <div\r\n            className=\"progressDiv\"\r\n            style={{\r\n              width: `${Math.floor(workerProgress * 100)}%`,\r\n            }}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MapPreview;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAPiSURBVHhe7d0xjtwwEABB0h+Xf04fZYWMeUFXAbMglDBSYxXNWGv93ozx9/j81rjf/afnt+YX7x8/v3v+/JyAKAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAsLlXFH9nIGKO9byH0+7wa2M/vPtPz29N+P795u/xCQBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhc68o/s5AxBzreQ+n3eHXxn5495+e35rw/fvN3+MTAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMIEAMLmXlH8nYGIOdbzHk67w6+N/fDuPz2/NeH795u/xycAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhM29ovg7AxFzrOc9nHaHXxv74d1/en5rwvfvN3+PTwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIm3tF8XcGIuZYz3s47Q6/NvbDu//0/NaE799v/h6fABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABA294ri7wxEzLGe93DaHX5t7Id3/+n5rQnfv9/8PT4BIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIGzuFcXfGYiYYz3v4bQ7/NrYD+/+0/NbE75/v/l7fAJAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABA2Py/JRQo8g8Assb4BzyTnrLVu1KjAAAAAElFTkSuQmCC\"","import React, { Component } from \"react\";\r\n\r\nimport BlockImage from \"../blockImage\";\r\n\r\nimport \"./autoCompleteInputBlockToAdd.css\";\r\n\r\nclass AutoCompleteInputBlockToAdd extends Component {\r\n  state = { suggestionSelected: true };\r\n\r\n  getRelevantSuggestions = () => {\r\n    const { coloursJSON, value, optionValue_version } = this.props;\r\n    let suggestions_prefix = [];\r\n    let suggestions_includes = [];\r\n\r\n    for (const [colourSetId, colourSet] of Object.entries(coloursJSON)) {\r\n      for (const [blockId, block] of Object.entries(colourSet.blocks)) {\r\n        if (!(optionValue_version.MCVersion in block.validVersions)) {\r\n          continue;\r\n        }\r\n        let blockNBTData = block.validVersions[optionValue_version.MCVersion];\r\n        if (typeof blockNBTData === \"string\") {\r\n          // this is of the form eg \"&1.12.2\"\r\n          blockNBTData = block.validVersions[blockNBTData.slice(1)];\r\n        }\r\n        if (!block.supportBlockMandatory) {\r\n          // no gravity affected blocks etc for support / noobline\r\n          if (blockNBTData.NBTName.startsWith(value)) {\r\n            suggestions_prefix.push({\r\n              blockName: blockNBTData.NBTName,\r\n              colourSetId,\r\n              blockId,\r\n            });\r\n          } else if (blockNBTData.NBTName.includes(value)) {\r\n            suggestions_includes.push({\r\n              blockName: blockNBTData.NBTName,\r\n              colourSetId,\r\n              blockId,\r\n            });\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return suggestions_prefix.concat(suggestions_includes);\r\n  };\r\n\r\n  handleTextChange = (e) => {\r\n    const newValue = e.target.value.replace(\" \", \"_\").toLowerCase();\r\n    this.props.setValue(newValue);\r\n  };\r\n\r\n  onSuggestionClicked = (suggestion) => {\r\n    this.props.setValue(suggestion.blockName);\r\n    this.setState({ suggestionSelected: true });\r\n  };\r\n\r\n  onFocus = () => {\r\n    this.setState({ suggestionSelected: false });\r\n  };\r\n\r\n  render() {\r\n    const { coloursJSON, value } = this.props;\r\n    const { suggestionSelected } = this.state;\r\n\r\n    const relevantSuggestions = this.getRelevantSuggestions();\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <input type=\"text\" value={value} onChange={this.handleTextChange} onFocus={this.onFocus} onClick={this.onFocus} />\r\n        <table className={\"blockToAddSuggestions\"} style={{ display: suggestionSelected || relevantSuggestions.length === 0 ? \"none\" : \"table\" }}>\r\n          <tbody>\r\n            {relevantSuggestions.map((suggestion) => (\r\n              <tr\r\n                className={\"blockToAddSuggestion\"}\r\n                key={`${suggestion.colourSetId}$_${suggestion.blockId}_${suggestion.blockName}`}\r\n                onClick={() => this.onSuggestionClicked(suggestion)}\r\n              >\r\n                <th>\r\n                  <BlockImage coloursJSON={coloursJSON} colourSetId={suggestion.colourSetId} blockId={suggestion.blockId} />\r\n                </th>\r\n                <th>{suggestion.blockName}</th>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AutoCompleteInputBlockToAdd;\r\n","import { Component } from \"react\";\r\n\r\nimport \"./bufferedNumberInput.css\";\r\n\r\nclass BufferedNumberInput extends Component {\r\n  state = { buffer: null };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state.buffer = props.value;\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { value } = this.props;\r\n    if (prevProps.value !== value) {\r\n      this.setState({ buffer: value });\r\n    }\r\n  }\r\n\r\n  onInputChange = (e) => {\r\n    const { validators, onValidInput } = this.props;\r\n    const newValue_buffer = e.target.value;\r\n    const newValue_int = parseInt(newValue_buffer);\r\n    this.setState({ buffer: newValue_buffer }, () => {\r\n      if (\r\n        validators.every((validator) => {\r\n          return validator(newValue_int);\r\n        })\r\n      ) {\r\n        onValidInput(newValue_int);\r\n      }\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { min, max, step, style, disabled } = this.props;\r\n    const { buffer } = this.state;\r\n    return <input type=\"number\" min={min} max={max} step={step} value={buffer} onChange={this.onInputChange} disabled={disabled} style={style} />;\r\n  }\r\n}\r\n\r\nexport default BufferedNumberInput;\r\n","import React, { Component } from \"react\";\r\n\r\nimport AutoCompleteInputBlockToAdd from \"./autoCompleteInputBlockToAdd/autoCompleteInputBlockToAdd\";\r\n\r\nimport BufferedNumberInput from \"./bufferedNumberInput/bufferedNumberInput\";\r\n\r\nimport Tooltip from \"../tooltip\";\r\n\r\nimport BackgroundColourModes from \"./json/backgroundColourModes.json\";\r\nimport CropModes from \"./json/cropModes.json\";\r\nimport DitherMethods from \"./json/ditherMethods.json\";\r\nimport MapModes from \"./json/mapModes.json\";\r\nimport SupportedVersions from \"./json/supportedVersions.json\";\r\nimport WhereSupportBlocksModes from \"./json/whereSupportBlocksModes.json\";\r\n\r\nimport \"./mapSettings.css\";\r\n\r\nclass MapSettings extends Component {\r\n  render() {\r\n    const {\r\n      getLocaleString,\r\n      coloursJSON,\r\n      optionValue_version,\r\n      onOptionChange_version,\r\n      optionValue_mapSize_x,\r\n      onOptionChange_mapSize_x,\r\n      optionValue_mapSize_y,\r\n      onOptionChange_mapSize_y,\r\n      optionValue_modeNBTOrMapdat,\r\n      onOptionChange_modeNBTOrMapdat,\r\n      optionValue_cropImage,\r\n      onOptionChange_cropImage,\r\n      optionValue_cropImage_zoom,\r\n      onOptionChange_cropImage_zoom,\r\n      optionValue_cropImage_percent_x,\r\n      onOptionChange_cropImage_percent_x,\r\n      optionValue_cropImage_percent_y,\r\n      onOptionChange_cropImage_percent_y,\r\n      optionValue_showGridOverlay,\r\n      onOptionChange_showGridOverlay,\r\n      optionValue_staircasing,\r\n      onOptionChange_staircasing,\r\n      optionValue_whereSupportBlocks,\r\n      onOptionChange_WhereSupportBlocks,\r\n      optionValue_supportBlock,\r\n      setOption_SupportBlock,\r\n      optionValue_transparency,\r\n      onOptionChange_transparency,\r\n      optionValue_transparencyTolerance,\r\n      onOptionChange_transparencyTolerance,\r\n      optionValue_mapdatFilenameUseId,\r\n      onOptionChange_mapdatFilenameUseId,\r\n      optionValue_mapdatFilenameIdStart,\r\n      onOptionChange_mapdatFilenameIdStart,\r\n      optionValue_betterColour,\r\n      onOptionChange_BetterColour,\r\n      optionValue_dithering,\r\n      onOptionChange_dithering,\r\n      optionValue_preprocessingEnabled,\r\n      onOptionChange_PreProcessingEnabled,\r\n      preProcessingValue_brightness,\r\n      onOptionChange_PreProcessingBrightness,\r\n      preProcessingValue_contrast,\r\n      onOptionChange_PreProcessingContrast,\r\n      preProcessingValue_saturation,\r\n      onOptionChange_PreProcessingSaturation,\r\n      preProcessingValue_backgroundColourSelect,\r\n      onOptionChange_PreProcessingBackgroundColourSelect,\r\n      preProcessingValue_backgroundColour,\r\n      onOptionChange_PreProcessingBackgroundColour,\r\n      optionValue_extras_moreStaircasingOptions,\r\n      onOptionChange_extras_moreStaircasingOptions,\r\n    } = this.props;\r\n    const setting_mode = (\r\n      <React.Fragment>\r\n        <Tooltip tooltipText={getLocaleString(\"MAP-SETTINGS/MODE-TT\")}>\r\n          <b>\r\n            {getLocaleString(\"MAP-SETTINGS/MODE\")}\r\n            {\":\"}\r\n          </b>\r\n        </Tooltip>{\" \"}\r\n        <select onChange={onOptionChange_modeNBTOrMapdat} value={optionValue_modeNBTOrMapdat}>\r\n          {Object.values(MapModes).map((mapMode) => (\r\n            <option key={mapMode.uniqueId} value={mapMode.uniqueId}>\r\n              {mapMode.name}\r\n            </option>\r\n          ))}\r\n        </select>\r\n        <br />\r\n      </React.Fragment>\r\n    );\r\n    const setting_version = (\r\n      <React.Fragment>\r\n        <Tooltip tooltipText={getLocaleString(\"MAP-SETTINGS/VERSION-TT\")}>\r\n          <b>\r\n            {getLocaleString(\"MAP-SETTINGS/VERSION\")}\r\n            {\":\"}\r\n          </b>\r\n        </Tooltip>{\" \"}\r\n        <select value={optionValue_version.MCVersion} onChange={onOptionChange_version}>\r\n          {Object.values(SupportedVersions).map((supportedVersion) => (\r\n            <option key={supportedVersion.MCVersion} value={supportedVersion.MCVersion}>\r\n              {supportedVersion.MCVersion}\r\n            </option>\r\n          ))}\r\n        </select>\r\n        <br />\r\n      </React.Fragment>\r\n    );\r\n    const setting_mapSize = (\r\n      <React.Fragment>\r\n        <b>\r\n          {getLocaleString(\"MAP-SETTINGS/MAP-SIZE\")}\r\n          {\":\"}\r\n        </b>{\" \"}\r\n        <BufferedNumberInput\r\n          min=\"1\"\r\n          max={null}\r\n          step=\"1\"\r\n          value={optionValue_mapSize_x}\r\n          validators={[(t) => !isNaN(t), (t) => t > 0]}\r\n          onValidInput={onOptionChange_mapSize_x}\r\n          style={{ width: \"2em\" }}\r\n        />\r\n        x\r\n        <BufferedNumberInput\r\n          min=\"1\"\r\n          max={null}\r\n          step=\"1\"\r\n          value={optionValue_mapSize_y}\r\n          validators={[(t) => !isNaN(t), (t) => t > 0]}\r\n          onValidInput={onOptionChange_mapSize_y}\r\n          style={{ width: \"2em\" }}\r\n        />\r\n        <br />\r\n      </React.Fragment>\r\n    );\r\n    let setting_crop = (\r\n      <tr>\r\n        <th>\r\n          <Tooltip tooltipText={getLocaleString(\"MAP-SETTINGS/CROP/TITLE-TT\")}>\r\n            <b>\r\n              {getLocaleString(\"MAP-SETTINGS/CROP/TITLE\")}\r\n              {\":\"}\r\n            </b>\r\n          </Tooltip>{\" \"}\r\n        </th>\r\n        <td>\r\n          <select onChange={onOptionChange_cropImage} value={optionValue_cropImage}>\r\n            {Object.values(CropModes).map((cropMode) => (\r\n              <option key={cropMode.uniqueId} value={cropMode.uniqueId}>\r\n                {getLocaleString(cropMode.localeKey)}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </td>\r\n        <td />\r\n      </tr>\r\n    );\r\n    let setting_crop_zoom = null;\r\n    let setting_crop_percent_x = null;\r\n    let setting_crop_percent_y = null;\r\n    if (optionValue_cropImage === CropModes.MANUAL.uniqueId) {\r\n      setting_crop_zoom = (\r\n        <tr>\r\n          <th>\r\n            <b>\r\n              {getLocaleString(\"MAP-SETTINGS/CROP/ZOOM\")}\r\n              {\":\"}\r\n            </b>{\" \"}\r\n          </th>\r\n          <td>\r\n            <input\r\n              type=\"range\"\r\n              min=\"10\"\r\n              max=\"50\"\r\n              value={optionValue_cropImage_zoom}\r\n              onChange={(e) => onOptionChange_cropImage_zoom(parseInt(e.target.value))}\r\n            />\r\n          </td>\r\n          <td />\r\n        </tr>\r\n      );\r\n      setting_crop_percent_x = (\r\n        <tr>\r\n          <th>\r\n            <b>{\"X:\"}</b>{\" \"}\r\n          </th>\r\n          <td>\r\n            <input\r\n              type=\"range\"\r\n              min=\"0\"\r\n              max=\"100\"\r\n              value={optionValue_cropImage_percent_x}\r\n              onChange={(e) => onOptionChange_cropImage_percent_x(parseInt(e.target.value))}\r\n            />\r\n          </td>\r\n          <td>\r\n            <BufferedNumberInput\r\n              min=\"0\"\r\n              max=\"100\"\r\n              step=\"1\"\r\n              value={optionValue_cropImage_percent_x}\r\n              validators={[(t) => !isNaN(t), (t) => t >= 0, (t) => t <= 100]}\r\n              onValidInput={onOptionChange_cropImage_percent_x}\r\n              style={{ width: \"3em\" }}\r\n            />\r\n          </td>\r\n        </tr>\r\n      );\r\n      setting_crop_percent_y = (\r\n        <tr>\r\n          <th>\r\n            <b>{\"Y:\"}</b>{\" \"}\r\n          </th>\r\n          <td>\r\n            <input\r\n              type=\"range\"\r\n              min=\"0\"\r\n              max=\"100\"\r\n              value={optionValue_cropImage_percent_y}\r\n              onChange={(e) => onOptionChange_cropImage_percent_y(parseInt(e.target.value))}\r\n            />\r\n          </td>\r\n          <td>\r\n            <BufferedNumberInput\r\n              min=\"0\"\r\n              max=\"100\"\r\n              step=\"1\"\r\n              value={optionValue_cropImage_percent_y}\r\n              validators={[(t) => !isNaN(t), (t) => t >= 0, (t) => t <= 100]}\r\n              onValidInput={onOptionChange_cropImage_percent_y}\r\n              style={{ width: \"3em\" }}\r\n            />\r\n          </td>\r\n        </tr>\r\n      );\r\n    }\r\n    let settingGroup_cropping = (\r\n      <div className={optionValue_cropImage === CropModes.MANUAL.uniqueId ? \"settingsGroup\" : null}>\r\n        <table>\r\n          <tbody>\r\n            {setting_crop}\r\n            {setting_crop_zoom}\r\n            {setting_crop_percent_x}\r\n            {setting_crop_percent_y}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    );\r\n    const setting_grid = (\r\n      <React.Fragment>\r\n        <Tooltip tooltipText={getLocaleString(\"MAP-SETTINGS/GRID-OVERLAY-TT\")}>\r\n          <b>\r\n            {getLocaleString(\"MAP-SETTINGS/GRID-OVERLAY\")}\r\n            {\":\"}\r\n          </b>\r\n        </Tooltip>{\" \"}\r\n        <input type=\"checkbox\" checked={optionValue_showGridOverlay} onChange={onOptionChange_showGridOverlay} />\r\n        <br />\r\n      </React.Fragment>\r\n    );\r\n    const setting_staircasing = (\r\n      <React.Fragment>\r\n        <Tooltip tooltipText={getLocaleString(\"MAP-SETTINGS/3D/TITLE-TT\")}>\r\n          <b>\r\n            {getLocaleString(\"MAP-SETTINGS/3D/TITLE\")}\r\n            {\":\"}\r\n          </b>\r\n        </Tooltip>{\" \"}\r\n        <select onChange={onOptionChange_staircasing} value={optionValue_staircasing}>\r\n          {Object.values(\r\n            optionValue_modeNBTOrMapdat === MapModes.SCHEMATIC_NBT.uniqueId ? MapModes.SCHEMATIC_NBT.staircaseModes : MapModes.MAPDAT.staircaseModes\r\n          )\r\n            .filter((staircaseMode) => optionValue_extras_moreStaircasingOptions || !staircaseMode.extra)\r\n            .map((staircaseMode) => (\r\n              <option key={staircaseMode.uniqueId} value={staircaseMode.uniqueId}>\r\n                {getLocaleString(staircaseMode.localeKey)}\r\n              </option>\r\n            ))}\r\n        </select>\r\n        <br />\r\n      </React.Fragment>\r\n    );\r\n    let settings_mapModeConditional;\r\n    if (optionValue_modeNBTOrMapdat === MapModes.SCHEMATIC_NBT.uniqueId) {\r\n      settings_mapModeConditional = (\r\n        <React.Fragment>\r\n          <b>\r\n            {getLocaleString(\"MAP-SETTINGS/NBT-SPECIFIC/WHERE-SUPPORT-BLOCKS/TITLE\")}\r\n            {\":\"}\r\n          </b>{\" \"}\r\n          <select value={optionValue_whereSupportBlocks} onChange={onOptionChange_WhereSupportBlocks}>\r\n            {Object.values(WhereSupportBlocksModes).map((whereSupportBlocksMode) => (\r\n              <option key={whereSupportBlocksMode.uniqueId} value={whereSupportBlocksMode.uniqueId}>\r\n                {getLocaleString(whereSupportBlocksMode.localeKey)}\r\n              </option>\r\n            ))}\r\n          </select>\r\n          <br />\r\n          <b>\r\n            {getLocaleString(\"MAP-SETTINGS/NBT-SPECIFIC/SUPPORT-BLOCK-TO-ADD\")}\r\n            {\":\"}\r\n          </b>{\" \"}\r\n          <AutoCompleteInputBlockToAdd\r\n            coloursJSON={coloursJSON}\r\n            value={optionValue_supportBlock}\r\n            setValue={setOption_SupportBlock}\r\n            optionValue_version={optionValue_version}\r\n          />\r\n          <br />\r\n        </React.Fragment>\r\n      );\r\n    } else {\r\n      let setting_transparency = (\r\n        <tr>\r\n          <th>\r\n            <Tooltip tooltipText={getLocaleString(\"MAP-SETTINGS/MAPDAT-SPECIFIC/TRANSPARENCY-TT\")}>\r\n              <b>\r\n                {getLocaleString(\"MAP-SETTINGS/MAPDAT-SPECIFIC/TRANSPARENCY\")}\r\n                {\":\"}\r\n              </b>\r\n            </Tooltip>{\" \"}\r\n          </th>\r\n          <td>\r\n            <input type=\"checkbox\" checked={optionValue_transparency} onChange={onOptionChange_transparency} />\r\n          </td>\r\n          <td />\r\n        </tr>\r\n      );\r\n      let setting_transparencyTolerance = null;\r\n      if (optionValue_transparency) {\r\n        setting_transparencyTolerance = (\r\n          <tr>\r\n            <th>\r\n              <b>\r\n                {getLocaleString(\"MAP-SETTINGS/MAPDAT-SPECIFIC/TRANSPARENCY-TOLERANCE\")}\r\n                {\":\"}\r\n              </b>{\" \"}\r\n            </th>\r\n            <td>\r\n              <input\r\n                type=\"range\"\r\n                min=\"0\"\r\n                max=\"256\"\r\n                value={optionValue_transparencyTolerance}\r\n                onChange={(e) => onOptionChange_transparencyTolerance(parseInt(e.target.value))}\r\n              />\r\n            </td>\r\n            <td>\r\n              <BufferedNumberInput\r\n                min=\"0\"\r\n                max=\"256\"\r\n                step=\"1\"\r\n                value={optionValue_transparencyTolerance}\r\n                validators={[(t) => !isNaN(t), (t) => t >= 0, (t) => t <= 256]}\r\n                onValidInput={onOptionChange_transparencyTolerance}\r\n                style={{ width: \"3em\" }}\r\n              />\r\n            </td>\r\n          </tr>\r\n        );\r\n      }\r\n      let settingGroup_transparency = (\r\n        <div className={optionValue_transparency ? \"settingsGroup\" : null}>\r\n          <table>\r\n            <tbody>\r\n              {setting_transparency}\r\n              {setting_transparencyTolerance}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      );\r\n      let setting_mapdatFilenameUseId = (\r\n        <tr>\r\n          <th>\r\n            <Tooltip tooltipText={getLocaleString(\"MAP-SETTINGS/MAPDAT-SPECIFIC/MAPDAT-FILENAME-USE-ID-TT\")}>\r\n              <b>\r\n                {getLocaleString(\"MAP-SETTINGS/MAPDAT-SPECIFIC/MAPDAT-FILENAME-USE-ID\")}\r\n                {\":\"}\r\n              </b>\r\n            </Tooltip>{\" \"}\r\n          </th>\r\n          <td>\r\n            <input type=\"checkbox\" checked={optionValue_mapdatFilenameUseId} onChange={onOptionChange_mapdatFilenameUseId} />\r\n          </td>\r\n          <td />\r\n          <td />\r\n        </tr>\r\n      );\r\n      let setting_mapdatFilenameIdStart = null;\r\n      if (optionValue_mapdatFilenameUseId) {\r\n        setting_mapdatFilenameIdStart = (\r\n          <tr>\r\n            <th>\r\n              <b>\r\n                {getLocaleString(\"MAP-SETTINGS/MAPDAT-SPECIFIC/MAPDAT-FILENAME-ID-RANGE\")}\r\n                {\":\"}\r\n              </b>{\" \"}\r\n            </th>\r\n            <td>\r\n              <BufferedNumberInput\r\n                min=\"0\"\r\n                step=\"1\"\r\n                value={optionValue_mapdatFilenameIdStart}\r\n                validators={[(t) => !isNaN(t), (t) => t >= 0]}\r\n                onValidInput={onOptionChange_mapdatFilenameIdStart}\r\n                style={{ width: \"3em\" }}\r\n              />\r\n            </td>\r\n            <td>\r\n              <b>{\"-\"}</b>\r\n            </td>\r\n            <td>\r\n              <BufferedNumberInput\r\n                value={-1 + optionValue_mapdatFilenameIdStart + optionValue_mapSize_x * optionValue_mapSize_y}\r\n                disabled={true}\r\n                style={{ width: \"3em\" }}\r\n              />\r\n            </td>\r\n          </tr>\r\n        );\r\n      }\r\n      let settingGroup_mapdatFilename = (\r\n        <div className={optionValue_mapdatFilenameUseId ? \"settingsGroup\" : null}>\r\n          <table>\r\n            <tbody>\r\n              {setting_mapdatFilenameUseId}\r\n              {setting_mapdatFilenameIdStart}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      );\r\n      settings_mapModeConditional = (\r\n        <React.Fragment>\r\n          {settingGroup_transparency}\r\n          {settingGroup_mapdatFilename}\r\n        </React.Fragment>\r\n      );\r\n    }\r\n    const setting_betterColour = (\r\n      <React.Fragment>\r\n        <Tooltip tooltipText={getLocaleString(\"MAP-SETTINGS/BETTER-COLOUR-TT\")}>\r\n          <b>\r\n            {getLocaleString(\"MAP-SETTINGS/BETTER-COLOUR\")}\r\n            {\":\"}\r\n          </b>\r\n        </Tooltip>{\" \"}\r\n        <input type=\"checkbox\" checked={optionValue_betterColour} onChange={onOptionChange_BetterColour} />\r\n        <br />\r\n      </React.Fragment>\r\n    );\r\n    const setting_dithering = (\r\n      <React.Fragment>\r\n        <Tooltip tooltipText={getLocaleString(\"MAP-SETTINGS/DITHERING/TITLE-TT\")}>\r\n          <b>\r\n            {getLocaleString(\"MAP-SETTINGS/DITHERING/TITLE\")}\r\n            {\":\"}\r\n          </b>\r\n        </Tooltip>{\" \"}\r\n        <select value={optionValue_dithering} onChange={onOptionChange_dithering}>\r\n          {Object.keys(DitherMethods).map((ditherMethodKey) => (\r\n            <option key={DitherMethods[ditherMethodKey][\"uniqueId\"]} value={DitherMethods[ditherMethodKey][\"uniqueId\"]}>\r\n              {\"localeKey\" in DitherMethods[ditherMethodKey]\r\n                ? getLocaleString(DitherMethods[ditherMethodKey][\"localeKey\"])\r\n                : DitherMethods[ditherMethodKey][\"name\"]}\r\n            </option>\r\n          ))}\r\n        </select>\r\n        <br />\r\n      </React.Fragment>\r\n    );\r\n    const setting_preprocessing = (\r\n      <tr>\r\n        <th>\r\n          <b>\r\n            {getLocaleString(\"MAP-SETTINGS/PREPROCESSING/ENABLE\")}\r\n            {\":\"}\r\n          </b>{\" \"}\r\n          <input type=\"checkbox\" checked={optionValue_preprocessingEnabled} onChange={onOptionChange_PreProcessingEnabled} />\r\n        </th>\r\n        <td />\r\n        <td />\r\n      </tr>\r\n    );\r\n    const setting_preprocessing_brightness = (\r\n      <tr>\r\n        <th>\r\n          <b>\r\n            {getLocaleString(\"MAP-SETTINGS/PREPROCESSING/BRIGHTNESS\")}\r\n            {\":\"}\r\n          </b>{\" \"}\r\n        </th>\r\n        <td>\r\n          <input\r\n            type=\"range\"\r\n            min=\"0\"\r\n            max=\"200\"\r\n            value={preProcessingValue_brightness}\r\n            onChange={(e) => onOptionChange_PreProcessingBrightness(parseInt(e.target.value))}\r\n            disabled={!optionValue_preprocessingEnabled}\r\n          />\r\n        </td>\r\n        <td>\r\n          <BufferedNumberInput\r\n            min=\"0\"\r\n            max=\"200\"\r\n            step=\"1\"\r\n            value={preProcessingValue_brightness}\r\n            validators={[(t) => !isNaN(t), (t) => t >= 0, (t) => t <= 200]}\r\n            onValidInput={onOptionChange_PreProcessingBrightness}\r\n            disabled={!optionValue_preprocessingEnabled}\r\n            style={{ width: \"3em\" }}\r\n          />\r\n        </td>\r\n      </tr>\r\n    );\r\n    const setting_preprocessing_contrast = (\r\n      <tr>\r\n        <th>\r\n          <b>\r\n            {getLocaleString(\"MAP-SETTINGS/PREPROCESSING/CONTRAST\")}\r\n            {\":\"}\r\n          </b>{\" \"}\r\n        </th>\r\n        <td>\r\n          <input\r\n            type=\"range\"\r\n            min=\"0\"\r\n            max=\"200\"\r\n            value={preProcessingValue_contrast}\r\n            onChange={(e) => onOptionChange_PreProcessingContrast(parseInt(parseInt(e.target.value)))}\r\n            disabled={!optionValue_preprocessingEnabled}\r\n          />\r\n        </td>\r\n        <td>\r\n          <BufferedNumberInput\r\n            min=\"0\"\r\n            max=\"200\"\r\n            step=\"1\"\r\n            value={preProcessingValue_contrast}\r\n            validators={[(t) => !isNaN(t), (t) => t >= 0, (t) => t <= 200]}\r\n            onValidInput={onOptionChange_PreProcessingContrast}\r\n            disabled={!optionValue_preprocessingEnabled}\r\n            style={{ width: \"3em\" }}\r\n          />\r\n        </td>\r\n      </tr>\r\n    );\r\n    const setting_preprocessing_saturation = (\r\n      <tr>\r\n        <th>\r\n          <b>\r\n            {getLocaleString(\"MAP-SETTINGS/PREPROCESSING/SATURATION\")}\r\n            {\":\"}\r\n          </b>{\" \"}\r\n        </th>\r\n        <td>\r\n          <input\r\n            type=\"range\"\r\n            min=\"0\"\r\n            max=\"200\"\r\n            value={preProcessingValue_saturation}\r\n            onChange={(e) => onOptionChange_PreProcessingSaturation(parseInt(e.target.value))}\r\n            disabled={!optionValue_preprocessingEnabled}\r\n          />\r\n        </td>\r\n        <td>\r\n          <BufferedNumberInput\r\n            min=\"0\"\r\n            max=\"200\"\r\n            step=\"1\"\r\n            value={preProcessingValue_saturation}\r\n            validators={[(t) => !isNaN(t), (t) => t >= 0, (t) => t <= 200]}\r\n            onValidInput={onOptionChange_PreProcessingSaturation}\r\n            disabled={!optionValue_preprocessingEnabled}\r\n            style={{ width: \"3em\" }}\r\n          />\r\n        </td>\r\n      </tr>\r\n    );\r\n    const setting_preprocessing_background = (\r\n      <tr>\r\n        <th>\r\n          <Tooltip tooltipText={getLocaleString(\"MAP-SETTINGS/PREPROCESSING/BACKGROUND/TITLE-TT\")}>\r\n            <b>\r\n              {getLocaleString(\"MAP-SETTINGS/PREPROCESSING/BACKGROUND/TITLE\")}\r\n              {\":\"}\r\n            </b>\r\n          </Tooltip>{\" \"}\r\n        </th>\r\n        <td>\r\n          <select\r\n            onChange={onOptionChange_PreProcessingBackgroundColourSelect}\r\n            value={preProcessingValue_backgroundColourSelect}\r\n            disabled={!optionValue_preprocessingEnabled}\r\n          >\r\n            {Object.values(BackgroundColourModes).map((backgroundColourMode) => (\r\n              <option key={backgroundColourMode.uniqueId} value={backgroundColourMode.uniqueId}>\r\n                {getLocaleString(backgroundColourMode.localeKey)}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </td>\r\n      </tr>\r\n    );\r\n    const setting_preprocessing_backgroundColour = (\r\n      <tr>\r\n        <th>\r\n          <b>\r\n            {getLocaleString(\"MAP-SETTINGS/PREPROCESSING/BACKGROUND-COLOUR\")}\r\n            {\":\"}\r\n          </b>{\" \"}\r\n        </th>\r\n        <td>\r\n          <input\r\n            type=\"color\"\r\n            value={preProcessingValue_backgroundColour}\r\n            onChange={onOptionChange_PreProcessingBackgroundColour}\r\n            disabled={!optionValue_preprocessingEnabled || preProcessingValue_backgroundColourSelect === BackgroundColourModes.OFF.uniqueId}\r\n          />\r\n        </td>\r\n      </tr>\r\n    );\r\n    const settingGroup_preprocessing = (\r\n      <React.Fragment>\r\n        <details>\r\n          <summary>{getLocaleString(\"MAP-SETTINGS/PREPROCESSING/TITLE\")}</summary>\r\n          <div className={optionValue_preprocessingEnabled ? \"settingsGroup\" : null}>\r\n            <table>\r\n              <tbody>\r\n                {setting_preprocessing}\r\n                {setting_preprocessing_brightness}\r\n                {setting_preprocessing_contrast}\r\n                {setting_preprocessing_saturation}\r\n                {setting_preprocessing_background}\r\n                {setting_preprocessing_backgroundColour}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </details>\r\n      </React.Fragment>\r\n    );\r\n    const setting_extras_moreStaircasingOptions = (\r\n      <tr>\r\n        <th>\r\n          <Tooltip tooltipText={getLocaleString(\"MAP-SETTINGS/EXTRAS/MORE-STAIRCASING-OPTIONS-TT\")}>\r\n            <b>\r\n              {getLocaleString(\"MAP-SETTINGS/EXTRAS/MORE-STAIRCASING-OPTIONS\")}\r\n              {\":\"}\r\n            </b>\r\n          </Tooltip>{\" \"}\r\n        </th>\r\n        <td>\r\n          <input type=\"checkbox\" checked={optionValue_extras_moreStaircasingOptions} onChange={onOptionChange_extras_moreStaircasingOptions} />\r\n        </td>\r\n      </tr>\r\n    );\r\n    const settingGroup_extras = (\r\n      <React.Fragment>\r\n        <details>\r\n          <summary>{getLocaleString(\"MAP-SETTINGS/EXTRAS/TITLE\")}</summary>\r\n          <table>\r\n            <tbody>{setting_extras_moreStaircasingOptions}</tbody>\r\n          </table>\r\n        </details>\r\n      </React.Fragment>\r\n    );\r\n    const settingsDiv = (\r\n      <div className=\"section settingsDiv\">\r\n        <h2>{getLocaleString(\"MAP-SETTINGS/TITLE\")}</h2>\r\n        {setting_mode}\r\n        {setting_version}\r\n        {setting_mapSize}\r\n        {settingGroup_cropping}\r\n        {setting_grid}\r\n        {setting_staircasing}\r\n        {settings_mapModeConditional}\r\n        {setting_betterColour}\r\n        {setting_dithering}\r\n        {settingGroup_preprocessing}\r\n        {settingGroup_extras}\r\n      </div>\r\n    );\r\n    return settingsDiv;\r\n  }\r\n}\r\n\r\nexport default MapSettings;\r\n","import React, { Component } from \"react\";\r\n\r\nimport Tooltip from \"../tooltip\";\r\n\r\nimport BlockImage from \"./blockImage\";\r\n\r\nimport \"./materials.css\";\r\n\r\nclass Materials extends Component {\r\n  state = { onlyMaxPerSplit: false };\r\n\r\n  onOnlyMaxPerSplitChange = () => {\r\n    this.setState((currentState) => ({\r\n      // nb this method of passing currentState instead of using this.state... is prefered; TODO neaten up controller uses\r\n      onlyMaxPerSplit: !currentState.onlyMaxPerSplit,\r\n    }));\r\n  };\r\n\r\n  getMaterialsCount_nonZeroMaterialsItems() {\r\n    const { coloursJSON, currentMaterialsData } = this.props;\r\n    const { onlyMaxPerSplit } = this.state;\r\n    const materialsCount = {};\r\n    for (const colourSetId of Object.keys(coloursJSON)) {\r\n      materialsCount[colourSetId] = 0;\r\n    }\r\n    for (const row of currentMaterialsData.maps) {\r\n      for (const map of row) {\r\n        for (const [colourSetId, materialCount] of Object.entries(map.materials)) {\r\n          if (onlyMaxPerSplit) {\r\n            materialsCount[colourSetId] = Math.max(materialsCount[colourSetId], materialCount);\r\n          } else {\r\n            materialsCount[colourSetId] += materialCount;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return Object.entries(materialsCount)\r\n      .filter(([_, value]) => value !== 0)\r\n      .sort((first, second) => {\r\n        return second[1] - first[1];\r\n      });\r\n  }\r\n\r\n  getMaterialsCount_supportBlock() {\r\n    const { currentMaterialsData } = this.props;\r\n    const { onlyMaxPerSplit } = this.state;\r\n    let supportBlockCount = 0;\r\n    currentMaterialsData.maps.forEach((row) => {\r\n      row.forEach((map) => {\r\n        const count = map.supportBlockCount;\r\n        if (onlyMaxPerSplit) {\r\n          supportBlockCount = Math.max(supportBlockCount, count);\r\n        } else {\r\n          supportBlockCount += count;\r\n        }\r\n      });\r\n    });\r\n    return supportBlockCount;\r\n  }\r\n\r\n  formatMaterialCount = (count) => {\r\n    const numberOfStacks = Math.floor(count / 64);\r\n    const remainder = count % 64;\r\n    const numberOfShulkers = count / 1728;\r\n    return `${count.toString()}${\r\n      numberOfStacks !== 0\r\n        ? ` (${numberOfStacks.toString()}x64${remainder !== 0 ? ` + ${remainder.toString()}` : \"\"}${\r\n            numberOfShulkers >= 1 ? `, ${numberOfShulkers.toFixed(2)} SB` : \"\"\r\n          })`\r\n        : \"\"\r\n    }`;\r\n  };\r\n\r\n  colourSetIdAndBlockIdFromNBTName(blockName) {\r\n    const { coloursJSON, optionValue_version } = this.props;\r\n    for (const [colourSetId, colourSet] of Object.entries(coloursJSON)) {\r\n      for (const [blockId, block] of Object.entries(colourSet.blocks)) {\r\n        if (!(optionValue_version.MCVersion in block.validVersions)) {\r\n          continue;\r\n        }\r\n        let blockNBTData = block.validVersions[optionValue_version.MCVersion];\r\n        if (typeof blockNBTData === \"string\") {\r\n          // this is of the form eg \"&1.12.2\"\r\n          blockNBTData = block.validVersions[blockNBTData.slice(1)];\r\n        }\r\n        if (\r\n          Object.keys(blockNBTData.NBTArgs).length === 0 && // no exotic blocks for noobline\r\n          blockName.toLowerCase() === blockNBTData.NBTName.toLowerCase()\r\n        ) {\r\n          return { colourSetId, blockId };\r\n        }\r\n      }\r\n    }\r\n    return null; // if block not found\r\n  }\r\n\r\n  render() {\r\n    const { getLocaleString, coloursJSON, optionValue_supportBlock, currentMaterialsData } = this.props;\r\n    const { onlyMaxPerSplit } = this.state;\r\n    const nonZeroMaterialsItems = this.getMaterialsCount_nonZeroMaterialsItems();\r\n    const supportBlockCount = this.getMaterialsCount_supportBlock();\r\n    const supportBlockIds = this.colourSetIdAndBlockIdFromNBTName(optionValue_supportBlock);\r\n    return (\r\n      <div className=\"section materialsDiv\">\r\n        <h2>{getLocaleString(\"MATERIALS/TITLE\")}</h2>\r\n        <Tooltip tooltipText={getLocaleString(\"MATERIALS/SHOW-PER-SPLIT-TT\")}>\r\n          <b>\r\n            {getLocaleString(\"MATERIALS/SHOW-PER-SPLIT\")}\r\n            {\":\"}\r\n          </b>\r\n        </Tooltip>{\" \"}\r\n        <input type=\"checkbox\" checked={onlyMaxPerSplit} onChange={this.onOnlyMaxPerSplitChange} />\r\n        <br />\r\n        <table id=\"materialtable\">\r\n          <tbody>\r\n            <tr>\r\n              <th>{getLocaleString(\"MATERIALS/BLOCK\")}</th>\r\n              <th>{getLocaleString(\"MATERIALS/AMOUNT\")}</th>\r\n            </tr>\r\n            {supportBlockCount !== 0 && (\r\n              <tr>\r\n                <th>\r\n                  <Tooltip tooltipText={getLocaleString(\"MATERIALS/PLACEHOLDER-BLOCK-TT\")}>\r\n                    <BlockImage\r\n                      getLocaleString={getLocaleString}\r\n                      coloursJSON={coloursJSON}\r\n                      colourSetId={supportBlockIds === null ? \"64\" : supportBlockIds.colourSetId}\r\n                      blockId={supportBlockIds === null ? \"2\" : supportBlockIds.blockId}\r\n                    />\r\n                  </Tooltip>\r\n                </th>\r\n                <th>{this.formatMaterialCount(supportBlockCount)}</th>\r\n              </tr>\r\n            )}\r\n            {nonZeroMaterialsItems.map(([colourSetId, materialCount]) => {\r\n              const blockId = currentMaterialsData.currentSelectedBlocks[colourSetId];\r\n              return (\r\n                <tr key={colourSetId}>\r\n                  <th>\r\n                    <Tooltip tooltipText={coloursJSON[colourSetId].blocks[blockId].displayName}>\r\n                      <BlockImage coloursJSON={coloursJSON} colourSetId={colourSetId} blockId={blockId} />\r\n                    </Tooltip>\r\n                  </th>\r\n                  <th>{this.formatMaterialCount(materialCount)}</th>\r\n                </tr>\r\n              );\r\n            })}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Materials;\r\n","/*\r\n  A mapping from type names to NBT type numbers.\r\n  This is NOT just an enum, these values have to stay as they are\r\n  https://minecraft.fandom.com/wiki/NBT_format#TAG_definition\r\n*/\r\nconst TagTypes = {\r\n  end: 0,\r\n  byte: 1,\r\n  short: 2,\r\n  int: 3,\r\n  long: 4,\r\n  float: 5,\r\n  double: 6,\r\n  byteArray: 7,\r\n  string: 8,\r\n  list: 9,\r\n  compound: 10,\r\n  intArray: 11,\r\n  longArray: 12,\r\n};\r\n\r\nclass NBTReader {\r\n  constructor() {\r\n    if (typeof ArrayBuffer === \"undefined\") {\r\n      throw new Error(\"Missing required type ArrayBuffer\");\r\n    }\r\n    if (typeof DataView === \"undefined\") {\r\n      throw new Error(\"Missing required type DataView\");\r\n    }\r\n    if (typeof Uint8Array === \"undefined\") {\r\n      throw new Error(\"Missing required type Uint8Array\");\r\n    }\r\n    this.buffer = null;\r\n    this.dataView = null;\r\n    this.arrayView = null;\r\n    this.offset = null;\r\n  }\r\n\r\n  loadBuffer(buffer) {\r\n    this.buffer = buffer;\r\n    this.dataView = new DataView(this.buffer);\r\n    this.arrayView = new Uint8Array(this.buffer);\r\n    this.offset = 0;\r\n  }\r\n\r\n  decodeUTF8(bytes) {\r\n    let codepoints = [];\r\n    for (let i = 0; i < bytes.length; i++) {\r\n      const byte = bytes[i];\r\n      if ((byte & 0x80) === 0) {\r\n        // single byte 0x0001 to 0x007F\r\n        codepoints.push(byte);\r\n      } else if ((byte & 0xe0) === 0xc0) {\r\n        // two bytes for 0x0000 and 0x0080 to 0x07FF\r\n        codepoints.push(((byte & 0x1f) << 6) | (bytes[i + 1] & 0x3f));\r\n        i += 1;\r\n      } else if ((byte & 0xf0) === 0xe0) {\r\n        // three bytes for 0x0800 to 0xFFFF\r\n        codepoints.push(((byte & 0x0f) << 12) | ((bytes[i + 1] & 0x3f) << 6) | (bytes[i + 2] & 0x3f));\r\n        i += 2;\r\n      }\r\n    }\r\n    return String.fromCharCode.apply(null, codepoints);\r\n  }\r\n\r\n  read(dataType, size) {\r\n    const value = this.dataView[`get${dataType}`](this.offset);\r\n    this.offset += size;\r\n    return value;\r\n  }\r\n\r\n  readByType(dataType) {\r\n    switch (dataType) {\r\n      case TagTypes.end: {\r\n        return this.readByType(TagTypes.byte);\r\n      }\r\n      case TagTypes.byte: {\r\n        return this.read(\"Int8\", 1);\r\n      }\r\n      case TagTypes.short: {\r\n        return this.read(\"Int16\", 2);\r\n      }\r\n      case TagTypes.int: {\r\n        return this.read(\"Int32\", 4);\r\n      }\r\n      case TagTypes.long: {\r\n        // NB: special: JS doesn't support native 64 bit ints; returns an array of two 32 bit ints\r\n        return [this.readByType(TagTypes.int), this.readByType(TagTypes.int)];\r\n      }\r\n      case TagTypes.float: {\r\n        return this.read(\"Float32\", 4);\r\n      }\r\n      case TagTypes.double: {\r\n        return this.read(\"Float64\", 8);\r\n      }\r\n      case TagTypes.byteArray: {\r\n        const arrayLength = this.readByType(TagTypes.int);\r\n        const returnArray = this.arrayView.slice(this.offset, this.offset + arrayLength);\r\n        this.offset += arrayLength;\r\n        return returnArray;\r\n      }\r\n      case TagTypes.string: {\r\n        const string_bytes_length = this.readByType(TagTypes.short);\r\n        const string_bytes = this.arrayView.slice(this.offset, this.offset + string_bytes_length);\r\n        this.offset += string_bytes_length;\r\n        return this.decodeUTF8(string_bytes);\r\n      }\r\n      case TagTypes.list: {\r\n        const list_objectType = this.readByType(TagTypes.byte);\r\n        const list_length = this.readByType(TagTypes.int);\r\n        let returnObject = { type: list_objectType, value: [] };\r\n        for (let i = 0; i < list_length; i++) {\r\n          returnObject.value.push(this.readByType(list_objectType));\r\n        }\r\n        return returnObject;\r\n      }\r\n      case TagTypes.compound: {\r\n        let returnObject = {};\r\n        while (true) {\r\n          let tagType = this.readByType(TagTypes.byte);\r\n          if (tagType === TagTypes.end) {\r\n            break;\r\n          } else {\r\n            let key = this.readByType(TagTypes.string);\r\n            let value = this.readByType(tagType);\r\n            returnObject[key] = { type: tagType, value: value };\r\n          }\r\n        }\r\n        return returnObject;\r\n      }\r\n      case TagTypes.intArray: {\r\n        const returnArray = [];\r\n        const array_length = this.readByType(TagTypes.int);\r\n        for (let i = 0; i < array_length; i++) {\r\n          returnArray.push(this.readByType(TagTypes.int));\r\n        }\r\n        return returnArray;\r\n      }\r\n      case TagTypes.longArray: {\r\n        const returnArray = [];\r\n        const array_length = this.readByType(TagTypes.int);\r\n        for (let i = 0; i < array_length; i++) {\r\n          returnArray.push(this.readByType(TagTypes.long));\r\n          // NB this is an array of length 2 arrays of ints as specified in case:long\r\n        }\r\n        return returnArray;\r\n      }\r\n      default: {\r\n        throw new Error(`Unknown data type ${dataType}`);\r\n      }\r\n    }\r\n  }\r\n\r\n  getData() {\r\n    this.readByType(TagTypes.byte);\r\n    return {\r\n      name: this.readByType(TagTypes.string),\r\n      value: this.readByType(TagTypes.compound),\r\n    }; // NB this reads the top-level compound which does not have a terminating null byte\r\n  }\r\n}\r\n\r\nexport default NBTReader;\r\n","import React, { Component } from \"react\";\r\n\r\nimport BlockImage from \"../blockImage\";\r\n\r\nimport \"./waila.css\";\r\n\r\n// What Am I Looking At\r\n\r\nclass Waila extends Component {\r\n  render() {\r\n    const { getLocaleString, coloursJSON, selectedBlock, ...props_others } = this.props;\r\n    return (\r\n      <div className={\"viewOnline_waila\"} {...props_others}>\r\n        <h3>{`x: ${selectedBlock.x.toString()} y: ${selectedBlock.y.toString()} z: ${selectedBlock.z.toString()}`}</h3>\r\n        <BlockImage\r\n          getLocaleString={getLocaleString}\r\n          coloursJSON={coloursJSON}\r\n          colourSetId={selectedBlock.colourSetId.toString()}\r\n          blockId={selectedBlock.blockId.toString()}\r\n          style={{ verticalAlign: \"middle\" }}\r\n        />{\" \"}\r\n        {selectedBlock.colourSetId === 64 && selectedBlock.blockId === 2\r\n          ? getLocaleString(\"MATERIALS/PLACEHOLDER-BLOCK-TT\")\r\n          : coloursJSON[selectedBlock.colourSetId.toString()].blocks[selectedBlock.blockId.toString()].displayName}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Waila;\r\n","import React, { Component, createRef } from \"react\";\r\n\r\nimport Tooltip from \"../../tooltip\";\r\n\r\nimport MapModes from \"../json/mapModes.json\";\r\n\r\nimport IMG_Textures from \"../../../images/textures.png\";\r\n\r\nimport NBTReader from \"../nbtReader\";\r\nimport Waila from \"../viewOnlineCommon/waila\";\r\n\r\nimport \"./viewOnline2D.css\";\r\n\r\nclass ViewOnline2D extends Component {\r\n  state = {\r\n    viewOnline_NBT_decompressed: null,\r\n    selectedBlock: null,\r\n    zoomFactor: 1,\r\n    canvasOffset_x: 0,\r\n    canvasOffset_y: 0,\r\n  };\r\n\r\n  paletteIdToColourSetIdAndBlockId = [];\r\n  mouse = { x: 0, y: 0, down: false, movedSinceDown: null };\r\n\r\n  getNBTDecompressed() {\r\n    const { viewOnline_NBT } = this.props;\r\n    let nbtReader = new NBTReader();\r\n    nbtReader.loadBuffer(viewOnline_NBT);\r\n    const viewOnline_NBT_decompressed = nbtReader.getData();\r\n    return viewOnline_NBT_decompressed;\r\n  }\r\n\r\n  drawNBT() {\r\n    const { coloursJSON, optionValue_version, optionValue_mapSize_x, optionValue_mapSize_y, optionValue_staircasing } = this.props;\r\n    const { viewOnline_NBT_decompressed } = this.state;\r\n    const { canvasRef_viewOnline } = this;\r\n\r\n    this.paletteIdToColourSetIdAndBlockId = [];\r\n    const NBT_palette = viewOnline_NBT_decompressed.value.palette.value.value;\r\n    for (let paletteItem_index = 0; paletteItem_index < NBT_palette.length; paletteItem_index++) {\r\n      const paletteItem = NBT_palette[paletteItem_index];\r\n      let paletteItemFound = false;\r\n      for (const [colourSetId, colourSet] of Object.entries(coloursJSON)) {\r\n        if (paletteItemFound) {\r\n          break;\r\n        }\r\n        for (const [blockId, block] of Object.entries(colourSet.blocks)) {\r\n          if (paletteItemFound) {\r\n            break;\r\n          }\r\n          if (!(optionValue_version.MCVersion in block.validVersions)) {\r\n            continue;\r\n          }\r\n          let blockNBTData = block.validVersions[optionValue_version.MCVersion];\r\n          if (typeof blockNBTData === \"string\") {\r\n            // this is of the form eg \"&1.12.2\"\r\n            blockNBTData = block.validVersions[blockNBTData.slice(1)];\r\n          }\r\n          if (\r\n            paletteItem.Name.value === `minecraft:${blockNBTData.NBTName}` &&\r\n            ((!(\"Properties\" in paletteItem) && Object.keys(blockNBTData.NBTArgs).length === 0) ||\r\n              (\"Properties\" in paletteItem &&\r\n                Object.keys(paletteItem.Properties.value).length === Object.keys(blockNBTData.NBTArgs).length &&\r\n                Object.entries(blockNBTData.NBTArgs).every(([argKey, argValue]) => {\r\n                  return argKey in paletteItem.Properties.value && argValue === paletteItem.Properties.value[argKey].value;\r\n                })))\r\n          ) {\r\n            this.paletteIdToColourSetIdAndBlockId.push([parseInt(colourSetId), parseInt(blockId)]);\r\n            paletteItemFound = true;\r\n          }\r\n        }\r\n      }\r\n      if (!paletteItemFound) {\r\n        console.log(`Didn't find ${paletteItem.Name.value} in coloursJSON; using placeholder texture`);\r\n        this.paletteIdToColourSetIdAndBlockId.push([64, 2]);\r\n      }\r\n    }\r\n\r\n    const img_textures = new Image();\r\n    img_textures.onload = () => {\r\n      const canvasRef_viewOnline_ctx = canvasRef_viewOnline.current.getContext(\"2d\");\r\n      canvasRef_viewOnline_ctx.textAlign = \"right\";\r\n      canvasRef_viewOnline_ctx.textBaseline = \"alphabetic\";\r\n      canvasRef_viewOnline_ctx.font = \"16px kenpixel_mini_square\";\r\n      canvasRef_viewOnline_ctx.fillStyle = \"rgba(0, 0, 0, 1)\";\r\n      canvasRef_viewOnline_ctx.fillRect(0, 0, 33 * 128 * optionValue_mapSize_x, 33 * (128 * optionValue_mapSize_y + 1));\r\n      let currentY = null;\r\n      let processedNoobline = false;\r\n      for (const block of viewOnline_NBT_decompressed.value.blocks.value.value) {\r\n        const block_paletteId = block.state.value;\r\n        const block_coords = block.pos.value.value;\r\n        if (block_coords[2] === 0) {\r\n          if (processedNoobline) {\r\n            continue;\r\n          } else {\r\n            processedNoobline = true;\r\n            // since we ordered blocks by Z and Y in nbt.jsworker, the first block in the column is the highest block of the\r\n            // noobline pillar (the correct height for the map preview)\r\n          }\r\n        } else {\r\n          processedNoobline = false; // ready for next column\r\n          if (block_paletteId === NBT_palette.length - 1) {\r\n            // last palette entry is support / noobline. don't draw this except on the noobline\r\n            continue;\r\n          }\r\n        }\r\n        const [int_colourSetId, int_blockId] = this.paletteIdToColourSetIdAndBlockId[block_paletteId];\r\n        let int_colourSetId_toDraw, int_blockId_toDraw;\r\n        if (!(int_colourSetId === 64 && int_blockId === 2) && coloursJSON[int_colourSetId.toString()].blocks[int_blockId.toString()].presetIndex === \"CUSTOM\") {\r\n          // if not placeholder, and is a custom block, then draw colour on canvas\r\n          int_colourSetId_toDraw = 64;\r\n          int_blockId_toDraw = 5;\r\n          canvasRef_viewOnline_ctx.fillStyle = `rgb(${coloursJSON[int_colourSetId.toString()].tonesRGB.normal.join(\", \")})`;\r\n          canvasRef_viewOnline_ctx.fillRect(33 * block_coords[0], 33 * block_coords[2], 32, 32);\r\n        } else {\r\n          int_colourSetId_toDraw = int_colourSetId;\r\n          int_blockId_toDraw = int_blockId;\r\n        }\r\n        canvasRef_viewOnline_ctx.drawImage(\r\n          img_textures,\r\n          32 * int_blockId_toDraw,\r\n          32 * int_colourSetId_toDraw,\r\n          32,\r\n          32,\r\n          33 * block_coords[0],\r\n          33 * block_coords[2],\r\n          32,\r\n          32\r\n        );\r\n        if (block_coords[2] !== 0) {\r\n          if (block_coords[1] > currentY) {\r\n            canvasRef_viewOnline_ctx.fillStyle = \"rgba(0, 0, 32, 0.2)\";\r\n            for (let i = 0; i < 4; i++) {\r\n              canvasRef_viewOnline_ctx.fillRect(33 * block_coords[0], 33 * block_coords[2], 33, -2 * (i + 1));\r\n            }\r\n          } else if (block_coords[1] < currentY) {\r\n            canvasRef_viewOnline_ctx.fillStyle = \"rgba(0, 0, 32, 0.2)\";\r\n            for (let i = 0; i < 4; i++) {\r\n              canvasRef_viewOnline_ctx.fillRect(33 * block_coords[0], 33 * block_coords[2], 33, 2 * (i + 1));\r\n            }\r\n          }\r\n        }\r\n        currentY = block_coords[1];\r\n        canvasRef_viewOnline_ctx.strokeStyle = \"rgba(0, 0, 0, 1)\";\r\n        canvasRef_viewOnline_ctx.fillStyle = \"rgba(255, 255, 255, 1)\";\r\n        if (\r\n          [\r\n            MapModes.SCHEMATIC_NBT.staircaseModes.CLASSIC.uniqueId,\r\n            MapModes.SCHEMATIC_NBT.staircaseModes.VALLEY.uniqueId,\r\n            MapModes.MAPDAT.staircaseModes.ON.uniqueId,\r\n            MapModes.MAPDAT.staircaseModes.ON_UNOBTAINABLE.uniqueId,\r\n          ].includes(optionValue_staircasing)\r\n        ) {\r\n          canvasRef_viewOnline_ctx.strokeText(block_coords[1], 33 * block_coords[0] + 31, 33 * (block_coords[2] + 1) - 2, 31);\r\n          canvasRef_viewOnline_ctx.fillText(block_coords[1], 33 * block_coords[0] + 31, 33 * (block_coords[2] + 1) - 2, 31);\r\n        }\r\n      }\r\n      for (let whichChunk_x = 0; whichChunk_x < 8 * optionValue_mapSize_x; whichChunk_x++) {\r\n        for (let whichChunk_y = -1; whichChunk_y < 8 * optionValue_mapSize_y; whichChunk_y++) {\r\n          canvasRef_viewOnline_ctx.fillStyle = \"rgba(255, 0, 0, 1)\";\r\n          for (let x = 0; x < 16; x++) {\r\n            for (let y = 0; y < 16; y++) {\r\n              canvasRef_viewOnline_ctx.fillRect(33 * (16 * whichChunk_x + x) + 32, 33 * (16 * whichChunk_y + y + 1), 1, 33);\r\n              canvasRef_viewOnline_ctx.fillRect(33 * (16 * whichChunk_x + x), 33 * (16 * whichChunk_y + y + 1) + 32, 33, 1);\r\n            }\r\n          }\r\n          canvasRef_viewOnline_ctx.fillStyle = \"rgba(0, 0, 255, 1)\";\r\n          canvasRef_viewOnline_ctx.fillRect(33 * 16 * (whichChunk_x + 1) - 1, 33 * (16 * whichChunk_y + 1), 1, 33 * 16);\r\n          canvasRef_viewOnline_ctx.fillRect(33 * 16 * whichChunk_x, 33 * (16 * (whichChunk_y + 1) + 1) - 1, 33 * 16, 1);\r\n        }\r\n      }\r\n    };\r\n    img_textures.src = IMG_Textures;\r\n  }\r\n\r\n  handleScroll_document = function (e) {\r\n    e.preventDefault();\r\n  };\r\n\r\n  handleScroll_canvas = function (e) {\r\n    e.preventDefault();\r\n    const zoomMultiplier = 1.1;\r\n    const { offsetX, offsetY } = e;\r\n    const delta = e.wheelDelta ? e.wheelDelta : e.detail ? -e.detail : 0;\r\n    if (delta) {\r\n      this.setState((state) => {\r\n        return {\r\n          zoomFactor: delta > 0 ? state.zoomFactor * zoomMultiplier : state.zoomFactor / zoomMultiplier,\r\n          canvasOffset_x:\r\n            delta > 0 ? state.canvasOffset_x - (zoomMultiplier - 1) * offsetX : state.canvasOffset_x - ((1 - zoomMultiplier) * offsetX) / zoomMultiplier,\r\n          canvasOffset_y:\r\n            delta > 0 ? state.canvasOffset_y - (zoomMultiplier - 1) * offsetY : state.canvasOffset_y - ((1 - zoomMultiplier) * offsetY) / zoomMultiplier,\r\n        };\r\n      });\r\n    }\r\n  }.bind(this);\r\n\r\n  handleMouseDown = function (e) {\r\n    e.preventDefault();\r\n    this.mouse.x = parseInt(e.clientX);\r\n    this.mouse.y = parseInt(e.clientY);\r\n    this.mouse.down = true;\r\n    this.mouse.movedSinceDown = false;\r\n    document.addEventListener(\"mousemove\", this.handleMouseMove, { passive: false });\r\n  }.bind(this);\r\n\r\n  handleMouseUp = function (e) {\r\n    e.preventDefault();\r\n    this.mouse.down = false;\r\n    if (!this.mouse.movedSinceDown) {\r\n      if (e.target === this.canvasRef_viewOnline.current) {\r\n        const { optionValue_mapSize_x, optionValue_mapSize_y } = this.props;\r\n        const { viewOnline_NBT_decompressed } = this.state;\r\n        const { offsetX, offsetY } = e;\r\n        const canvas_width = e.target.clientWidth;\r\n        const canvas_height = e.target.clientHeight;\r\n        const block_x = Math.floor((offsetX * 128 * optionValue_mapSize_x) / canvas_width);\r\n        const block_z = Math.floor((offsetY * (128 * optionValue_mapSize_y + 1)) / canvas_height);\r\n        for (const block of viewOnline_NBT_decompressed.value.blocks.value.value) {\r\n          const block_coords = block.pos.value.value;\r\n          if (block_coords[0] === block_x && block_coords[2] === block_z) {\r\n            const block_paletteId = block.state.value;\r\n            const [selectedBlock_colourSetId, selectedBlock_blockId] = this.paletteIdToColourSetIdAndBlockId[block_paletteId];\r\n            this.setState({\r\n              selectedBlock: {\r\n                x: block_coords[0],\r\n                y: block_coords[1],\r\n                z: block_coords[2],\r\n                colourSetId: selectedBlock_colourSetId,\r\n                blockId: selectedBlock_blockId,\r\n              },\r\n            });\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    document.removeEventListener(\"mousemove\", this.handleMouseMove, { passive: false });\r\n  }.bind(this);\r\n\r\n  handleMouseMove = function (e) {\r\n    e.preventDefault();\r\n    if (!this.mouse.down) {\r\n      return;\r\n    }\r\n    const mouseMoved_x = parseInt(e.clientX - this.mouse.x);\r\n    const mouseMoved_y = parseInt(e.clientY - this.mouse.y);\r\n\r\n    if (Math.abs(mouseMoved_x) > 1 || Math.abs(mouseMoved_y) > 1) {\r\n      this.mouse.x = e.clientX;\r\n      this.mouse.y = e.clientY;\r\n      this.mouse.movedSinceDown = true;\r\n    }\r\n\r\n    this.setState((state) => {\r\n      return { canvasOffset_x: state.canvasOffset_x + mouseMoved_x, canvasOffset_y: state.canvasOffset_y + mouseMoved_y };\r\n    });\r\n  }.bind(this);\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.canvasRef_viewOnline = createRef();\r\n  }\r\n\r\n  componentDidMount() {\r\n    const viewOnline_NBT_decompressed = this.getNBTDecompressed();\r\n\r\n    this.setState({ viewOnline_NBT_decompressed }, () => {\r\n      this.drawNBT();\r\n      document.addEventListener(\"DOMMouseScroll\", this.handleScroll_canvas, { passive: false });\r\n      this.canvasRef_viewOnline.current.addEventListener(\"mousewheel\", this.handleScroll_canvas, { passive: false });\r\n      document.addEventListener(\"mousewheel\", this.handleScroll_document, { passive: false });\r\n      document.addEventListener(\"mousedown\", this.handleMouseDown, { passive: false });\r\n      document.addEventListener(\"mouseup\", this.handleMouseUp, { passive: false });\r\n    });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener(\"DOMMouseScroll\", this.handleScroll_canvas, { passive: false });\r\n    this.canvasRef_viewOnline.current.removeEventListener(\"mousewheel\", this.handleScroll_canvas, { passive: false });\r\n    document.removeEventListener(\"mousewheel\", this.handleScroll_document, { passive: false });\r\n    document.removeEventListener(\"mousedown\", this.handleMouseDown, { passive: false });\r\n    document.removeEventListener(\"mouseup\", this.handleMouseUp, { passive: false });\r\n  }\r\n\r\n  render() {\r\n    const { getLocaleString, coloursJSON, optionValue_mapSize_x, optionValue_mapSize_y, onGetViewOnlineNBT, onChooseViewOnline3D } = this.props;\r\n    const { viewOnline_NBT_decompressed, selectedBlock, zoomFactor } = this.state;\r\n    const { canvasOffset_x, canvasOffset_y } = this.state;\r\n\r\n    const component_controls = (\r\n      <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n        <h1 style={{ cursor: \"pointer\" }} onClick={() => onGetViewOnlineNBT(null)}>\r\n          ❌\r\n        </h1>\r\n        <h1 style={{ cursor: \"pointer\" }} onClick={onChooseViewOnline3D}>\r\n          3D\r\n        </h1>\r\n      </div>\r\n    );\r\n\r\n    let component_waila = null;\r\n    if (selectedBlock !== null) {\r\n      component_waila = <Waila coloursJSON={coloursJSON} getLocaleString={getLocaleString} selectedBlock={selectedBlock} />;\r\n    }\r\n\r\n    let component_size = null;\r\n    if (viewOnline_NBT_decompressed !== null) {\r\n      const [size_x, size_y, size_z] = viewOnline_NBT_decompressed.value.size.value.value;\r\n      component_size = (\r\n        <h2 style={{ marginRight: \"0.1em\" }}>\r\n          {getLocaleString(\"VIEW-ONLINE/SIZE\")}\r\n          {\": \"}\r\n          {size_x.toString()}\r\n          {\"x\"}\r\n          {size_y > 256 ? (\r\n            <Tooltip\r\n              tooltipText={getLocaleString(\"VIEW-ONLINE/TOO-BIG-FOR-SINGLE\")}\r\n              textStyleOverrides={{\r\n                right: 0,\r\n                backgroundColor: \"orange\",\r\n              }}\r\n            >\r\n              <b style={{ color: \"orange\" }}>{size_y.toString()}</b>\r\n            </Tooltip>\r\n          ) : (\r\n            size_y.toString()\r\n          )}\r\n          {\"x\"}\r\n          {size_z.toString()}\r\n        </h2>\r\n      );\r\n    }\r\n\r\n    const component_topBar = (\r\n      <div className=\"topBar\">\r\n        {component_controls}\r\n        {component_waila}\r\n        {component_size}\r\n      </div>\r\n    );\r\n\r\n    return (\r\n      <div className={\"viewOnline2DContainer\"}>\r\n        {component_topBar}\r\n        <canvas\r\n          width={33 * 128 * optionValue_mapSize_x}\r\n          height={33 * (128 * optionValue_mapSize_y + 1)}\r\n          ref={this.canvasRef_viewOnline}\r\n          style={{\r\n            width: `${33 * 128 * optionValue_mapSize_x * zoomFactor}px`,\r\n            height: `${33 * (128 * optionValue_mapSize_y + 1) * zoomFactor}px`,\r\n            position: \"relative\",\r\n            left: canvasOffset_x,\r\n            top: canvasOffset_y,\r\n          }}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ViewOnline2D;\r\n","import { Euler, EventDispatcher, Vector3 } from \"three\";\r\n\r\nconst _euler = new Euler(0, 0, 0, \"YXZ\");\r\nconst _vector = new Vector3();\r\nconst _vector_up = new Vector3(0, 1, 0);\r\n\r\nconst _changeEvent = { type: \"change\" };\r\nconst _lockEvent = { type: \"lock\" };\r\nconst _unlockEvent = { type: \"unlock\" };\r\n\r\nconst _PI_2 = Math.PI / 2;\r\n\r\nclass PointerLockControls extends EventDispatcher {\r\n  constructor(camera, domElement) {\r\n    super();\r\n\r\n    if (domElement === undefined) {\r\n      console.warn('THREE.PointerLockControls: The second parameter \"domElement\" is now mandatory.');\r\n      domElement = document.body;\r\n    }\r\n\r\n    this.domElement = domElement;\r\n    this.isLocked = false;\r\n\r\n    // Set to constrain the pitch of the camera\r\n    // Range is 0 to Math.PI radians\r\n    this.minPolarAngle = 0; // radians\r\n    this.maxPolarAngle = Math.PI; // radians\r\n\r\n    const scope = this;\r\n\r\n    function onMouseMove(event) {\r\n      if (scope.isLocked === false) return;\r\n\r\n      const movementX = event.movementX || event.mozMovementX || event.webkitMovementX || 0;\r\n      const movementY = event.movementY || event.mozMovementY || event.webkitMovementY || 0;\r\n\r\n      _euler.setFromQuaternion(camera.quaternion);\r\n\r\n      _euler.y -= movementX * 0.002;\r\n      _euler.x -= movementY * 0.002;\r\n\r\n      _euler.x = Math.max(_PI_2 - scope.maxPolarAngle, Math.min(_PI_2 - scope.minPolarAngle, _euler.x));\r\n\r\n      camera.quaternion.setFromEuler(_euler);\r\n\r\n      scope.dispatchEvent(_changeEvent);\r\n    }\r\n\r\n    function onPointerlockChange() {\r\n      if (scope.domElement.ownerDocument.pointerLockElement === scope.domElement) {\r\n        scope.dispatchEvent(_lockEvent);\r\n\r\n        scope.isLocked = true;\r\n      } else {\r\n        scope.dispatchEvent(_unlockEvent);\r\n\r\n        scope.isLocked = false;\r\n      }\r\n    }\r\n\r\n    function onPointerlockError() {\r\n      console.error(\"THREE.PointerLockControls: Unable to use Pointer Lock API\");\r\n    }\r\n\r\n    this.connect = function () {\r\n      scope.domElement.ownerDocument.addEventListener(\"mousemove\", onMouseMove);\r\n      scope.domElement.ownerDocument.addEventListener(\"pointerlockchange\", onPointerlockChange);\r\n      scope.domElement.ownerDocument.addEventListener(\"pointerlockerror\", onPointerlockError);\r\n    };\r\n\r\n    this.disconnect = function () {\r\n      scope.domElement.ownerDocument.removeEventListener(\"mousemove\", onMouseMove);\r\n      scope.domElement.ownerDocument.removeEventListener(\"pointerlockchange\", onPointerlockChange);\r\n      scope.domElement.ownerDocument.removeEventListener(\"pointerlockerror\", onPointerlockError);\r\n    };\r\n\r\n    this.dispose = function () {\r\n      this.disconnect();\r\n    };\r\n\r\n    this.getObject = function () {\r\n      // retaining this method for backward compatibility\r\n\r\n      return camera;\r\n    };\r\n\r\n    this.getDirection = (function () {\r\n      const direction = new Vector3(0, 0, -1);\r\n\r\n      return function (v) {\r\n        return v.copy(direction).applyQuaternion(camera.quaternion);\r\n      };\r\n    })();\r\n\r\n    this.moveForward = function (distance) {\r\n      // move forward parallel to the xz-plane\r\n      // assumes camera.up is y-up\r\n\r\n      _vector.setFromMatrixColumn(camera.matrix, 0);\r\n\r\n      _vector.crossVectors(camera.up, _vector);\r\n\r\n      camera.position.addScaledVector(_vector, distance);\r\n    };\r\n\r\n    this.moveRight = function (distance) {\r\n      _vector.setFromMatrixColumn(camera.matrix, 0);\r\n\r\n      camera.position.addScaledVector(_vector, distance);\r\n    };\r\n\r\n    this.moveUp = function (distance) {\r\n      camera.position.addScaledVector(_vector_up, distance);\r\n    };\r\n\r\n    this.lock = function () {\r\n      this.domElement.requestPointerLock();\r\n    };\r\n\r\n    this.unlock = function () {\r\n      scope.domElement.ownerDocument.exitPointerLock();\r\n    };\r\n\r\n    this.connect();\r\n  }\r\n}\r\n\r\nexport { PointerLockControls };\r\n","import React, { Component, createRef } from \"react\";\r\n\r\nimport Tooltip from \"../../tooltip\";\r\n\r\nimport IMG_Textures from \"../../../images/textures.png\";\r\n\r\nimport NBTReader from \"../nbtReader\";\r\nimport Waila from \"../viewOnlineCommon/waila\";\r\n\r\nimport * as THREE from \"three\";\r\nimport { PointerLockControls } from \"./pointerLockControls\";\r\n\r\nimport \"./viewOnline3D.css\";\r\n\r\nclass BlockWorld {\r\n  faces = [\r\n    {\r\n      // left\r\n      uvRow: 0,\r\n      dir: [-1, 0, 0],\r\n      vertices: [\r\n        { pos: [0, 1, 0], uv: [0, 1] },\r\n        { pos: [0, 0, 0], uv: [0, 0] },\r\n        { pos: [0, 1, 1], uv: [1, 1] },\r\n        { pos: [0, 0, 1], uv: [1, 0] },\r\n      ],\r\n    },\r\n    {\r\n      // right\r\n      uvRow: 0,\r\n      dir: [1, 0, 0],\r\n      vertices: [\r\n        { pos: [1, 1, 1], uv: [0, 1] },\r\n        { pos: [1, 0, 1], uv: [0, 0] },\r\n        { pos: [1, 1, 0], uv: [1, 1] },\r\n        { pos: [1, 0, 0], uv: [1, 0] },\r\n      ],\r\n    },\r\n    {\r\n      // bottom\r\n      uvRow: 0,\r\n      dir: [0, -1, 0],\r\n      vertices: [\r\n        { pos: [1, 0, 1], uv: [1, 0] },\r\n        { pos: [0, 0, 1], uv: [0, 0] },\r\n        { pos: [1, 0, 0], uv: [1, 1] },\r\n        { pos: [0, 0, 0], uv: [0, 1] },\r\n      ],\r\n    },\r\n    {\r\n      // top\r\n      uvRow: 0,\r\n      dir: [0, 1, 0],\r\n      vertices: [\r\n        { pos: [0, 1, 1], uv: [1, 1] },\r\n        { pos: [1, 1, 1], uv: [0, 1] },\r\n        { pos: [0, 1, 0], uv: [1, 0] },\r\n        { pos: [1, 1, 0], uv: [0, 0] },\r\n      ],\r\n    },\r\n    {\r\n      // north\r\n      uvRow: 0,\r\n      dir: [0, 0, -1],\r\n      vertices: [\r\n        { pos: [1, 0, 0], uv: [0, 0] },\r\n        { pos: [0, 0, 0], uv: [1, 0] },\r\n        { pos: [1, 1, 0], uv: [0, 1] },\r\n        { pos: [0, 1, 0], uv: [1, 1] },\r\n      ],\r\n    },\r\n    {\r\n      // south\r\n      uvRow: 0,\r\n      dir: [0, 0, 1],\r\n      vertices: [\r\n        { pos: [0, 0, 1], uv: [0, 0] },\r\n        { pos: [1, 0, 1], uv: [1, 0] },\r\n        { pos: [0, 1, 1], uv: [0, 1] },\r\n        { pos: [1, 1, 1], uv: [1, 1] },\r\n      ],\r\n    },\r\n  ];\r\n\r\n  chunkSize = 16;\r\n  chunks = {};\r\n  chunks_mesh = {};\r\n  renderRequested = false;\r\n  animationFrameRequestID = null;\r\n\r\n  // for click mouse events\r\n  mouse = {\r\n    x: 0,\r\n    y: 0,\r\n    moveX: 0,\r\n    moveY: 0,\r\n  };\r\n\r\n  constructor(options) {\r\n    this.canvasRef = options.canvasRef;\r\n    this.coloursJSON = options.coloursJSON;\r\n    this.tileSize = options.tileSize;\r\n    this.tileTextureWidth = options.tileTextureWidth;\r\n    this.tileTextureHeight = options.tileTextureHeight;\r\n    const { camera_x, camera_y, camera_z } = options;\r\n    this.onSelectBlockCallback = options.onSelectBlockCallback;\r\n    // each chunk is a Uint8Array; each block is stored as colourSetId, blockId\r\n    // chunks represent a chunkSize^3 volume\r\n\r\n    this.renderer = new THREE.WebGLRenderer({ canvas: this.canvasRef.current });\r\n    this.renderer.setSize(this.canvasRef.current.clientWidth, this.canvasRef.current.clientHeight, false);\r\n\r\n    this.scene = new THREE.Scene();\r\n    this.scene.background = new THREE.Color(\"lightblue\");\r\n    this.scene.add(new THREE.AmbientLight(0xdddddd));\r\n\r\n    const fov = 75;\r\n    const aspect = 2;\r\n    const near = 0.1;\r\n    const far = 250;\r\n    this.camera = new THREE.PerspectiveCamera(fov, aspect, near, far);\r\n    this.camera.position.set(camera_x, camera_y, camera_z);\r\n\r\n    this.controls = new PointerLockControls(this.camera, this.canvasRef.current);\r\n\r\n    const texture = new THREE.TextureLoader().load(IMG_Textures, this.render);\r\n    texture.magFilter = THREE.NearestFilter;\r\n    texture.minFilter = THREE.NearestFilter;\r\n\r\n    this.material = new THREE.MeshLambertMaterial({\r\n      map: texture,\r\n      side: THREE.FrontSide,\r\n      alphaTest: 0,\r\n      transparent: false,\r\n    });\r\n  }\r\n\r\n  startAnimationLoop = () => {\r\n    this.renderer.render(this.scene, this.camera);\r\n    this.animationFrameRequestID = window.requestAnimationFrame(this.startAnimationLoop);\r\n  };\r\n\r\n  stopAnimationLoop = () => {\r\n    window.cancelAnimationFrame(this.animationFrameRequestID);\r\n  };\r\n\r\n  addEventListeners() {\r\n    window.addEventListener(\"resize\", this.handleWindowResize);\r\n    this.canvasRef.current.addEventListener(\"pointerdown\", this.handlePointerDown, { passive: false });\r\n    this.canvasRef.current.addEventListener(\"touchstart\", this.handleTouchStart, { passive: false });\r\n    document.addEventListener(\"keydown\", this.handleKeyDown, { passive: false });\r\n    document.addEventListener(\"keyup\", this.handleKeyUp, { passive: false });\r\n    this.controls.connect();\r\n  }\r\n\r\n  handleKeyDown = function (e) {\r\n    e.preventDefault();\r\n    switch (e.key) {\r\n      case \"w\":\r\n        this.controls.moveForward(1);\r\n        break;\r\n      case \"a\":\r\n        this.controls.moveRight(-1);\r\n        break;\r\n      case \"s\":\r\n        this.controls.moveForward(-1);\r\n        break;\r\n      case \"d\":\r\n        this.controls.moveRight(1);\r\n        break;\r\n      case \"e\":\r\n        this.controls.moveUp(-1);\r\n        break;\r\n      case \" \":\r\n        this.controls.moveUp(1);\r\n        break;\r\n      case \"c\":\r\n        this.camera.fov = 25;\r\n        this.camera.updateProjectionMatrix();\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }.bind(this);\r\n\r\n  handleKeyUp = function (e) {\r\n    e.preventDefault();\r\n    switch (e.key) {\r\n      case \"c\":\r\n        this.camera.fov = 75;\r\n        this.camera.updateProjectionMatrix();\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }.bind(this);\r\n\r\n  handlePointerDown = function (e) {\r\n    e.preventDefault();\r\n    this.mouse.x = e.clientX;\r\n    this.mouse.y = e.clientY;\r\n    this.mouse.moveX = 0;\r\n    this.mouse.moveY = 0;\r\n    this.canvasRef.current.addEventListener(\"pointermove\", this.recordMovement);\r\n    this.canvasRef.current.addEventListener(\"pointerup\", this.selectBlockIfNoMovement);\r\n    this.controls.lock();\r\n  }.bind(this);\r\n\r\n  recordMovement = function (e) {\r\n    this.mouse.moveX += Math.abs(this.mouse.x - e.clientX);\r\n    this.mouse.moveY += Math.abs(this.mouse.y - e.clientY);\r\n  }.bind(this);\r\n\r\n  selectBlockIfNoMovement = function (e) {\r\n    if (this.mouse.moveX < 5 && this.mouse.moveY < 5) {\r\n      this.selectBlock(e);\r\n    }\r\n    this.canvasRef.current.removeEventListener(\"pointermove\", this.recordMovement);\r\n    this.canvasRef.current.removeEventListener(\"pointerup\", this.selectBlockIfNoMovement);\r\n  }.bind(this);\r\n\r\n  handleTouchStart = function (e) {\r\n    // TODO test this on mobile\r\n    e.preventDefault(); // prevent scrolling\r\n  };\r\n\r\n  handleWindowResize = function () {\r\n    const width = this.canvasRef.current.clientWidth;\r\n    const height = this.canvasRef.current.clientHeight;\r\n\r\n    this.renderer.setSize(width, height, false);\r\n    this.camera.aspect = width / height;\r\n    this.camera.updateProjectionMatrix();\r\n  }.bind(this);\r\n\r\n  removeEventListeners() {\r\n    window.removeEventListener(\"resize\", this.handleWindowResize);\r\n    this.canvasRef.current.removeEventListener(\"pointerdown\", this.handlePointerDown, { passive: false });\r\n    this.canvasRef.current.removeEventListener(\"touchstart\", this.handleTouchStart, { passive: false });\r\n    document.removeEventListener(\"keydown\", this.handleKeyDown, { passive: false });\r\n    document.removeEventListener(\"keyup\", this.handleKeyUp, { passive: false });\r\n    this.controls.unlock();\r\n    this.controls.disconnect();\r\n  }\r\n\r\n  computeBlockOffset(x, y, z) {\r\n    const { chunkSize } = this;\r\n    const blockX = THREE.MathUtils.euclideanModulo(x, chunkSize) | 0;\r\n    const blockY = THREE.MathUtils.euclideanModulo(y, chunkSize) | 0;\r\n    const blockZ = THREE.MathUtils.euclideanModulo(z, chunkSize) | 0;\r\n    return 2 * (blockY * chunkSize * chunkSize + blockZ * chunkSize + blockX);\r\n  }\r\n\r\n  getChunkKey(x, y, z) {\r\n    const { chunkSize } = this;\r\n    const chunkX = Math.floor(x / chunkSize);\r\n    const chunkY = Math.floor(y / chunkSize);\r\n    const chunkZ = Math.floor(z / chunkSize);\r\n    return `${chunkX},${chunkY},${chunkZ}`;\r\n  }\r\n\r\n  getChunkForBlock(x, y, z) {\r\n    return this.chunks[this.getChunkKey(x, y, z)];\r\n  }\r\n\r\n  addChunkForBlock(x, y, z) {\r\n    const chunkKey = this.getChunkKey(x, y, z);\r\n    let chunk = this.chunks[chunkKey];\r\n    if (!chunk) {\r\n      const { chunkSize } = this;\r\n      chunk = new Uint8Array(2 * chunkSize * chunkSize * chunkSize);\r\n      for (let i = 0; i < chunk.length; i++) {\r\n        chunk[i] = 255;\r\n      }\r\n      this.chunks[chunkKey] = chunk;\r\n    }\r\n    return chunk;\r\n  }\r\n\r\n  getBlock(x, y, z) {\r\n    const chunk = this.getChunkForBlock(x, y, z);\r\n    if (!chunk) {\r\n      return null;\r\n    }\r\n    const blockOffset = this.computeBlockOffset(x, y, z);\r\n    return chunk.slice(blockOffset, blockOffset + 2);\r\n  }\r\n\r\n  setBlock(x, y, z, colourSetId, blockId) {\r\n    let chunk = this.getChunkForBlock(x, y, z);\r\n    if (!chunk) {\r\n      chunk = this.addChunkForBlock(x, y, z);\r\n    }\r\n    const blockOffset = this.computeBlockOffset(x, y, z);\r\n    chunk[blockOffset] = colourSetId;\r\n    chunk[blockOffset + 1] = blockId;\r\n  }\r\n\r\n  selectBlock() {\r\n    const canvas = this.canvasRef.current;\r\n    // const rect = canvas.getBoundingClientRect();\r\n    const pos = {\r\n      // x: ((e.clientX - rect.left) * canvas.width) / rect.width,\r\n      // y: ((e.clientY - rect.top) * canvas.height) / rect.height,\r\n      // x: ((rect.right + rect.left) * canvas.width) / (2 * rect.width),\r\n      // y: ((rect.bottom + rect.top) * canvas.height) / (2 * rect.height),\r\n      x: canvas.width / 2,\r\n      y: canvas.height / 2,\r\n    };\r\n    const x = (pos.x / canvas.width) * 2 - 1;\r\n    const y = (pos.y / canvas.height) * -2 + 1; // note we flip Y\r\n\r\n    const start = new THREE.Vector3();\r\n    const end = new THREE.Vector3();\r\n    start.setFromMatrixPosition(this.camera.matrixWorld);\r\n    end.set(x, y, 1).unproject(this.camera);\r\n\r\n    const intersection = this.intersectRay(start, end);\r\n    if (intersection) {\r\n      // the intersection point is on the face. That means\r\n      // the math imprecision could put us on either side of the face.\r\n      // so go half a normal into the block if removing (currentBlock = 0)\r\n      // our out of the block if adding (currentBlock  > 0)\r\n      // const pos = intersection.position.map((v, numberOfVertices) => {\r\n      //   return v + intersection.normal[numberOfVertices] * -0.5;\r\n      // });\r\n      this.onSelectBlockCallback({\r\n        x: intersection.block_coords.x,\r\n        y: intersection.block_coords.y,\r\n        z: intersection.block_coords.z,\r\n        colourSetId: intersection.block[0],\r\n        blockId: intersection.block[1],\r\n      });\r\n    }\r\n  }\r\n\r\n  intersectRay(start, end) {\r\n    // from\r\n    // http://www.cse.chalmers.se/edu/year/2010/course/TDA361/grid.pdf\r\n    let dx = end.x - start.x;\r\n    let dy = end.y - start.y;\r\n    let dz = end.z - start.z;\r\n    const lenSq = dx * dx + dy * dy + dz * dz;\r\n    const len = Math.sqrt(lenSq);\r\n\r\n    dx /= len;\r\n    dy /= len;\r\n    dz /= len;\r\n\r\n    let t = 0.0;\r\n    let ix = Math.floor(start.x);\r\n    let iy = Math.floor(start.y);\r\n    let iz = Math.floor(start.z);\r\n\r\n    const stepX = dx > 0 ? 1 : -1;\r\n    const stepY = dy > 0 ? 1 : -1;\r\n    const stepZ = dz > 0 ? 1 : -1;\r\n\r\n    const txDelta = Math.abs(1 / dx);\r\n    const tyDelta = Math.abs(1 / dy);\r\n    const tzDelta = Math.abs(1 / dz);\r\n\r\n    const xDist = stepX > 0 ? ix + 1 - start.x : start.x - ix;\r\n    const yDist = stepY > 0 ? iy + 1 - start.y : start.y - iy;\r\n    const zDist = stepZ > 0 ? iz + 1 - start.z : start.z - iz;\r\n\r\n    // location of nearest block boundary, in units of t\r\n    let txMax = txDelta < Infinity ? txDelta * xDist : Infinity;\r\n    let tyMax = tyDelta < Infinity ? tyDelta * yDist : Infinity;\r\n    let tzMax = tzDelta < Infinity ? tzDelta * zDist : Infinity;\r\n\r\n    let steppedIndex = -1;\r\n\r\n    // main loop along raycast vector\r\n    while (t <= len) {\r\n      const block = this.getBlock(ix, iy, iz);\r\n      if (block !== null && !(block[0] === 255 && block[1] === 255)) {\r\n        return {\r\n          position: [start.x + t * dx, start.y + t * dy, start.z + t * dz],\r\n          normal: [steppedIndex === 0 ? -stepX : 0, steppedIndex === 1 ? -stepY : 0, steppedIndex === 2 ? -stepZ : 0],\r\n          block: block,\r\n          block_coords: { x: ix, y: iy, z: iz },\r\n        };\r\n      }\r\n\r\n      // advance t to next nearest block boundary\r\n      if (txMax < tyMax) {\r\n        if (txMax < tzMax) {\r\n          ix += stepX;\r\n          t = txMax;\r\n          txMax += txDelta;\r\n          steppedIndex = 0;\r\n        } else {\r\n          iz += stepZ;\r\n          t = tzMax;\r\n          tzMax += tzDelta;\r\n          steppedIndex = 2;\r\n        }\r\n      } else {\r\n        if (tyMax < tzMax) {\r\n          iy += stepY;\r\n          t = tyMax;\r\n          tyMax += tyDelta;\r\n          steppedIndex = 1;\r\n        } else {\r\n          iz += stepZ;\r\n          t = tzMax;\r\n          tzMax += tzDelta;\r\n          steppedIndex = 2;\r\n        }\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  generateGeometryDataForChunk(chunkX, chunkY, chunkZ) {\r\n    const { coloursJSON, chunkSize, tileSize, tileTextureWidth, tileTextureHeight } = this;\r\n    const verticesComponents = [];\r\n    const normalsComponents = [];\r\n    const uvs = [];\r\n    const indices = [];\r\n    const startX = chunkX * chunkSize;\r\n    const startY = chunkY * chunkSize;\r\n    const startZ = chunkZ * chunkSize;\r\n\r\n    const chunk = this.getChunkForBlock(startX, startY, startZ);\r\n    if (chunk) {\r\n      for (let y = 0; y < chunkSize; y++) {\r\n        const blockY = startY + y;\r\n        for (let z = 0; z < chunkSize; z++) {\r\n          const blockZ = startZ + z;\r\n          for (let x = 0; x < chunkSize; x++) {\r\n            const blockX = startX + x;\r\n            const blockOffset = this.computeBlockOffset(x, y, z);\r\n            const block = chunk.slice(blockOffset, blockOffset + 2);\r\n            let [colourSetId, blockId] = block;\r\n            if (!(colourSetId === 255 && blockId === 255)) {\r\n              if (!(colourSetId === 64 && blockId === 2)) {\r\n                // if not placeholder texture then check if custom texture needed\r\n                if (coloursJSON[colourSetId.toString()].blocks[blockId.toString()].presetIndex === \"CUSTOM\") {\r\n                  colourSetId = 64;\r\n                  blockId = 5;\r\n                }\r\n              }\r\n              // There is a block here but do we need faces for it?\r\n              for (const { dir, vertices, uvRow } of this.faces) {\r\n                const neighbor = this.getBlock(blockX + dir[0], blockY + dir[1], blockZ + dir[2]);\r\n                if (neighbor === null || (neighbor[0] === 255 && neighbor[1] === 255)) {\r\n                  // this block has no neighbor in this direction so we need a face\r\n                  const numberOfVertices = verticesComponents.length / 3;\r\n                  for (const { pos, uv } of vertices) {\r\n                    verticesComponents.push(pos[0] + x, pos[1] + y, pos[2] + z);\r\n                    normalsComponents.push(...dir);\r\n                    uvs.push(((blockId + uv[0]) * tileSize) / tileTextureWidth, 1 - ((uvRow + (1 + colourSetId) - uv[1]) * tileSize) / tileTextureHeight);\r\n                  }\r\n                  indices.push(numberOfVertices, numberOfVertices + 1, numberOfVertices + 2, numberOfVertices + 2, numberOfVertices + 1, numberOfVertices + 3);\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return {\r\n      verticesComponents,\r\n      normalsComponents,\r\n      uvs,\r\n      indices,\r\n    };\r\n  }\r\n\r\n  updateChunkGeometry(x, y, z) {\r\n    const { chunkSize } = this;\r\n    const chunkX = Math.floor(x / chunkSize);\r\n    const chunkY = Math.floor(y / chunkSize);\r\n    const chunkZ = Math.floor(z / chunkSize);\r\n    const chunkKey = this.getChunkKey(x, y, z);\r\n    let mesh = this.chunks_mesh[chunkKey];\r\n    const geometry = mesh ? mesh.geometry : new THREE.BufferGeometry();\r\n\r\n    const { verticesComponents, normalsComponents, uvs, indices } = this.generateGeometryDataForChunk(chunkX, chunkY, chunkZ);\r\n    const positionNumComponents = 3;\r\n    geometry.setAttribute(\"position\", new THREE.BufferAttribute(new Float32Array(verticesComponents), positionNumComponents));\r\n    const normalNumComponents = 3;\r\n    geometry.setAttribute(\"normal\", new THREE.BufferAttribute(new Float32Array(normalsComponents), normalNumComponents));\r\n    const uvNumComponents = 2;\r\n    geometry.setAttribute(\"uv\", new THREE.BufferAttribute(new Float32Array(uvs), uvNumComponents));\r\n    geometry.setIndex(indices);\r\n    geometry.computeBoundingSphere();\r\n\r\n    if (!mesh) {\r\n      mesh = new THREE.Mesh(geometry, this.material);\r\n      mesh.name = chunkKey;\r\n      this.chunks_mesh[chunkKey] = mesh;\r\n      this.scene.add(mesh);\r\n      mesh.position.set(chunkX * chunkSize, chunkY * chunkSize, chunkZ * chunkSize);\r\n    }\r\n  }\r\n\r\n  updateBlockGeometry(x, y, z) {\r\n    const updatedChunkKeys = {};\r\n    for (const offset of [\r\n      [0, 0, 0], // self\r\n      [-1, 0, 0], // left\r\n      [1, 0, 0], // right\r\n      [0, -1, 0], // down\r\n      [0, 1, 0], // up\r\n      [0, 0, -1], // back\r\n      [0, 0, 1], // front\r\n    ]) {\r\n      const ox = x + offset[0];\r\n      const oy = y + offset[1];\r\n      const oz = z + offset[2];\r\n      const chunkKey = this.getChunkKey(ox, oy, oz);\r\n      if (!updatedChunkKeys[chunkKey]) {\r\n        updatedChunkKeys[chunkKey] = true;\r\n        this.updateChunkGeometry(ox, oy, oz);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nclass ViewOnline3D extends Component {\r\n  state = {\r\n    viewOnline_NBT_decompressed: null,\r\n    selectedBlock: null,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.canvasRef_viewOnline = createRef();\r\n  }\r\n\r\n  getNBTDecompressed() {\r\n    const { viewOnline_NBT } = this.props;\r\n    let nbtReader = new NBTReader();\r\n    nbtReader.loadBuffer(viewOnline_NBT);\r\n    const viewOnline_NBT_decompressed = nbtReader.getData();\r\n    return viewOnline_NBT_decompressed;\r\n  }\r\n\r\n  drawNBT() {\r\n    const { coloursJSON, optionValue_version } = this.props;\r\n    const { viewOnline_NBT_decompressed } = this.state;\r\n    const [schematic_size_x, schematic_size_y, schematic_size_z] = viewOnline_NBT_decompressed.value.size.value.value;\r\n\r\n    this.world.chunks = {};\r\n    this.world.chunks_mesh = {};\r\n\r\n    let paletteIdToColourSetIdAndBlockId = [];\r\n    const NBT_palette = viewOnline_NBT_decompressed.value.palette.value.value;\r\n    for (let paletteItem_index = 0; paletteItem_index < NBT_palette.length; paletteItem_index++) {\r\n      const paletteItem = NBT_palette[paletteItem_index];\r\n      let paletteItemFound = false;\r\n      for (const [colourSetId, colourSet] of Object.entries(coloursJSON)) {\r\n        if (paletteItemFound) {\r\n          break;\r\n        }\r\n        for (const [blockId, block] of Object.entries(colourSet.blocks)) {\r\n          if (paletteItemFound) {\r\n            break;\r\n          }\r\n          if (!(optionValue_version.MCVersion in block.validVersions)) {\r\n            continue;\r\n          }\r\n          let blockNBTData = block.validVersions[optionValue_version.MCVersion];\r\n          if (typeof blockNBTData === \"string\") {\r\n            // this is of the form eg \"&1.12.2\"\r\n            blockNBTData = block.validVersions[blockNBTData.slice(1)];\r\n          }\r\n          if (\r\n            paletteItem.Name.value === `minecraft:${blockNBTData.NBTName}` &&\r\n            ((!(\"Properties\" in paletteItem) && Object.keys(blockNBTData.NBTArgs).length === 0) ||\r\n              (\"Properties\" in paletteItem &&\r\n                Object.keys(paletteItem.Properties.value).length === Object.keys(blockNBTData.NBTArgs).length &&\r\n                Object.entries(blockNBTData.NBTArgs).every(([argKey, argValue]) => {\r\n                  return argKey in paletteItem.Properties.value && argValue === paletteItem.Properties.value[argKey].value;\r\n                })))\r\n          ) {\r\n            paletteIdToColourSetIdAndBlockId.push([parseInt(colourSetId), parseInt(blockId)]);\r\n            paletteItemFound = true;\r\n          }\r\n        }\r\n      }\r\n      if (!paletteItemFound) {\r\n        console.log(`Didn't find ${paletteItem.Name.value} in coloursJSON; using placeholder texture`);\r\n        paletteIdToColourSetIdAndBlockId.push([64, 2]);\r\n      }\r\n    }\r\n\r\n    viewOnline_NBT_decompressed.value.blocks.value.value.forEach((block) => {\r\n      const block_coords = block.pos.value.value;\r\n      const block_paletteId = block.state.value;\r\n      this.world.setBlock(...block_coords, ...paletteIdToColourSetIdAndBlockId[block_paletteId]);\r\n    });\r\n    for (let x = 0; x < schematic_size_x; x += this.world.chunkSize) {\r\n      for (let y = 0; y < schematic_size_y; y += this.world.chunkSize) {\r\n        for (let z = 0; z < schematic_size_z; z += this.world.chunkSize) {\r\n          this.world.updateChunkGeometry(x, y, z);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  handleEscapeKeyDown = function (e) {\r\n    const { handleViewOnline3DEscape } = this.props;\r\n    e.preventDefault();\r\n    if (e.key === \"Escape\") {\r\n      handleViewOnline3DEscape();\r\n    }\r\n  }.bind(this);\r\n\r\n  componentDidMount() {\r\n    const { coloursJSON } = this.props;\r\n    const canvasRef = this.canvasRef_viewOnline;\r\n    const viewOnline_NBT_decompressed = this.getNBTDecompressed();\r\n    const [, size_y, size_z] = viewOnline_NBT_decompressed.value.size.value.value;\r\n\r\n    this.world = new BlockWorld({\r\n      canvasRef: canvasRef,\r\n      coloursJSON: coloursJSON,\r\n      tileSize: 32,\r\n      tileTextureWidth: 608,\r\n      tileTextureHeight: 2080,\r\n      camera_x: 0,\r\n      camera_y: size_y + 1,\r\n      camera_z: size_z,\r\n      onSelectBlockCallback: (selectedBlock) => {\r\n        this.setState({ selectedBlock });\r\n      },\r\n    });\r\n\r\n    this.world.startAnimationLoop();\r\n\r\n    this.setState({ viewOnline_NBT_decompressed }, () => {\r\n      this.drawNBT();\r\n      document.addEventListener(\"keydown\", this.handleEscapeKeyDown);\r\n      this.world.addEventListeners();\r\n    });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.world.stopAnimationLoop();\r\n    this.world.removeEventListeners();\r\n    document.removeEventListener(\"keydown\", this.handleEscapeKeyDown);\r\n  }\r\n\r\n  render() {\r\n    const { getLocaleString, coloursJSON } = this.props;\r\n    const { viewOnline_NBT_decompressed, selectedBlock } = this.state;\r\n    let component_size = null;\r\n    if (viewOnline_NBT_decompressed !== null) {\r\n      const [size_x, size_y, size_z] = viewOnline_NBT_decompressed.value.size.value.value;\r\n      component_size = (\r\n        <h2\r\n          style={{\r\n            position: \"fixed\",\r\n            zIndex: 121,\r\n            left: 0,\r\n            top: 0,\r\n          }}\r\n        >\r\n          {getLocaleString(\"VIEW-ONLINE/SIZE\")}\r\n          {\": \"}\r\n          {size_x.toString()}\r\n          {\"x\"}\r\n          {size_y > 256 ? (\r\n            <Tooltip\r\n              tooltipText={getLocaleString(\"VIEW-ONLINE/TOO-BIG-FOR-SINGLE\")}\r\n              textStyleOverrides={{\r\n                whiteSpace: \"nowrap\",\r\n                backgroundColor: \"orange\",\r\n              }}\r\n            >\r\n              <b style={{ color: \"orange\" }}>{size_y.toString()}</b>\r\n            </Tooltip>\r\n          ) : (\r\n            size_y.toString()\r\n          )}\r\n          {\"x\"}\r\n          {size_z.toString()}\r\n        </h2>\r\n      );\r\n    }\r\n    const component_controls = (\r\n      <div\r\n        style={{\r\n          position: \"fixed\",\r\n          zIndex: 121,\r\n          left: 0,\r\n          bottom: 0,\r\n        }}\r\n      >\r\n        <h3 style={{ margin: 0 }}>{`${getLocaleString(\"VIEW-ONLINE/CONTROLS\")}: W A S D E SPACE C`}</h3>\r\n        <h3 style={{ margin: 0 }}>{`ESC ESC ${getLocaleString(\"VIEW-ONLINE/TO-EXIT\")}`}</h3>\r\n      </div>\r\n    );\r\n    let component_waila = null;\r\n    if (selectedBlock !== null) {\r\n      component_waila = (\r\n        <Waila\r\n          getLocaleString={getLocaleString}\r\n          coloursJSON={coloursJSON}\r\n          selectedBlock={selectedBlock}\r\n          style={{\r\n            position: \"fixed\",\r\n            zIndex: 121,\r\n            right: 0,\r\n            top: 0,\r\n          }}\r\n        />\r\n      );\r\n    }\r\n\r\n    return (\r\n      <React.Fragment>\r\n        {component_size}\r\n        {component_controls}\r\n        {component_waila}\r\n        <b style={{ position: \"fixed\", zIndex: 121, top: \"50%\", left: \"50%\" }}>{\"\\\\\"}</b>\r\n        <canvas\r\n          ref={this.canvasRef_viewOnline}\r\n          style={{\r\n            position: \"fixed\",\r\n            zIndex: 120,\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            top: 0,\r\n            bottom: 0,\r\n            left: 0,\r\n            right: 0,\r\n          }}\r\n        />\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ViewOnline3D;\r\n","import React, { Component } from \"react\";\r\n\r\nimport CookieManager from \"../../cookieManager\";\r\nimport BlockSelection from \"./blockSelection\";\r\nimport GreenButtons from \"./greenButtons\";\r\nimport MapPreview from \"./mapPreview\";\r\nimport MapSettings from \"./mapSettings\";\r\nimport Materials from \"./materials\";\r\nimport coloursJSON from \"./json/coloursJSON.json\";\r\nimport ViewOnline2D from \"./viewOnline2D/viewOnline2D\";\r\nimport ViewOnline3D from \"./viewOnline3D/viewOnline3D\";\r\n\r\nimport BackgroundColourModes from \"./json/backgroundColourModes.json\";\r\nimport CropModes from \"./json/cropModes.json\";\r\nimport DefaultPresets from \"./json/defaultPresets.json\";\r\nimport DitherMethods from \"./json/ditherMethods.json\";\r\nimport MapModes from \"./json/mapModes.json\";\r\nimport SupportedVersions from \"./json/supportedVersions.json\";\r\nimport WhereSupportBlocksModes from \"./json/whereSupportBlocksModes.json\";\r\n\r\nimport IMG_Upload from \"../../images/upload.png\";\r\n\r\nimport \"./mapartController.css\";\r\n\r\nclass MapartController extends Component {\r\n  state = {\r\n    coloursJSON: null,\r\n    selectedBlocks: {},\r\n    optionValue_version: Object.values(SupportedVersions)[Object.keys(SupportedVersions).length - 1], // default to the latest version supported\r\n    optionValue_modeNBTOrMapdat: MapModes.SCHEMATIC_NBT.uniqueId,\r\n    optionValue_mapSize_x: 1,\r\n    optionValue_mapSize_y: 1,\r\n    optionValue_cropImage: CropModes.CENTER.uniqueId,\r\n    optionValue_cropImage_zoom: 10, // this gets scaled down by a factor of 10\r\n    optionValue_cropImage_percent_x: 50,\r\n    optionValue_cropImage_percent_y: 50,\r\n    optionValue_showGridOverlay: false,\r\n    optionValue_staircasing: MapModes.SCHEMATIC_NBT.staircaseModes.VALLEY.uniqueId,\r\n    optionValue_whereSupportBlocks: WhereSupportBlocksModes.ALL_OPTIMIZED.uniqueId,\r\n    optionValue_supportBlock: \"cobblestone\",\r\n    optionValue_transparency: false,\r\n    optionValue_transparencyTolerance: 128,\r\n    optionValue_mapdatFilenameUseId: true,\r\n    optionValue_mapdatFilenameIdStart: 0,\r\n    optionValue_betterColour: true,\r\n    optionValue_dithering: DitherMethods.FloydSteinberg.uniqueId,\r\n    optionValue_preprocessingEnabled: false,\r\n    preProcessingValue_brightness: 100,\r\n    preProcessingValue_contrast: 100,\r\n    preProcessingValue_saturation: 100,\r\n    preProcessingValue_backgroundColourSelect: BackgroundColourModes.OFF.uniqueId,\r\n    preProcessingValue_backgroundColour: \"#151515\",\r\n    optionValue_extras_moreStaircasingOptions: false,\r\n    uploadedImage: null,\r\n    uploadedImage_baseFilename: null,\r\n    presets: [],\r\n    selectedPresetName: \"None\",\r\n    currentMaterialsData: {\r\n      pixelsData: null,\r\n      maps: [[]], // entries are dictionaries with keys \"materials\", \"supportBlockCount\"\r\n      currentSelectedBlocks: {}, // we keep this soley for materials.js\r\n    },\r\n    mapPreviewWorker_inProgress: false,\r\n    viewOnline_NBT: null,\r\n    viewOnline_3D: false,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    // update default presets to latest version; done via checking for localeString\r\n    CookieManager.init();\r\n    let cookiesPresets_loaded = JSON.parse(CookieManager.touchCookie(\"mapartcraft_presets\", JSON.stringify(DefaultPresets)));\r\n    let cookiesPresets_updated = [];\r\n    for (const cookiesPreset_loaded of cookiesPresets_loaded) {\r\n      let cookiesPreset_updated = undefined;\r\n      if (\"localeKey\" in cookiesPreset_loaded) {\r\n        cookiesPreset_updated = DefaultPresets.find((defaultPreset) => defaultPreset.localeKey === cookiesPreset_loaded.localeKey);\r\n      }\r\n      if (cookiesPreset_updated === undefined) {\r\n        cookiesPreset_updated = cookiesPreset_loaded;\r\n      }\r\n      cookiesPresets_updated.push(cookiesPreset_updated);\r\n    }\r\n    CookieManager.setCookie(\"mapartcraft_presets\", JSON.stringify(cookiesPresets_updated));\r\n    this.state.presets = cookiesPresets_updated;\r\n\r\n    let cookie_customBlocks = JSON.parse(CookieManager.touchCookie(\"mapartcraft_customBlocks\", JSON.stringify([])));\r\n    this.state.coloursJSON = this.getMergedColoursJSON(cookie_customBlocks);\r\n\r\n    for (const colourSetId of Object.keys(this.state.coloursJSON)) {\r\n      this.state.selectedBlocks[colourSetId] = \"-1\";\r\n    }\r\n\r\n    const cookieMCVersion = CookieManager.touchCookie(\"mapartcraft_mcversion\", Object.values(SupportedVersions)[Object.keys(SupportedVersions).length - 1].MCVersion);\r\n    const supportedVersionFound = Object.values(SupportedVersions).find((supportedVersion) => supportedVersion.MCVersion === cookieMCVersion);\r\n    if (supportedVersionFound !== undefined) {\r\n      this.state.optionValue_version = supportedVersionFound;\r\n    }\r\n\r\n    const URLParams = new URL(window.location).searchParams;\r\n    if (URLParams.has(\"preset\")) {\r\n      const decodedPresetBlocks = this.URLToPreset(URLParams.get(\"preset\"));\r\n      if (decodedPresetBlocks !== null) {\r\n        this.state.selectedBlocks = decodedPresetBlocks;\r\n      }\r\n    }\r\n  }\r\n\r\n  getMergedColoursJSON(customBlocks) {\r\n    // this is how we currently merge custom blocks into coloursJSON at runtime / when custom blocks update. this may change if presets support for custom blocks is added\r\n    let coloursJSON_custom = JSON.parse(JSON.stringify(coloursJSON)); // hmmm\r\n    for (const [colourSetId, customBlock] of customBlocks) {\r\n      coloursJSON_custom[colourSetId].blocks[Object.keys(coloursJSON_custom[colourSetId].blocks).length.toString()] = customBlock;\r\n    }\r\n    return coloursJSON_custom;\r\n  }\r\n\r\n  eventListener_dragover = function (e) {\r\n    // this has to be here for drop event to work\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n  };\r\n\r\n  eventListener_drop = function (e) {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    const files = e.dataTransfer.files;\r\n    if (files.length) {\r\n      const file = files[0];\r\n      const imgUrl = URL.createObjectURL(file);\r\n      this.loadUploadedImageFromURL(imgUrl, \"mapart\");\r\n    }\r\n  }.bind(this);\r\n\r\n  eventListener_paste = function (e) {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    const files = e.clipboardData.files;\r\n    if (files.length) {\r\n      const file = files[0];\r\n      const imgUrl = URL.createObjectURL(file);\r\n      this.loadUploadedImageFromURL(imgUrl, \"mapart\");\r\n    }\r\n  }.bind(this);\r\n\r\n  componentDidMount() {\r\n    this.loadUploadedImageFromURL(IMG_Upload, \"mapart\");\r\n\r\n    document.addEventListener(\"dragover\", this.eventListener_dragover);\r\n    document.addEventListener(\"drop\", this.eventListener_drop);\r\n\r\n    document.addEventListener(\"paste\", this.eventListener_paste);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener(\"dragover\", this.eventListener_dragover);\r\n    document.removeEventListener(\"drop\", this.eventListener_drop);\r\n    document.removeEventListener(\"paste\", this.eventListener_paste);\r\n  }\r\n\r\n  onFileDialogEvent = (e) => {\r\n    const files = e.target.files;\r\n    if (!files.length) {\r\n      return;\r\n    } else {\r\n      const file = files[0];\r\n      const imgUrl = URL.createObjectURL(file);\r\n      this.loadUploadedImageFromURL(imgUrl, file.name.replace(/\\.[^/.]+$/, \"\"));\r\n    }\r\n  };\r\n\r\n  loadUploadedImageFromURL(imageURL, baseFilename) {\r\n    const img = new Image();\r\n    img.onload = () => {\r\n      this.setState({\r\n        uploadedImage: img,\r\n        uploadedImage_baseFilename: baseFilename,\r\n      });\r\n    };\r\n    img.src = imageURL;\r\n  }\r\n\r\n  handleChangeColourSetBlock = (colourSetId, blockId) => {\r\n    let selectedBlocks = { ...this.state.selectedBlocks };\r\n    selectedBlocks[colourSetId] = blockId;\r\n    this.setState({\r\n      selectedBlocks,\r\n    });\r\n  };\r\n\r\n  handleChangeColourSetBlocks = (setsAndBlocks) => {\r\n    const { coloursJSON, optionValue_version } = this.state;\r\n    let selectedBlocks = {};\r\n    for (const colourSetId of Object.keys(coloursJSON)) {\r\n      selectedBlocks[colourSetId] = \"-1\";\r\n    }\r\n    for (const [int_colourSetId, presetIndex] of setsAndBlocks) {\r\n      // we store presetIndex in the cookie, not blockId\r\n      const colourSetId = int_colourSetId.toString();\r\n      if (!(colourSetId in coloursJSON)) {\r\n        continue;\r\n      }\r\n      const blockIdAndBlock = Object.entries(coloursJSON[colourSetId].blocks).find(([, block]) => block.presetIndex === presetIndex);\r\n      if (blockIdAndBlock === undefined) {\r\n        continue;\r\n      }\r\n      const blockId = blockIdAndBlock[0];\r\n      if (Object.keys(coloursJSON[colourSetId].blocks[blockId].validVersions).includes(optionValue_version.MCVersion)) {\r\n        selectedBlocks[colourSetId] = blockId;\r\n      }\r\n    }\r\n    this.setState({\r\n      selectedBlocks,\r\n    });\r\n  };\r\n\r\n  onOptionChange_modeNBTOrMapdat = (e) => {\r\n    const mode = parseInt(e.target.value);\r\n    this.setState({ optionValue_modeNBTOrMapdat: mode });\r\n    if (mode === MapModes.SCHEMATIC_NBT.uniqueId) {\r\n      this.setState({ optionValue_staircasing: MapModes.SCHEMATIC_NBT.staircaseModes.VALLEY.uniqueId });\r\n    } else {\r\n      this.setState({ optionValue_staircasing: MapModes.MAPDAT.staircaseModes.ON_UNOBTAINABLE.uniqueId });\r\n    }\r\n  };\r\n\r\n  onOptionChange_version = (e) => {\r\n    const { coloursJSON } = this.state;\r\n    const mcVersion = e.target.value;\r\n    CookieManager.setCookie(\"mapartcraft_mcversion\", mcVersion);\r\n    const supportedVersionFound = Object.values(SupportedVersions).find((supportedVersion) => supportedVersion.MCVersion === mcVersion);\r\n    this.setState((currentState) => {\r\n      let selectedBlocks = { ...currentState.selectedBlocks };\r\n      for (const [colourSetId, colourSet] of Object.entries(coloursJSON)) {\r\n        if (selectedBlocks[colourSetId] !== \"-1\" && !Object.keys(colourSet.blocks[selectedBlocks[colourSetId]].validVersions).includes(mcVersion)) {\r\n          selectedBlocks[colourSetId] = \"-1\";\r\n        }\r\n      }\r\n      return { optionValue_version: supportedVersionFound, selectedBlocks };\r\n    });\r\n  };\r\n\r\n  onOptionChange_mapSize_x = (value) => {\r\n    this.setState({\r\n      optionValue_mapSize_x: value,\r\n    });\r\n  };\r\n\r\n  onOptionChange_mapSize_y = (value) => {\r\n    this.setState({\r\n      optionValue_mapSize_y: value,\r\n    });\r\n  };\r\n\r\n  onOptionChange_cropImage = (e) => {\r\n    const cropValue = parseInt(e.target.value);\r\n    // CENTER is a special case of MANUAL\r\n    // reset cropImage variables any time we change\r\n    this.setState({\r\n      optionValue_cropImage: cropValue,\r\n      optionValue_cropImage_zoom: 10,\r\n      optionValue_cropImage_percent_x: 50,\r\n      optionValue_cropImage_percent_y: 50,\r\n    });\r\n  };\r\n\r\n  onOptionChange_cropImage_zoom = (value) => {\r\n    this.setState({\r\n      optionValue_cropImage_zoom: value,\r\n    });\r\n  };\r\n\r\n  onOptionChange_cropImage_percent_x = (value) => {\r\n    this.setState({\r\n      optionValue_cropImage_percent_x: value,\r\n    });\r\n  };\r\n\r\n  onOptionChange_cropImage_percent_y = (value) => {\r\n    this.setState({\r\n      optionValue_cropImage_percent_y: value,\r\n    });\r\n  };\r\n\r\n  onOptionChange_showGridOverlay = () => {\r\n    this.setState({\r\n      optionValue_showGridOverlay: !this.state.optionValue_showGridOverlay,\r\n    });\r\n    // \"updatePreviewScale(0)\"\r\n  };\r\n\r\n  onOptionChange_staircasing = (e) => {\r\n    const staircasingValue = parseInt(e.target.value);\r\n    this.setState({ optionValue_staircasing: staircasingValue });\r\n  };\r\n\r\n  onOptionChange_transparency = () => {\r\n    this.setState({\r\n      optionValue_transparency: !this.state.optionValue_transparency,\r\n    });\r\n  };\r\n\r\n  onOptionChange_transparencyTolerance = (value) => {\r\n    this.setState({\r\n      optionValue_transparencyTolerance: value,\r\n    });\r\n  };\r\n\r\n  onOptionChange_mapdatFilenameUseId = () => {\r\n    this.setState((currentState) => {\r\n      return {\r\n        optionValue_mapdatFilenameUseId: !currentState.optionValue_mapdatFilenameUseId,\r\n      };\r\n    });\r\n  };\r\n\r\n  onOptionChange_mapdatFilenameIdStart = (value) => {\r\n    this.setState({\r\n      optionValue_mapdatFilenameIdStart: value,\r\n    });\r\n  };\r\n\r\n  onOptionChange_BetterColour = () => {\r\n    this.setState({\r\n      optionValue_betterColour: !this.state.optionValue_betterColour,\r\n    });\r\n  };\r\n\r\n  onOptionChange_dithering = (e) => {\r\n    const ditheringValue = parseInt(e.target.value);\r\n    this.setState({ optionValue_dithering: ditheringValue });\r\n  };\r\n\r\n  onOptionChange_WhereSupportBlocks = (e) => {\r\n    const newValue = parseInt(e.target.value);\r\n    this.setState({ optionValue_whereSupportBlocks: newValue });\r\n  };\r\n\r\n  setOption_SupportBlock = (text) => {\r\n    this.setState({ optionValue_supportBlock: text });\r\n  };\r\n\r\n  onOptionChange_PreProcessingEnabled = () => {\r\n    this.setState({\r\n      optionValue_preprocessingEnabled: !this.state.optionValue_preprocessingEnabled,\r\n    });\r\n  };\r\n\r\n  onOptionChange_PreProcessingBrightness = (value) => {\r\n    this.setState({\r\n      preProcessingValue_brightness: value,\r\n    });\r\n  };\r\n\r\n  onOptionChange_PreProcessingContrast = (value) => {\r\n    this.setState({\r\n      preProcessingValue_contrast: value,\r\n    });\r\n  };\r\n\r\n  onOptionChange_PreProcessingSaturation = (value) => {\r\n    this.setState({\r\n      preProcessingValue_saturation: value,\r\n    });\r\n  };\r\n\r\n  onOptionChange_PreProcessingBackgroundColourSelect = (e) => {\r\n    const newValue = parseInt(e.target.value);\r\n    this.setState({ preProcessingValue_backgroundColourSelect: newValue });\r\n  };\r\n\r\n  onOptionChange_PreProcessingBackgroundColour = (e) => {\r\n    const newValue = e.target.value;\r\n    this.setState({ preProcessingValue_backgroundColour: newValue });\r\n  };\r\n\r\n  onOptionChange_extras_moreStaircasingOptions = () => {\r\n    const { optionValue_modeNBTOrMapdat, optionValue_extras_moreStaircasingOptions } = this.state;\r\n    this.setState({ optionValue_extras_moreStaircasingOptions: !optionValue_extras_moreStaircasingOptions });\r\n    if (optionValue_extras_moreStaircasingOptions) {\r\n      if (optionValue_modeNBTOrMapdat === MapModes.SCHEMATIC_NBT.uniqueId) {\r\n        this.setState({ optionValue_staircasing: MapModes.SCHEMATIC_NBT.staircaseModes.VALLEY.uniqueId });\r\n      } else {\r\n        this.setState({ optionValue_staircasing: MapModes.MAPDAT.staircaseModes.ON_UNOBTAINABLE.uniqueId });\r\n      }\r\n    }\r\n  };\r\n\r\n  onGetViewOnlineNBT = (viewOnline_NBT) => {\r\n    this.setState({ viewOnline_NBT });\r\n  };\r\n\r\n  downloadBlobFile(downloadBlob, filename) {\r\n    const downloadURL = window.URL.createObjectURL(downloadBlob);\r\n    const downloadElt = document.createElement(\"a\");\r\n    downloadElt.style = \"display: none\";\r\n    downloadElt.href = downloadURL;\r\n    downloadElt.download = filename;\r\n    document.body.appendChild(downloadElt);\r\n    downloadElt.click();\r\n    window.URL.revokeObjectURL(downloadURL);\r\n    document.body.removeChild(downloadElt);\r\n  }\r\n\r\n  handleGetPDNPaletteClicked = () => {\r\n    const { getLocaleString } = this.props;\r\n    const { coloursJSON, selectedBlocks, optionValue_modeNBTOrMapdat, optionValue_staircasing } = this.state;\r\n    let paletteText =\r\n      \"; paint.net Palette File\\n; Generated by MapartCraft\\n; Link to preset: \" +\r\n      this.selectedBlocksToURL() +\r\n      (Object.entries(selectedBlocks).some(([colourSetId, blockId]) => blockId !== \"-1\" && coloursJSON[colourSetId].blocks[blockId].presetIndex === \"CUSTOM\")\r\n        ? \"\\n; Custom blocks not listed!\"\r\n        : \"\") +\r\n      \"\\n; staircasing: \" +\r\n      ([\r\n        MapModes.SCHEMATIC_NBT.staircaseModes.CLASSIC.uniqueId,\r\n        MapModes.SCHEMATIC_NBT.staircaseModes.VALLEY.uniqueId,\r\n        MapModes.MAPDAT.staircaseModes.ON.uniqueId,\r\n        MapModes.MAPDAT.staircaseModes.ON_UNOBTAINABLE.uniqueId,\r\n      ].includes(optionValue_staircasing)\r\n        ? \"enabled\"\r\n        : \"disabled\") +\r\n      \"\\n; unobtainable colours: \" +\r\n      ([MapModes.MAPDAT.staircaseModes.ON_UNOBTAINABLE.uniqueId, MapModes.MAPDAT.staircaseModes.FULL_UNOBTAINABLE.uniqueId].includes(optionValue_staircasing)\r\n        ? \"enabled\"\r\n        : \"disabled\") +\r\n      \"\\n\";\r\n    let numberOfColoursExported = 0;\r\n    const toneKeysToExport = Object.values(Object.values(MapModes).find((mapMode) => mapMode.uniqueId === optionValue_modeNBTOrMapdat).staircaseModes).find(\r\n      (staircaseMode) => staircaseMode.uniqueId === optionValue_staircasing\r\n    ).toneKeys; // this .find stuff is annoying.\r\n    // TODO change from uniqueId to key\r\n    for (const [selectedBlock_colourSetId, selectedBlock_blockId] of Object.entries(selectedBlocks)) {\r\n      if (selectedBlock_blockId !== \"-1\") {\r\n        let colours = coloursJSON[selectedBlock_colourSetId].tonesRGB;\r\n        for (const toneKeyToExport of toneKeysToExport) {\r\n          numberOfColoursExported += 1;\r\n          paletteText += \"FF\";\r\n          for (let i = 0; i < 3; i++) {\r\n            paletteText += Number(colours[toneKeyToExport][i]).toString(16).padStart(2, \"0\").toUpperCase();\r\n          }\r\n          paletteText += \"\\n\";\r\n        }\r\n      }\r\n    }\r\n    if (numberOfColoursExported === 0) {\r\n      alert(getLocaleString(\"BLOCK-SELECTION/PRESETS/DOWNLOAD-WARNING-NONE-SELECTED\"));\r\n      return;\r\n    } else if (numberOfColoursExported > 96) {\r\n      alert(\r\n        `${getLocaleString(\"BLOCK-SELECTION/PRESETS/DOWNLOAD-WARNING-MAX-COLOURS-1\")}${numberOfColoursExported.toString()}${getLocaleString(\r\n          \"BLOCK-SELECTION/PRESETS/DOWNLOAD-WARNING-MAX-COLOURS-2\"\r\n        )}`\r\n      );\r\n    }\r\n    const downloadBlob = new Blob([paletteText], { type: \"text/plain\" });\r\n    this.downloadBlobFile(downloadBlob, \"MapartcraftPalette.txt\");\r\n  };\r\n\r\n  handlePresetChange = (e) => {\r\n    const presetName = e.target.value;\r\n    const { presets } = this.state;\r\n\r\n    this.setState({ selectedPresetName: presetName });\r\n\r\n    if (presetName === \"None\") {\r\n      this.handleChangeColourSetBlocks([]);\r\n    } else {\r\n      const selectedPreset = presets.find((preset) => preset.name === presetName);\r\n      if (selectedPreset !== undefined) {\r\n        this.handleChangeColourSetBlocks(selectedPreset.blocks);\r\n      }\r\n    }\r\n  };\r\n\r\n  canDeletePreset = () => {\r\n    const { selectedPresetName } = this.state;\r\n    return selectedPresetName !== \"None\" && !DefaultPresets.find((defaultPreset) => defaultPreset.name === selectedPresetName);\r\n  };\r\n\r\n  handleDeletePreset = () => {\r\n    const { getLocaleString } = this.props;\r\n    const { presets, selectedPresetName } = this.state;\r\n    if (!this.canDeletePreset()) return;\r\n    if (!window.confirm(`${getLocaleString(\"BLOCK-SELECTION/PRESETS/DELETE-CONFIRM\")} ${selectedPresetName}`)) return;\r\n    const presets_new = presets.filter((preset) => preset.name !== selectedPresetName);\r\n    this.setState({\r\n      presets: presets_new,\r\n      selectedPresetName: \"None\",\r\n    });\r\n    CookieManager.setCookie(\"mapartcraft_presets\", JSON.stringify(presets_new));\r\n  };\r\n\r\n  handleSavePreset = () => {\r\n    const { getLocaleString } = this.props;\r\n    const { coloursJSON, presets, selectedBlocks } = this.state;\r\n\r\n    let presetToSave_name = prompt(getLocaleString(\"BLOCK-SELECTION/PRESETS/SAVE-PROMPT-ENTER-NAME\"), \"\");\r\n    if (presetToSave_name === null) {\r\n      return;\r\n    }\r\n\r\n    const otherPresets = presets.filter((preset) => preset.name !== presetToSave_name);\r\n    let newPreset = { name: presetToSave_name, blocks: [] };\r\n    Object.keys(selectedBlocks).forEach((key) => {\r\n      if (selectedBlocks[key] !== \"-1\" && coloursJSON[key].blocks[selectedBlocks[key]].presetIndex !== \"CUSTOM\") {\r\n        newPreset.blocks.push([parseInt(key), parseInt(coloursJSON[key].blocks[selectedBlocks[key]].presetIndex)]);\r\n      }\r\n    });\r\n    const presets_new = [...otherPresets, newPreset];\r\n    this.setState({\r\n      presets: presets_new,\r\n      selectedPresetName: presetToSave_name,\r\n    });\r\n    CookieManager.setCookie(\"mapartcraft_presets\", JSON.stringify(presets_new));\r\n  };\r\n\r\n  selectedBlocksToURL = () => {\r\n    // colourSetId encoded in base 36 as [0-9a-z]\r\n    // blockId encoded in modified base 26 as [Q-ZA-P]\r\n    const { coloursJSON, selectedBlocks } = this.state;\r\n    let presetQueryString = \"\";\r\n    for (const [colourSetId, blockId] of Object.entries(selectedBlocks)) {\r\n      if (blockId !== \"-1\" && coloursJSON[colourSetId].blocks[blockId].presetIndex !== \"CUSTOM\") {\r\n        presetQueryString += parseInt(colourSetId).toString(36);\r\n        presetQueryString += coloursJSON[colourSetId].blocks[blockId].presetIndex\r\n          .toString(26)\r\n          .toUpperCase()\r\n          .replace(/[0-9]/g, (match) => {\r\n            return {\r\n              0: \"Q\",\r\n              1: \"R\",\r\n              2: \"S\",\r\n              3: \"T\",\r\n              4: \"U\",\r\n              5: \"V\",\r\n              6: \"W\",\r\n              7: \"X\",\r\n              8: \"Y\",\r\n              9: \"Z\",\r\n            }[match];\r\n          });\r\n      }\r\n    }\r\n    return \"https://rebane2001.com/mapartcraft/?preset=\" + presetQueryString;\r\n  };\r\n\r\n  handleSharePreset = () => {\r\n    const { getLocaleString } = this.props;\r\n    const { coloursJSON, selectedBlocks } = this.state;\r\n    if (Object.keys(selectedBlocks).every((colourSetId) => selectedBlocks[colourSetId] === \"-1\")) {\r\n      alert(getLocaleString(\"BLOCK-SELECTION/PRESETS/SHARE-WARNING-NONE-SELECTED\"));\r\n    } else {\r\n      if (\r\n        Object.entries(selectedBlocks).some(([colourSetId, blockId]) => blockId !== \"-1\" && coloursJSON[colourSetId].blocks[blockId].presetIndex === \"CUSTOM\")\r\n      ) {\r\n        alert(getLocaleString(\"BLOCK-SELECTION/ADD-CUSTOM/NO-EXPORT\"));\r\n      }\r\n      prompt(getLocaleString(\"BLOCK-SELECTION/PRESETS/SHARE-LINK\"), this.selectedBlocksToURL());\r\n    }\r\n  };\r\n\r\n  URLToPreset = (encodedPreset) => {\r\n    const { onCorruptedPreset } = this.props;\r\n    const { coloursJSON, optionValue_version } = this.state;\r\n    switch (encodedPreset) {\r\n      case \"dQw4w9WgXcQ\":\r\n        window.location.replace(\"https://www.youtube.com/watch?v=cZ5wOPinZd4\");\r\n        return null;\r\n      case \"mares\":\r\n        document.body.style.backgroundSize=\"100%\";\r\n        fetch(\"https://derpibooru.org/api/v1/json/search/images?q=scenery,score.gte:1000,safe&sf=random&per_page=1\").then(req=>req.json()).then(derp=>document.body.style.backgroundImage=`url(${derp.images[0].representations.full})`);\r\n        return null;\r\n    }\r\n    if (!/^[0-9a-zQ-ZA-P]*$/g.test(encodedPreset)) {\r\n      onCorruptedPreset();\r\n      return null;\r\n    }\r\n    let selectedBlocks = { ...this.state.selectedBlocks };\r\n    let presetRegex = /([0-9a-z]+)(?=([Q-ZA-P]+))/g;\r\n    let match;\r\n    while ((match = presetRegex.exec(encodedPreset)) !== null) {\r\n      const encodedColourSetId = match[1];\r\n      const encodedBlockId = match[2];\r\n      const decodedColourSetId = parseInt(encodedColourSetId, 36).toString();\r\n      const decodedPresetIndex = parseInt(\r\n        encodedBlockId\r\n          .replace(/[Q-Z]/g, (match) => {\r\n            return {\r\n              Q: \"0\",\r\n              R: \"1\",\r\n              S: \"2\",\r\n              T: \"3\",\r\n              U: \"4\",\r\n              V: \"5\",\r\n              W: \"6\",\r\n              X: \"7\",\r\n              Y: \"8\",\r\n              Z: \"9\",\r\n            }[match];\r\n          })\r\n          .toLowerCase(),\r\n        26\r\n      );\r\n      if (!(decodedColourSetId in coloursJSON)) {\r\n        continue;\r\n      }\r\n      const decodedBlock = Object.entries(coloursJSON[decodedColourSetId].blocks).find((elt) => elt[1].presetIndex === decodedPresetIndex);\r\n      if (decodedBlock === undefined) {\r\n        continue;\r\n      }\r\n      const decodedBlockId = decodedBlock[0].toString();\r\n      if (Object.keys(coloursJSON[decodedColourSetId].blocks[decodedBlockId].validVersions).includes(optionValue_version.MCVersion)) {\r\n        selectedBlocks[decodedColourSetId] = decodedBlockId;\r\n      }\r\n    }\r\n    return selectedBlocks;\r\n  };\r\n\r\n  onMapPreviewWorker_begin = () => {\r\n    this.setState({ mapPreviewWorker_inProgress: true });\r\n  };\r\n\r\n  handleSetMapMaterials = (currentMaterialsData) => {\r\n    this.setState({ currentMaterialsData: currentMaterialsData, mapPreviewWorker_inProgress: false });\r\n  };\r\n\r\n  onChooseViewOnline3D = () => {\r\n    this.setState({ viewOnline_3D: true });\r\n  };\r\n\r\n  handleViewOnline3DEscape = () => {\r\n    this.setState({\r\n      viewOnline_NBT: null,\r\n      viewOnline_3D: false,\r\n    });\r\n  };\r\n\r\n  handleAddCustomBlock = (block_colourSetId, block_name, block_nbtTags, block_versions, block_needsSupport, block_flammable) => {\r\n    const { getLocaleString } = this.props;\r\n    // const {coloursJSON} = this.state;\r\n    const block_name_trimmed = block_name.trim();\r\n    if (block_name_trimmed === \"\") {\r\n      alert(getLocaleString(\"BLOCK-SELECTION/ADD-CUSTOM/ERROR-NO-NAME\"));\r\n      return;\r\n    }\r\n    if (Object.values(block_versions).every((t) => !t)) {\r\n      alert(getLocaleString(\"BLOCK-SELECTION/ADD-CUSTOM/ERROR-NONE-SELECTED\"));\r\n      return;\r\n    }\r\n    let blockToAdd = {\r\n      displayName: block_name_trimmed,\r\n      validVersions: {},\r\n      supportBlockMandatory: block_needsSupport,\r\n      flammable: block_flammable,\r\n      presetIndex: \"CUSTOM\",\r\n    };\r\n    let addedFirstVersion = false;\r\n    for (const [block_version, block_version_isSelected] of Object.entries(block_versions)) {\r\n      if (!block_version_isSelected) {\r\n        continue;\r\n      }\r\n      if (addedFirstVersion) {\r\n        blockToAdd.validVersions[SupportedVersions[block_version].MCVersion] = `&${Object.keys(blockToAdd.validVersions)[0]}`;\r\n      } else {\r\n        blockToAdd.validVersions[SupportedVersions[block_version].MCVersion] = {\r\n          NBTName: block_name_trimmed,\r\n          NBTArgs: {},\r\n        };\r\n        for (const [nbtTag_key, nbtTag_value] of block_nbtTags) {\r\n          const nbtTag_key_trimmed = nbtTag_key.trim();\r\n          const nbtTag_value_trimmed = nbtTag_value.trim();\r\n          if (!(nbtTag_key_trimmed === \"\" && nbtTag_value_trimmed === \"\")) {\r\n            blockToAdd.validVersions[SupportedVersions[block_version].MCVersion].NBTArgs[nbtTag_key_trimmed] = nbtTag_value_trimmed;\r\n          }\r\n        }\r\n        addedFirstVersion = true;\r\n      }\r\n    }\r\n\r\n    const customBlocks = JSON.parse(CookieManager.getCookie(\"mapartcraft_customBlocks\"));\r\n    let customBlocks_new = customBlocks.filter(\r\n      (customBlock) =>\r\n        customBlock[0] !== block_colourSetId ||\r\n        customBlock[1].displayName !== block_name_trimmed ||\r\n        !Object.values(SupportedVersions).some(\r\n          (supportedVersion_value) =>\r\n            supportedVersion_value.MCVersion in customBlock[1].validVersions && supportedVersion_value.MCVersion in blockToAdd.validVersions\r\n        )\r\n    ); // filter removes customBlocks that have the same colourSet, name, and some versions in common as the one we are adding. For example this allows us to add different 1.12.2 and 1.13+ versions of a block\r\n    customBlocks_new.push([block_colourSetId, blockToAdd]);\r\n\r\n    this.setState((currentState) => {\r\n      return { coloursJSON: this.getMergedColoursJSON(customBlocks_new), selectedBlocks: { ...currentState.selectedBlocks, [block_colourSetId]: \"-1\" } };\r\n    });\r\n    CookieManager.setCookie(\"mapartcraft_customBlocks\", JSON.stringify(customBlocks_new));\r\n  };\r\n\r\n  handleDeleteCustomBlock = (block_colourSetId, block_name, block_versions) => {\r\n    const block_name_trimmed = block_name.trim();\r\n    if (block_name_trimmed === \"\" || Object.values(block_versions).every((t) => !t)) {\r\n      return;\r\n    }\r\n\r\n    let validVersions = [];\r\n    for (const [block_version, block_version_isSelected] of Object.entries(block_versions)) {\r\n      if (block_version_isSelected) {\r\n        validVersions.push(SupportedVersions[block_version].MCVersion);\r\n      }\r\n    }\r\n\r\n    const customBlocks = JSON.parse(CookieManager.getCookie(\"mapartcraft_customBlocks\"));\r\n    let customBlocks_new = customBlocks.filter(\r\n      (customBlock) =>\r\n        customBlock[0] !== block_colourSetId ||\r\n        customBlock[1].displayName !== block_name_trimmed ||\r\n        !Object.values(SupportedVersions).some(\r\n          (supportedVersion_value) =>\r\n            supportedVersion_value.MCVersion in customBlock[1].validVersions && validVersions.includes(supportedVersion_value.MCVersion)\r\n        )\r\n    );\r\n\r\n    this.setState((currentState) => {\r\n      return {\r\n        coloursJSON: this.getMergedColoursJSON(customBlocks_new),\r\n        selectedBlocks: { ...currentState.selectedBlocks, [block_colourSetId]: \"-1\" },\r\n        currentMaterialsData: {\r\n          // reset currentMaterialsData as materials.js uses a cached version of materials which could contain blocks which no longer exist\r\n          pixelsData: null,\r\n          maps: [[]],\r\n          currentSelectedBlocks: {},\r\n        },\r\n      };\r\n    });\r\n    CookieManager.setCookie(\"mapartcraft_customBlocks\", JSON.stringify(customBlocks_new));\r\n  };\r\n\r\n  render() {\r\n    const { getLocaleString } = this.props;\r\n    const {\r\n      coloursJSON,\r\n      selectedBlocks,\r\n      optionValue_version,\r\n      optionValue_modeNBTOrMapdat,\r\n      optionValue_mapSize_x,\r\n      optionValue_mapSize_y,\r\n      optionValue_cropImage,\r\n      optionValue_cropImage_zoom,\r\n      optionValue_cropImage_percent_x,\r\n      optionValue_cropImage_percent_y,\r\n      optionValue_showGridOverlay,\r\n      optionValue_staircasing,\r\n      optionValue_whereSupportBlocks,\r\n      optionValue_supportBlock,\r\n      optionValue_transparency,\r\n      optionValue_transparencyTolerance,\r\n      optionValue_mapdatFilenameUseId,\r\n      optionValue_mapdatFilenameIdStart,\r\n      optionValue_betterColour,\r\n      optionValue_dithering,\r\n      optionValue_preprocessingEnabled,\r\n      preProcessingValue_brightness,\r\n      preProcessingValue_contrast,\r\n      preProcessingValue_saturation,\r\n      preProcessingValue_backgroundColourSelect,\r\n      preProcessingValue_backgroundColour,\r\n      optionValue_extras_moreStaircasingOptions,\r\n      uploadedImage,\r\n      uploadedImage_baseFilename,\r\n      presets,\r\n      selectedPresetName,\r\n      currentMaterialsData,\r\n      mapPreviewWorker_inProgress,\r\n      viewOnline_NBT,\r\n      viewOnline_3D,\r\n    } = this.state;\r\n    return (\r\n      <div className=\"mapartController\">\r\n        <BlockSelection\r\n          getLocaleString={getLocaleString}\r\n          coloursJSON={coloursJSON}\r\n          onChangeColourSetBlock={this.handleChangeColourSetBlock}\r\n          optionValue_version={optionValue_version}\r\n          optionValue_modeNBTOrMapdat={optionValue_modeNBTOrMapdat}\r\n          optionValue_staircasing={optionValue_staircasing}\r\n          selectedBlocks={selectedBlocks}\r\n          presets={presets}\r\n          selectedPresetName={selectedPresetName}\r\n          canDeletePreset={this.canDeletePreset}\r\n          onPresetChange={this.handlePresetChange}\r\n          onDeletePreset={this.handleDeletePreset}\r\n          onSavePreset={this.handleSavePreset}\r\n          onSharePreset={this.handleSharePreset}\r\n          onGetPDNPaletteClicked={this.handleGetPDNPaletteClicked}\r\n          handleAddCustomBlock={this.handleAddCustomBlock}\r\n          handleDeleteCustomBlock={this.handleDeleteCustomBlock}\r\n        />\r\n        <div className=\"sectionsPreviewSettingsMaterials\">\r\n          <MapPreview\r\n            getLocaleString={getLocaleString}\r\n            coloursJSON={coloursJSON}\r\n            selectedBlocks={selectedBlocks}\r\n            optionValue_version={optionValue_version}\r\n            optionValue_modeNBTOrMapdat={optionValue_modeNBTOrMapdat}\r\n            optionValue_mapSize_x={optionValue_mapSize_x}\r\n            optionValue_mapSize_y={optionValue_mapSize_y}\r\n            optionValue_cropImage={optionValue_cropImage}\r\n            optionValue_cropImage_zoom={optionValue_cropImage_zoom}\r\n            optionValue_cropImage_percent_x={optionValue_cropImage_percent_x}\r\n            optionValue_cropImage_percent_y={optionValue_cropImage_percent_y}\r\n            optionValue_showGridOverlay={optionValue_showGridOverlay}\r\n            optionValue_staircasing={optionValue_staircasing}\r\n            optionValue_whereSupportBlocks={optionValue_whereSupportBlocks}\r\n            optionValue_transparency={optionValue_transparency}\r\n            optionValue_transparencyTolerance={optionValue_transparencyTolerance}\r\n            optionValue_betterColour={optionValue_betterColour}\r\n            optionValue_dithering={optionValue_dithering}\r\n            optionValue_preprocessingEnabled={optionValue_preprocessingEnabled}\r\n            preProcessingValue_brightness={preProcessingValue_brightness}\r\n            preProcessingValue_contrast={preProcessingValue_contrast}\r\n            preProcessingValue_saturation={preProcessingValue_saturation}\r\n            preProcessingValue_backgroundColourSelect={preProcessingValue_backgroundColourSelect}\r\n            preProcessingValue_backgroundColour={preProcessingValue_backgroundColour}\r\n            uploadedImage={uploadedImage}\r\n            onFileDialogEvent={this.onFileDialogEvent}\r\n            onGetMapMaterials={this.handleSetMapMaterials}\r\n            onMapPreviewWorker_begin={this.onMapPreviewWorker_begin}\r\n          />\r\n          <div style={{ display: \"block\" }}>\r\n            <MapSettings\r\n              getLocaleString={getLocaleString}\r\n              coloursJSON={coloursJSON}\r\n              optionValue_version={optionValue_version}\r\n              onOptionChange_version={this.onOptionChange_version}\r\n              optionValue_modeNBTOrMapdat={optionValue_modeNBTOrMapdat}\r\n              onOptionChange_modeNBTOrMapdat={this.onOptionChange_modeNBTOrMapdat}\r\n              optionValue_mapSize_x={optionValue_mapSize_x}\r\n              onOptionChange_mapSize_x={this.onOptionChange_mapSize_x}\r\n              optionValue_mapSize_y={optionValue_mapSize_y}\r\n              onOptionChange_mapSize_y={this.onOptionChange_mapSize_y}\r\n              optionValue_cropImage={optionValue_cropImage}\r\n              onOptionChange_cropImage={this.onOptionChange_cropImage}\r\n              optionValue_cropImage_zoom={optionValue_cropImage_zoom}\r\n              onOptionChange_cropImage_zoom={this.onOptionChange_cropImage_zoom}\r\n              optionValue_cropImage_percent_x={optionValue_cropImage_percent_x}\r\n              onOptionChange_cropImage_percent_x={this.onOptionChange_cropImage_percent_x}\r\n              optionValue_cropImage_percent_y={optionValue_cropImage_percent_y}\r\n              onOptionChange_cropImage_percent_y={this.onOptionChange_cropImage_percent_y}\r\n              optionValue_showGridOverlay={optionValue_showGridOverlay}\r\n              onOptionChange_showGridOverlay={this.onOptionChange_showGridOverlay}\r\n              optionValue_staircasing={optionValue_staircasing}\r\n              onOptionChange_staircasing={this.onOptionChange_staircasing}\r\n              optionValue_whereSupportBlocks={optionValue_whereSupportBlocks}\r\n              onOptionChange_WhereSupportBlocks={this.onOptionChange_WhereSupportBlocks}\r\n              optionValue_supportBlock={optionValue_supportBlock}\r\n              setOption_SupportBlock={this.setOption_SupportBlock}\r\n              optionValue_transparency={optionValue_transparency}\r\n              onOptionChange_transparency={this.onOptionChange_transparency}\r\n              optionValue_transparencyTolerance={optionValue_transparencyTolerance}\r\n              onOptionChange_transparencyTolerance={this.onOptionChange_transparencyTolerance}\r\n              optionValue_mapdatFilenameUseId={optionValue_mapdatFilenameUseId}\r\n              onOptionChange_mapdatFilenameUseId={this.onOptionChange_mapdatFilenameUseId}\r\n              optionValue_mapdatFilenameIdStart={optionValue_mapdatFilenameIdStart}\r\n              onOptionChange_mapdatFilenameIdStart={this.onOptionChange_mapdatFilenameIdStart}\r\n              optionValue_betterColour={optionValue_betterColour}\r\n              onOptionChange_BetterColour={this.onOptionChange_BetterColour}\r\n              optionValue_dithering={optionValue_dithering}\r\n              onOptionChange_dithering={this.onOptionChange_dithering}\r\n              optionValue_preprocessingEnabled={optionValue_preprocessingEnabled}\r\n              onOptionChange_PreProcessingEnabled={this.onOptionChange_PreProcessingEnabled}\r\n              preProcessingValue_brightness={preProcessingValue_brightness}\r\n              onOptionChange_PreProcessingBrightness={this.onOptionChange_PreProcessingBrightness}\r\n              preProcessingValue_contrast={preProcessingValue_contrast}\r\n              onOptionChange_PreProcessingContrast={this.onOptionChange_PreProcessingContrast}\r\n              preProcessingValue_saturation={preProcessingValue_saturation}\r\n              onOptionChange_PreProcessingSaturation={this.onOptionChange_PreProcessingSaturation}\r\n              preProcessingValue_backgroundColourSelect={preProcessingValue_backgroundColourSelect}\r\n              onOptionChange_PreProcessingBackgroundColourSelect={this.onOptionChange_PreProcessingBackgroundColourSelect}\r\n              preProcessingValue_backgroundColour={preProcessingValue_backgroundColour}\r\n              onOptionChange_PreProcessingBackgroundColour={this.onOptionChange_PreProcessingBackgroundColour}\r\n              optionValue_extras_moreStaircasingOptions={optionValue_extras_moreStaircasingOptions}\r\n              onOptionChange_extras_moreStaircasingOptions={this.onOptionChange_extras_moreStaircasingOptions}\r\n            />\r\n            <GreenButtons\r\n              getLocaleString={getLocaleString}\r\n              coloursJSON={coloursJSON}\r\n              selectedBlocks={selectedBlocks}\r\n              optionValue_version={optionValue_version}\r\n              optionValue_modeNBTOrMapdat={optionValue_modeNBTOrMapdat}\r\n              optionValue_mapSize_x={optionValue_mapSize_x}\r\n              optionValue_mapSize_y={optionValue_mapSize_y}\r\n              optionValue_cropImage={optionValue_cropImage}\r\n              optionValue_cropImage_zoom={optionValue_cropImage_zoom}\r\n              optionValue_cropImage_percent_x={optionValue_cropImage_percent_x}\r\n              optionValue_cropImage_percent_y={optionValue_cropImage_percent_y}\r\n              optionValue_staircasing={optionValue_staircasing}\r\n              optionValue_whereSupportBlocks={optionValue_whereSupportBlocks}\r\n              optionValue_supportBlock={optionValue_supportBlock}\r\n              optionValue_transparency={optionValue_transparency}\r\n              optionValue_transparencyTolerance={optionValue_transparencyTolerance}\r\n              optionValue_mapdatFilenameUseId={optionValue_mapdatFilenameUseId}\r\n              optionValue_mapdatFilenameIdStart={optionValue_mapdatFilenameIdStart}\r\n              optionValue_betterColour={optionValue_betterColour}\r\n              optionValue_dithering={optionValue_dithering}\r\n              optionValue_preprocessingEnabled={optionValue_preprocessingEnabled}\r\n              preProcessingValue_brightness={preProcessingValue_brightness}\r\n              preProcessingValue_contrast={preProcessingValue_contrast}\r\n              preProcessingValue_saturation={preProcessingValue_saturation}\r\n              preProcessingValue_backgroundColourSelect={preProcessingValue_backgroundColourSelect}\r\n              preProcessingValue_backgroundColour={preProcessingValue_backgroundColour}\r\n              uploadedImage={uploadedImage}\r\n              uploadedImage_baseFilename={uploadedImage_baseFilename}\r\n              currentMaterialsData={currentMaterialsData}\r\n              mapPreviewWorker_inProgress={mapPreviewWorker_inProgress}\r\n              downloadBlobFile={this.downloadBlobFile}\r\n              onGetViewOnlineNBT={this.onGetViewOnlineNBT}\r\n            />\r\n          </div>\r\n          {optionValue_modeNBTOrMapdat === MapModes.SCHEMATIC_NBT.uniqueId ? (\r\n            <Materials\r\n              getLocaleString={getLocaleString}\r\n              coloursJSON={coloursJSON}\r\n              optionValue_version={optionValue_version}\r\n              optionValue_supportBlock={optionValue_supportBlock}\r\n              currentMaterialsData={currentMaterialsData}\r\n            />\r\n          ) : null}\r\n        </div>\r\n        {viewOnline_NBT !== null &&\r\n          (viewOnline_3D ? (\r\n            <ViewOnline3D\r\n              getLocaleString={getLocaleString}\r\n              coloursJSON={coloursJSON}\r\n              optionValue_version={optionValue_version}\r\n              optionValue_mapSize_x={optionValue_mapSize_x}\r\n              optionValue_mapSize_y={optionValue_mapSize_y}\r\n              viewOnline_NBT={viewOnline_NBT}\r\n              handleViewOnline3DEscape={this.handleViewOnline3DEscape}\r\n            />\r\n          ) : (\r\n            <ViewOnline2D\r\n              getLocaleString={getLocaleString}\r\n              coloursJSON={coloursJSON}\r\n              optionValue_version={optionValue_version}\r\n              optionValue_mapSize_x={optionValue_mapSize_x}\r\n              optionValue_mapSize_y={optionValue_mapSize_y}\r\n              optionValue_staircasing={optionValue_staircasing}\r\n              viewOnline_NBT={viewOnline_NBT}\r\n              onGetViewOnlineNBT={this.onGetViewOnlineNBT}\r\n              onChooseViewOnline3D={this.onChooseViewOnline3D}\r\n            />\r\n          ))}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MapartController;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAANMSURBVHhe7d3PahNRGIbxowv/IHZjcS2uxL3gDXgV3oDgvXgXXoVegOC+iAv3lm6sSGIjKBPmg+Mwk2SSMzPfd573gaEmTJuU99dpRUlvvXn39m9S2G63bxU0AYAnAPAEAJ4AwBMAeAIADwtg9WOVvny4SJvVTXsPMySA7fgfL9LPy+vtWzICHAAb/896s729vl6jEaAAdMe3yAgwAIbGt6gIEAD2jW8REVQP4NDxLRqCqgGMHd8iIagWwLHjWxQEVQI4dXyLgKA6AKXGt2pHUBWA0uNbNSOoBsBU41u1IqgCwNTjWzUiCA9grvGt2hCEBjD3+FZNCMICWGp8qxYEIQEsPb5VA4JwALyMb0VHEAqAt/GtyAjCAPA6vhUVQQgA3se3IiJwDyDK+FY0BK4BRBvfioTALYCo41tRELgEEH18KwICdwBqGd/yjsAVgNrGtzwjcAOg1vEtrwhcAKh9fMsjgsUBUMa3vCFYFABtfMsTgsUAUMe3vCBYBAB9fMsDgtkBaPz/WxrBrAA0fn9LIpgNgMbf3VIIZgGg8Q9rCQSTA9D445obwaQANP5xzYlg0t8XcPn1e9qsy30SV9+u0s2v3+0tf915cDedPz1vb53evbP76dGTch+vr1C/MKJ5Ycfmtf289vDxWXr26nl7K0az/jVQ+UsA4AkAPAGAJwDwBACeAMATAHgCAE8A4AkAPAGAJwDwBACeAMATAHgCAE8A4AkAPAGAJwDwBACeAMATAHgCAE8A4AkAPAGAJwDwBACeAMATAHgCAE8A4AkAPAGAJwDwBACeAMAL9TqBqny6AsATAHgCAE8A4AkAPAGAJwDwBACeAMATAHgCAE8A4BX9x6DP7z+1fxruxeuX27f5uX33DbXr/ZuG7u927ONbpz7noY4595R0BYA3GYBGpx3HlL9/fsxV97EOeewxzzM/Nz/66juvOUqkKwC8yQA038PsmLruY5X8ChlT93nsKz9/1/v1ndccJdIVAN4sPwPkxxR1P37Jr5AxdZ/Hvg49N/+4+VEiXQHguQWQf6/Lj1oa8znl5+ZHiXQFgKf/Fg5PVwB4AgBPAOAJADwBgCcA8AQAngDAEwB4AgBPAOAJADwBgCcA8AQAXUr/ADWYPUK6/RieAAAAAElFTkSuQmCC\"","import React, { Component } from \"react\";\r\n\r\nimport Header from \"./header\";\r\nimport Languages from \"./languages\";\r\nimport MapartController from \"./mapart/mapartController\";\r\n\r\nimport Locale from \"../locale/locale\";\r\n\r\nimport \"./root.css\";\r\n\r\nclass Root extends Component {\r\n  state = {\r\n    displayingCorruptedPresetWarning: false,\r\n    displayingEdgeWarning: false,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    //show warning when using Edge\r\n    if (!(/*@cc_on!@*/ (false || !!document[\"documentMode\"])) && !!window[\"StyleMedia\"]) {\r\n      this.state.displayingEdgeWarning = true;\r\n    }\r\n  }\r\n\r\n  getLocaleString = (stringName, languageCodeOverride) => {\r\n    // languageCodeOverride only used inside this method for falling back to en\r\n    const countryCode = languageCodeOverride !== undefined ? languageCodeOverride : this.props.match.params.countryCode;\r\n    if (countryCode in Locale) {\r\n      let stringSegments = stringName.split(\"/\");\r\n      const stringLast = stringSegments.pop();\r\n      let folder = Locale[countryCode].strings;\r\n      for (const stringSegment of stringSegments) {\r\n        folder = folder[stringSegment];\r\n      }\r\n      if (folder[stringLast] === null) {\r\n        // this could get stuck in an endless loop if the string does not exist in en;\r\n        // en must always exist\r\n        return this.getLocaleString(stringName, \"en\");\r\n      } else {\r\n        return folder[stringLast];\r\n      }\r\n    } else {\r\n      return this.getLocaleString(stringName, \"en\");\r\n    }\r\n  };\r\n\r\n  onEdgeWarningButtonClick = () => {\r\n    this.setState({ displayingEdgeWarning: false });\r\n  };\r\n\r\n  onCorruptedPresetWarningButtonClick = () => {\r\n    this.setState({ displayingCorruptedPresetWarning: false });\r\n  };\r\n\r\n  showCorruptedPresetWarning = () => {\r\n    this.setState({ displayingCorruptedPresetWarning: true });\r\n  };\r\n\r\n  render() {\r\n    const { displayingCorruptedPresetWarning, displayingEdgeWarning } = this.state;\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"titleAndLanguages\">\r\n          <span><h1>MapartCraft</h1>{this.props.match.params.countryCode && this.props.match.params.countryCode !== \"en\" && <small>{this.getLocaleString(\"TRANSLATION/CREDITS\")}</small>}</span>\r\n          <Languages />\r\n        </div>\r\n        <Header getLocaleString={this.getLocaleString} countryCode={this.props.match.params.countryCode} />\r\n        <MapartController getLocaleString={this.getLocaleString} onCorruptedPreset={this.showCorruptedPresetWarning} />\r\n        <div className=\"fixedMessages\">\r\n          {displayingEdgeWarning ? (\r\n            <div className=\"fixedMessage\">\r\n              <p>{this.getLocaleString(\"EDGE-WARNING\").replace(\"\\\\n\", \"\\n\")}</p>\r\n              <button type=\"button\" onClick={this.onEdgeWarningButtonClick}>\r\n                ✔️\r\n              </button>\r\n            </div>\r\n          ) : null}\r\n          {displayingCorruptedPresetWarning ? (\r\n            <div className=\"fixedMessage\">\r\n              <p>{this.getLocaleString(\"BLOCK-SELECTION/PRESETS/IMPORT-ERROR-CORRUPTED\")}</p>\r\n              <button type=\"button\" onClick={this.onCorruptedPresetWarningButtonClick}>\r\n                ❗\r\n              </button>\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Root;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\r\n\r\nimport FAQ from \"./components/faq\";\r\nimport Root from \"./components/root\";\r\n\r\nimport \"./index.css\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Router basename=\"/mapartcraft\">\r\n      <Switch>\r\n        <Route path=\"/:countryCode?/faq\" component={FAQ} />\r\n        <Route path=\"/:countryCode?\" component={Root} />\r\n      </Switch>\r\n    </Router>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}